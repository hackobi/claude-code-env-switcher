import { feeUtils } from "@teleportdao/teleswap-sdk"
import blockchainConfig from "@teleportdao/teleswap-nodes/src/config/blockchain.config"

async function start() {
  const connection = {
    networkName: blockchainConfig.targetNetwork.name,
    ...blockchainConfig.targetNetwork.connection.staticConnectionConfig!,
  }
  const wrapFeeInfo = await feeUtils.getWrapFeeParams("Wrap", connection)
  const minWrap = feeUtils.getMinWrapAmount({
    nativeTokenBTCRate: 0.00000213,
    ...wrapFeeInfo,
  })
  console.log(minWrap)

  const fee = feeUtils.calculateWrapFee("0.001", {
    nativeTokenBTCRate: 0.00000213,
    ...wrapFeeInfo,
  })
  console.log(fee)

  const feeInstant = feeUtils.calculateWrapFee(
    "0.001",
    {
      nativeTokenBTCRate: 0.00000213,
      ...wrapFeeInfo,
    },
    true,
  )
  console.log("feeInstant", feeInstant)

  const unwrapFeeInfo = await feeUtils.getUnwrapFeeParams(connection)
  const unwrapFee = feeUtils.calculateUnwrapFee("0.001", {
    ...unwrapFeeInfo,
  })
  const minUnwrap = feeUtils.getMinUnwrapAmount(unwrapFeeInfo)

  console.log(minUnwrap, unwrapFee)
}

start()
