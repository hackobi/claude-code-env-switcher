import * as ABI from "../../abis"
import ContractBase from "../contract-base"
import { ConnectionConfig } from "../../types/eth"

export default class UniswapV2Router extends ContractBase<typeof ABI.UniswapV2RouterABI> {
  constructor(connectionConfig: ConnectionConfig, contractAddress: string) {
    super(connectionConfig, contractAddress, ABI.UniswapV2RouterABI)
  }

  async getAmountsOut(amountIn: string | number, path: string[]) {
    const amounts = await this.contract.methods.getAmountsOut(amountIn, path).call()
    return amounts[path.length - 1] || 0
  }

  async getAmountsIn(amountOut: string | number, path: string[]) {
    const amounts = await this.contract.methods.getAmountsIn(amountOut, path).call()
    return amounts[0] || 0
  }
}
