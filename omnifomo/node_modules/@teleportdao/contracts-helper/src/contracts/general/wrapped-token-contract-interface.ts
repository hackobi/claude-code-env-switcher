import BigNumber from "bignumber.js"
import { WrappedTokenABI } from "../../abis"
import { ConnectionConfig } from "../../types/eth"
import { ERC20 } from "./erc20-contract-interface"

class WrappedToken extends ERC20 {
  unit: number | undefined
  constructor(connectionConfig: ConnectionConfig, contractAddress: string, unit?: number) {
    super(connectionConfig, contractAddress, unit)
    this.contract = new this.web3Eth.Contract(WrappedTokenABI, contractAddress)
  }

  async deposit(amountWei: number | string) {
    const value = BigNumber(amountWei).toFixed(0)
    return this.contractSendMethod("deposit", value)
  }

  async withdraw(amountWei: number | string) {
    return this.contractSendMethod("withdraw", "0", [amountWei])
  }
}
export default WrappedToken
