{"version":3,"file":"sdk.cjs.production.min.js","sources":["../src/entities/tickDataProvider.ts","../src/constants/constants.ts","../src/constants/internalConstants.ts","../src/constants/addresses.ts","../src/constants/code.ts","../src/utils/mostSignificantBit.ts","../src/utils/tickMath.ts","../src/utils/isSorted.ts","../src/utils/tickList.ts","../src/enums/rounding.ts","../src/enums/bound.ts","../src/enums/field.ts","../src/enums/tradeType.ts","../src/entities/tick.ts","../src/entities/tickListDataProvider.ts","../src/entities/Fraction.ts","../src/entities/JettonAmount.ts","../src/utils/fullMath.ts","../src/utils/sqrtPriceMath.ts","../src/utils/swapMath.ts","../src/utils/liquidityMath.ts","../src/entities/Price.ts","../src/contracts/opCodes.ts","../src/contracts/common/jettonContent.ts","../src/contracts/PoolV3Contract.ts","../src/functions/computePoolAddress.ts","../src/entities/Pool.ts","../src/utils/sqrt.ts","../src/utils/encodeSqrtRatioX96.ts","../src/utils/priceTickConversions.ts","../src/utils/maxLiquidityForAmounts.ts","../src/entities/Percent.ts","../src/entities/position.ts","../src/entities/route.ts","../src/utils/sortedInsert.ts","../src/entities/trade.ts","../src/utils/validateAndParseAddress.ts","../src/entities/Jetton.ts","../src/entities/AbstractJetton.ts","../src/utils/nearestUsableTick.ts","../src/utils/tickLibrary.ts","../src/types/WalletVersion.ts","../src/utils/positionLibrary.ts","../src/functions/maxAmountSpend.ts","../src/utils/parseUnits.ts","../src/functions/mint.ts","../src/functions/getEmojiHash.ts","../src/contracts/WalletContract.ts","../src/functions/emulateMessage.ts","../src/contracts/common/JettonConstants.ts","../src/contracts/common/JettonMinter.ts","../src/contracts/common/JettonWallet.ts","../src/contracts/common/PTonWalletV2.ts","../src/contracts/PositionNFTV3Contract.ts","../src/contracts/RouterV3Contract.ts","../src/contracts/AccountV3Contract.ts","../src/contracts/PoolFactoryContract.ts","../src/classes/PoolMessageManager.ts","../src/functions/getSwapEstimate.ts","../src/utils/getTickToPrice.ts","../src/functions/tryParseAmount.ts","../src/functions/parseWalletVersion.ts"],"sourcesContent":["import { BigintIsh } from '../types/BigIntish';\n\n/**\n * Provides information about ticks\n */\nexport interface TickDataProvider {\n  /**\n   * Return information corresponding to a specific tick\n   * @param tick the tick to load\n   */\n  getTick(tick: number): Promise<{ liquidityNet: BigintIsh }>;\n\n  /**\n   * Return the next tick that is initialized within a single word\n   * @param tick The current tick\n   * @param lte Whether the next tick should be lte the current tick\n   * @param tickSpacing The tick spacing of the pool\n   */\n  nextInitializedTickWithinOneWord(\n    tick: number,\n    lte: boolean,\n    tickSpacing: number\n  ): Promise<[number, boolean]>;\n}\n\n/**\n * This tick data provider does not know how to fetch any tick data. It throws whenever it is required. Useful if you\n * do not need to load tick data for your use case.\n */\nexport class NoTickDataProvider implements TickDataProvider {\n  private static ERROR_MESSAGE = 'No tick data provider was given';\n\n  async getTick(_tick: number): Promise<{ liquidityNet: BigintIsh }> {\n    throw new Error(NoTickDataProvider.ERROR_MESSAGE);\n  }\n\n  async nextInitializedTickWithinOneWord(\n    _tick: number,\n    _lte: boolean,\n    _tickSpacing: number\n  ): Promise<[number, boolean]> {\n    throw new Error(NoTickDataProvider.ERROR_MESSAGE);\n  }\n}\n","import { Address } from '@ton/core';\n\nexport const ADDRESS_ZERO =\n  '0:0000000000000000000000000000000000000000000000000000000000000000';\n\nexport const BLACK_HOLE_ADDRESS = Address.parse(ADDRESS_ZERO);\n\nexport const FEE_DENOMINATOR: number = 10000;\n\nexport const IMPOSSIBLE_FEE: number = FEE_DENOMINATOR + 1;\n\nexport const INITIAL_POOL_FEE = 100;\n\nexport const DEFAULT_TICK_SPACING = 60;\n","import JSBI from 'jsbi';\n\n// constants used internally but not expected to be used externally\nexport const NEGATIVE_ONE = JSBI.BigInt(-1);\nexport const ZERO = JSBI.BigInt(0);\nexport const ONE = JSBI.BigInt(1);\n\n// used in liquidity amount math\nexport const Q96 = JSBI.exponentiate(JSBI.BigInt(2), JSBI.BigInt(96));\nexport const Q192 = JSBI.exponentiate(Q96, JSBI.BigInt(2));\n\nexport const MaxUint256 = JSBI.BigInt(\n  '0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff'\n);\n","export const ROUTER = 'EQC_-t0nCnOFMdp7E7qPxAOCbCWGFz-e3pwxb6tTvFmshjt5';\nexport const POOL_FACTORY = 'EQDiNOe3qNffbCsEeX-6KYWT26TT1xL7D-dqx47-qqEkp4e9';\nexport const pTON_MINTER = 'EQCUnExmdgwAKADi-j2KPKThyQqTc7U650cgM0g78UzZXn9J';\nexport const pTON_ROUTER_WALLET =\n  'EQCHHakhWxSQIWbw6ioW21YnjVKBCDd_gVjF9Mz9_dIuFy23';\n","import { Cell } from '@ton/core';\n\nconst INIT_CODE_BASE64 = {\n  router:\n    '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',\n  pool:\n    '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',\n  account:\n    'te6cckECDQEAAloAART/APSkE/S88sgLAQIBYgIMAgLNAwsCtddtF2/ZkQ44BJL4HwaGmB9qJofSAA/DD9IAD8MWoYaH0AAPwx/QAA/DJ9AAD8Mv0AGHwzALjYSS+B8H0gGADpj+mf/CEpIGOCyJhxhvwgieOCyS+B8YbCB/l4QEBwLuIoIQPr5UMbqPa2wy+gD6APoA+gDTf9IX0hcw+ENQB6D4Y/hEUAWg+GQC+GX4ZiDCAPhD+EW+sPhE+Ea+sI6yghCBcC74yMsfFMs/+EP6AvhE+gL4Qc8WE8t/EsoXyhfJ+EIB2zxw+GNw+GRw+GVw+GaSXwTi4DAFBgAscYAYyMsFUAPPFnD6AhLLaszJgwb7AABCyPhD+gL4RPoC+EX6AvhG+gLJyPhBzxb4Qs8WzMntVNsxAl4gghBCoPtDuo6YWyCCCJiWgLzy4FOCCJiWgKH4QXDbPNsx4GwSghAL8/RHuuMCMAgJAChwgBjIywVQA88WUAP6AstqyQH7AAHc+EPCAPhEwgCx8uBQgg/ydhiCCA2J6HCCEIFwLvjIyx8Uyz/4Q/oC+ET6AvhBzxYTy38SyhfKF3D4QgLJEoBA2zxw+GNw+GRw+GVw+GbI+EP6AvhE+gL4RfoC+Eb6AsnI+EHPFvhCzxbMye1U2zEKACxxgBjIywVQBM8WUAT6AhLLaszJAfsAAEnThAEUcOgOmDgNUDiVk8T5BBh1hLVQBAiBDZSVUAcXJCB9hyGMAGWgonPaiaH0gAPww/SAA/DFqGGh9AAD8Mf0AAPwyfQAA/DL9ABh8M3wg/CF8IfwifCL8I0lL38n',\n  positionnft:\n    'te6cckECFwEAA3gAART/APSkE/S88sgLAQIBYgIQAgLLAw8CASAEDgIBIAUNAvXRkQ44BJL4HwaGmBgLjYSS+B8H0gfSAY/QAYuOuQ/QAY/QAYOdTaAHgHgWmP6Z+RQQhq9mUVXUcXGi2ZfCEsY4L5cMr9IAD8Mem/gPwy6QuA/DNpC4D8M+oYaGn/gPw0af+YfDT4CHARQQgv5h6KXXGBGhpBCCNlGa1dQGCQLYMvhDE8cF8uGR+kD6QNIAMfoAcCSBAU0B+kQwWLry9CDXScIA8uLEBoIK+vCAoYIImJaAoSGUUxWgod4i1wsBwwAgkgahkTbiIML/8uGSIZI2MOMN+EKCCJiWgIIQ9Ydg7/hByCbPFss/UmBwBwgAeoIQBRONkcj4Q88WUAjPFnElBEkTVEegcIAQyMsFUAfPFlAF+gIVy2oSyx/LPyJus5RYzxcBkTLiAckB+wAA3nCAEMjLBVAHzxZQBfoCFctqEssfyz8ibrOUWM8XAZEy4gHJAfsAA44+cCOBAU0B+kQwWLry9BOCENUydttQBG1xcIAQyMsFUAfPFlAF+gIVy2oSyx/LPyJus5RYzxcBkTLiAckB+wCSbDHi+GPwEAEQ4wJfA4QP8vAKAf4B+kDTf9IX0hfUMNDT/9P/MPhCF8cF8uBS+EMVxwXy4ZH4RhK68uGZ+Ee68uGZ+EXAAPLRmPhFAbYIIcjL/1Iwy//J+En4SMjL/8v/yfhH+Eb4RfhBghDXOsCdyMsfGss/+EPPFhnLPxjLfxfKFxbKF1Igy38VzBTMyfhFUAShCwEy+GX4aPhpgED4RcAAkzCDBt5w+EJa2zzwEAwALHGAGMjLBVAEzxZQBPoCEstqzMkB+wAASdOEARRw6A6YOA1QOJWTxPkEGHWEtVAECIENlJVQBxckIH2HIYwAZf9qJoaZ+A/DD9IAD8MX0gAPwx6gD8Mmm/gPwy6QuA/DNpC4D8M+oYaGn/gPw0af+YfDTABV0+En4SMjL/8v/yfhH+Eb4RfhE+EHIyz/4Qs8W+EPPFszLf8oXyhfMye1UgIBIBEUAgEgEhMAHbijjwD/hF+Eb4R/hI+EmAANueGfAP+EOAIBIBUWAHO4/P8A/4RNDTBzH0BDD4SfhI+Ef4RvhFcMjLBxb0ABXLfxTKFxPKFxLL/8v/yfhFwwD4QfhC+ENVA4AA26jC8A/4Qo1aJhlg==',\n};\n\nexport const ROUTERV3_CODE = Cell.fromBase64(INIT_CODE_BASE64.router);\nexport const ACCOUNTV3_CODE = Cell.fromBase64(INIT_CODE_BASE64.account);\nexport const POSITIONV3_CODE = Cell.fromBase64(INIT_CODE_BASE64.positionnft);\nexport const POOLV3_CODE = Cell.fromBase64(INIT_CODE_BASE64.pool);\n","import JSBI from 'jsbi';\nimport invariant from 'tiny-invariant';\nimport { MaxUint256, ZERO } from '../constants/internalConstants';\n\nconst TWO = JSBI.BigInt(2);\nconst POWERS_OF_2 = [128, 64, 32, 16, 8, 4, 2, 1].map(\n  (pow: number): [number, JSBI] => [\n    pow,\n    JSBI.exponentiate(TWO, JSBI.BigInt(pow)),\n  ]\n);\n\nexport function mostSignificantBit(x: JSBI): number {\n  invariant(JSBI.greaterThan(x, ZERO), 'ZERO');\n  invariant(JSBI.lessThanOrEqual(x, MaxUint256), 'MAX');\n\n  let msb = 0;\n  for (const [power, min] of POWERS_OF_2) {\n    if (JSBI.greaterThanOrEqual(x, min)) {\n      x = JSBI.signedRightShift(x, JSBI.BigInt(power));\n      msb += power;\n    }\n  }\n  return msb;\n}\n","import JSBI from 'jsbi';\nimport invariant from 'tiny-invariant';\nimport { MaxUint256, ONE, ZERO } from '../constants';\nimport { mostSignificantBit } from './mostSignificantBit';\n\nfunction mulShift(val: JSBI, mulBy: string): JSBI {\n  return JSBI.signedRightShift(\n    JSBI.multiply(val, JSBI.BigInt(mulBy)),\n    JSBI.BigInt(128)\n  );\n}\n\nconst Q32 = JSBI.exponentiate(JSBI.BigInt(2), JSBI.BigInt(32));\n\nexport abstract class TickMath {\n  /**\n   * Cannot be constructed.\n   */\n\n  /**\n   * The minimum tick that can be used on any pool.\n   */\n  public static MIN_TICK = -887272;\n\n  /**\n   * The maximum tick that can be used on any pool.\n   */\n  public static MAX_TICK: number = -TickMath.MIN_TICK;\n\n  /**\n   * The sqrt ratio corresponding to the minimum tick that could be used on any pool.\n   */\n  public static MIN_SQRT_RATIO: JSBI = JSBI.BigInt('4295128739');\n\n  /**\n   * The sqrt ratio corresponding to the maximum tick that could be used on any pool.\n   */\n  public static MAX_SQRT_RATIO: JSBI = JSBI.BigInt(\n    '1461446703485210103287273052203988822378723970342'\n  );\n\n  /**\n   * Returns the sqrt ratio as a Q64.96 for the given tick. The sqrt ratio is computed as sqrt(1.0001)^tick\n   * @param tick the tick for which to compute the sqrt ratio\n   */\n  public static getSqrtRatioAtTick(tick: number): JSBI {\n    invariant(\n      tick >= TickMath.MIN_TICK &&\n        tick <= TickMath.MAX_TICK &&\n        Number.isInteger(tick),\n      'TICK'\n    );\n    const absTick: number = tick < 0 ? tick * -1 : tick;\n\n    let ratio: JSBI =\n      (absTick & 0x1) != 0\n        ? JSBI.BigInt('0xfffcb933bd6fad37aa2d162d1a594001')\n        : JSBI.BigInt('0x100000000000000000000000000000000');\n    if ((absTick & 0x2) != 0)\n      ratio = mulShift(ratio, '0xfff97272373d413259a46990580e213a');\n    if ((absTick & 0x4) != 0)\n      ratio = mulShift(ratio, '0xfff2e50f5f656932ef12357cf3c7fdcc');\n    if ((absTick & 0x8) != 0)\n      ratio = mulShift(ratio, '0xffe5caca7e10e4e61c3624eaa0941cd0');\n    if ((absTick & 0x10) != 0)\n      ratio = mulShift(ratio, '0xffcb9843d60f6159c9db58835c926644');\n    if ((absTick & 0x20) != 0)\n      ratio = mulShift(ratio, '0xff973b41fa98c081472e6896dfb254c0');\n    if ((absTick & 0x40) != 0)\n      ratio = mulShift(ratio, '0xff2ea16466c96a3843ec78b326b52861');\n    if ((absTick & 0x80) != 0)\n      ratio = mulShift(ratio, '0xfe5dee046a99a2a811c461f1969c3053');\n    if ((absTick & 0x100) != 0)\n      ratio = mulShift(ratio, '0xfcbe86c7900a88aedcffc83b479aa3a4');\n    if ((absTick & 0x200) != 0)\n      ratio = mulShift(ratio, '0xf987a7253ac413176f2b074cf7815e54');\n    if ((absTick & 0x400) != 0)\n      ratio = mulShift(ratio, '0xf3392b0822b70005940c7a398e4b70f3');\n    if ((absTick & 0x800) != 0)\n      ratio = mulShift(ratio, '0xe7159475a2c29b7443b29c7fa6e889d9');\n    if ((absTick & 0x1000) != 0)\n      ratio = mulShift(ratio, '0xd097f3bdfd2022b8845ad8f792aa5825');\n    if ((absTick & 0x2000) != 0)\n      ratio = mulShift(ratio, '0xa9f746462d870fdf8a65dc1f90e061e5');\n    if ((absTick & 0x4000) != 0)\n      ratio = mulShift(ratio, '0x70d869a156d2a1b890bb3df62baf32f7');\n    if ((absTick & 0x8000) != 0)\n      ratio = mulShift(ratio, '0x31be135f97d08fd981231505542fcfa6');\n    if ((absTick & 0x10000) != 0)\n      ratio = mulShift(ratio, '0x9aa508b5b7a84e1c677de54f3e99bc9');\n    if ((absTick & 0x20000) != 0)\n      ratio = mulShift(ratio, '0x5d6af8dedb81196699c329225ee604');\n    if ((absTick & 0x40000) != 0)\n      ratio = mulShift(ratio, '0x2216e584f5fa1ea926041bedfe98');\n    if ((absTick & 0x80000) != 0)\n      ratio = mulShift(ratio, '0x48a170391f7dc42444e8fa2');\n\n    if (tick > 0) ratio = JSBI.divide(MaxUint256, ratio);\n\n    // back to Q96\n    return JSBI.greaterThan(JSBI.remainder(ratio, Q32), ZERO)\n      ? JSBI.add(JSBI.divide(ratio, Q32), ONE)\n      : JSBI.divide(ratio, Q32);\n  }\n\n  /**\n   * Returns the tick corresponding to a given sqrt ratio, s.t. #getSqrtRatioAtTick(tick) <= sqrtRatioX96\n   * and #getSqrtRatioAtTick(tick + 1) > sqrtRatioX96\n   * @param sqrtRatioX96 the sqrt ratio as a Q64.96 for which to compute the tick\n   */\n  public static getTickAtSqrtRatio(sqrtRatioX96: JSBI): number {\n    invariant(\n      JSBI.greaterThanOrEqual(sqrtRatioX96, TickMath.MIN_SQRT_RATIO) &&\n        JSBI.lessThan(sqrtRatioX96, TickMath.MAX_SQRT_RATIO),\n      'SQRT_RATIO'\n    );\n\n    const sqrtRatioX128 = JSBI.leftShift(sqrtRatioX96, JSBI.BigInt(32));\n\n    const msb = mostSignificantBit(sqrtRatioX128);\n\n    let r: JSBI;\n    if (JSBI.greaterThanOrEqual(JSBI.BigInt(msb), JSBI.BigInt(128))) {\n      r = JSBI.signedRightShift(sqrtRatioX128, JSBI.BigInt(msb - 127));\n    } else {\n      r = JSBI.leftShift(sqrtRatioX128, JSBI.BigInt(127 - msb));\n    }\n\n    let log_2: JSBI = JSBI.leftShift(\n      JSBI.subtract(JSBI.BigInt(msb), JSBI.BigInt(128)),\n      JSBI.BigInt(64)\n    );\n\n    for (let i = 0; i < 14; i++) {\n      r = JSBI.signedRightShift(JSBI.multiply(r, r), JSBI.BigInt(127));\n      const f = JSBI.signedRightShift(r, JSBI.BigInt(128));\n      log_2 = JSBI.bitwiseOr(log_2, JSBI.leftShift(f, JSBI.BigInt(63 - i)));\n      r = JSBI.signedRightShift(r, f);\n    }\n\n    const log_sqrt10001 = JSBI.multiply(\n      log_2,\n      JSBI.BigInt('255738958999603826347141')\n    );\n\n    const tickLow = JSBI.toNumber(\n      JSBI.signedRightShift(\n        JSBI.subtract(\n          log_sqrt10001,\n          JSBI.BigInt('3402992956809132418596140100660247210')\n        ),\n        JSBI.BigInt(128)\n      )\n    );\n    const tickHigh = JSBI.toNumber(\n      JSBI.signedRightShift(\n        JSBI.add(\n          log_sqrt10001,\n          JSBI.BigInt('291339464771989622907027621153398088495')\n        ),\n        JSBI.BigInt(128)\n      )\n    );\n\n    return tickLow === tickHigh\n      ? tickLow\n      : JSBI.lessThanOrEqual(\n            TickMath.getSqrtRatioAtTick(tickHigh),\n            sqrtRatioX96\n          )\n        ? tickHigh\n        : tickLow;\n  }\n}\n","/**\n * Determines if a tick list is sorted\n * @param list The tick list\n * @param comparator The comparator\n * @returns true if sorted\n */\nexport function isSorted<T>(\n  list: Array<T>,\n  comparator: (a: T, b: T) => number\n): boolean {\n  for (let i = 0; i < list.length - 1; i++) {\n    if (comparator(list[i], list[i + 1]) > 0) {\n      return false;\n    }\n  }\n  return true;\n}\n","import JSBI from 'jsbi';\nimport invariant from 'tiny-invariant';\nimport { ZERO } from '../constants/internalConstants';\nimport { Tick } from '../entities/tick';\nimport { isSorted } from './isSorted';\n\nfunction tickComparator(a: Tick, b: Tick) {\n  return a.index - b.index;\n}\n\n/**\n * Utility methods for interacting with sorted lists of ticks\n */\nexport abstract class TickList {\n  /**\n   * Cannot be constructed\n   */\n\n  public static validateList(ticks: Tick[], tickSpacing: number) {\n    invariant(tickSpacing > 0, 'TICK_SPACING_NONZERO');\n    // ensure ticks are spaced appropriately\n    invariant(\n      ticks.every(({ index }) => index % tickSpacing === 0),\n      'TICK_SPACING'\n    );\n\n    // ensure tick liquidity deltas sum to 0\n    invariant(\n      JSBI.equal(\n        ticks.reduce(\n          (accumulator, { liquidityNet }) =>\n            JSBI.add(accumulator, liquidityNet),\n          ZERO\n        ),\n        ZERO\n      ),\n      'ZERO_NET'\n    );\n\n    invariant(isSorted(ticks, tickComparator), 'SORTED');\n  }\n\n  public static isBelowSmallest(ticks: readonly Tick[], tick: number): boolean {\n    invariant(ticks.length > 0, 'LENGTH');\n    return tick < ticks[0].index;\n  }\n\n  public static isAtOrAboveLargest(\n    ticks: readonly Tick[],\n    tick: number\n  ): boolean {\n    invariant(ticks.length > 0, 'LENGTH');\n    return tick >= ticks[ticks.length - 1].index;\n  }\n\n  public static getTick(ticks: readonly Tick[], index: number): Tick {\n    const tick = ticks[this.binarySearch(ticks, index)];\n    invariant(tick.index === index, 'NOT_CONTAINED');\n    return tick;\n  }\n\n  public static nextInitializedTick(\n    ticks: readonly Tick[],\n    tick: number,\n    lte: boolean\n  ): Tick {\n    if (lte) {\n      invariant(!TickList.isBelowSmallest(ticks, tick), 'BELOW_SMALLEST');\n      if (TickList.isAtOrAboveLargest(ticks, tick)) {\n        return ticks[ticks.length - 1];\n      }\n      const index = this.binarySearch(ticks, tick);\n      return ticks[index];\n    }\n    invariant(!this.isAtOrAboveLargest(ticks, tick), 'AT_OR_ABOVE_LARGEST');\n    if (this.isBelowSmallest(ticks, tick)) {\n      return ticks[0];\n    }\n    const index = this.binarySearch(ticks, tick);\n    return ticks[index + 1];\n  }\n\n  public static nextInitializedTickWithinOneWord(\n    ticks: readonly Tick[],\n    tick: number,\n    lte: boolean,\n    tickSpacing: number\n  ): [number, boolean] {\n    const compressed = Math.floor(tick / tickSpacing); // matches rounding in the code\n\n    if (lte) {\n      const wordPos = compressed >> 8;\n      const minimum = (wordPos << 8) * tickSpacing;\n\n      if (TickList.isBelowSmallest(ticks, tick)) {\n        return [minimum, false];\n      }\n\n      const index = TickList.nextInitializedTick(ticks, tick, lte).index;\n      const nextInitializedTick = Math.max(minimum, index);\n      return [nextInitializedTick, nextInitializedTick === index];\n    }\n    const wordPos = (compressed + 1) >> 8;\n    const maximum = ((wordPos + 1) << 8) * tickSpacing - 1;\n\n    if (this.isAtOrAboveLargest(ticks, tick)) {\n      return [maximum, false];\n    }\n\n    const index = this.nextInitializedTick(ticks, tick, lte).index;\n    const nextInitializedTick = Math.min(maximum, index);\n    return [nextInitializedTick, nextInitializedTick === index];\n  }\n\n  /**\n   * Finds the largest tick in the list of ticks that is less than or equal to tick\n   * @param ticks list of ticks\n   * @param tick tick to find the largest tick that is less than or equal to tick\n   * @private\n   */\n  private static binarySearch(ticks: readonly Tick[], tick: number): number {\n    invariant(!this.isBelowSmallest(ticks, tick), 'BELOW_SMALLEST');\n\n    let l = 0;\n    let r = ticks.length - 1;\n    let i;\n    while (true) {\n      i = Math.floor((l + r) / 2);\n\n      if (\n        ticks[i].index <= tick &&\n        (i === ticks.length - 1 || ticks[i + 1].index > tick)\n      ) {\n        return i;\n      }\n\n      if (ticks[i].index < tick) {\n        l = i + 1;\n      } else {\n        r = i - 1;\n      }\n    }\n  }\n}\n","export enum Rounding {\n  ROUND_DOWN,\n  ROUND_HALF_UP,\n  ROUND_UP,\n}\n","export enum Bound {\n  LOWER = 'LOWER',\n  UPPER = 'UPPER',\n}\n","export enum Field {\n  CURRENCY_A = 'CURRENCY_A',\n  CURRENCY_B = 'CURRENCY_B',\n}\n","export enum TradeType {\n  EXACT_INPUT,\n  EXACT_OUTPUT,\n}\n","import JSBI from 'jsbi';\nimport invariant from 'tiny-invariant';\nimport { BigintIsh } from '../types/BigIntish';\nimport { TickMath } from '../utils/tickMath';\n\nexport interface TickConstructorArgs {\n  index: number;\n  liquidityGross: BigintIsh;\n  liquidityNet: BigintIsh;\n}\n\nexport class Tick {\n  public readonly index: number;\n\n  public readonly liquidityGross: JSBI;\n\n  public readonly liquidityNet: JSBI;\n\n  constructor({ index, liquidityGross, liquidityNet }: TickConstructorArgs) {\n    invariant(index >= TickMath.MIN_TICK && index <= TickMath.MAX_TICK, 'TICK');\n    this.index = index;\n    this.liquidityGross = JSBI.BigInt(liquidityGross);\n    this.liquidityNet = JSBI.BigInt(liquidityNet);\n  }\n}\n","import { BigintIsh } from '../types/BigIntish';\nimport { TickList } from '../utils/tickList';\nimport { Tick, TickConstructorArgs } from './tick';\nimport { TickDataProvider } from './tickDataProvider';\n\n/**\n * A data provider for ticks that is backed by an in-memory array of ticks.\n */\nexport class TickListDataProvider implements TickDataProvider {\n  private ticks: readonly Tick[];\n\n  constructor(ticks: (Tick | TickConstructorArgs)[], tickSpacing: number) {\n    const ticksMapped: Tick[] = ticks.map((t) =>\n      t instanceof Tick ? t : new Tick(t)\n    );\n    TickList.validateList(ticksMapped, tickSpacing);\n    this.ticks = ticksMapped;\n  }\n\n  async getTick(\n    tick: number\n  ): Promise<{ liquidityNet: BigintIsh; liquidityGross: BigintIsh }> {\n    return TickList.getTick(this.ticks, tick);\n  }\n\n  async nextInitializedTickWithinOneWord(\n    tick: number,\n    lte: boolean,\n    tickSpacing: number\n  ): Promise<[number, boolean]> {\n    return TickList.nextInitializedTickWithinOneWord(\n      this.ticks,\n      tick,\n      lte,\n      tickSpacing\n    );\n  }\n}\n","// @ts-expect-error\nimport _Big from 'big.js';\n// @ts-expect-error\nimport toFormat from 'toformat';\nimport JSBI from 'jsbi';\nimport _Decimal from 'decimal.js-light';\nimport invariant from 'tiny-invariant';\nimport { BigintIsh } from '../types/BigIntish';\nimport { Rounding } from '../enums';\n\nconst Decimal = toFormat(_Decimal);\nconst Big = toFormat(_Big);\n\nconst toSignificantRounding = {\n  [Rounding.ROUND_DOWN]: Decimal.ROUND_DOWN,\n  [Rounding.ROUND_HALF_UP]: Decimal.ROUND_HALF_UP,\n  [Rounding.ROUND_UP]: Decimal.ROUND_UP,\n};\n\nconst toFixedRounding = {\n  [Rounding.ROUND_DOWN]: 0,\n  [Rounding.ROUND_HALF_UP]: 1,\n  [Rounding.ROUND_UP]: 3,\n};\n\nexport class Fraction {\n  public readonly numerator: JSBI;\n\n  public readonly denominator: JSBI;\n\n  public constructor(\n    numerator: BigintIsh,\n    denominator: BigintIsh = JSBI.BigInt(1)\n  ) {\n    this.numerator = JSBI.BigInt(numerator);\n    this.denominator = JSBI.BigInt(denominator);\n  }\n\n  private static tryParseFraction(fractionish: BigintIsh | Fraction): Fraction {\n    if (\n      fractionish instanceof JSBI ||\n      typeof fractionish === 'number' ||\n      typeof fractionish === 'string'\n    )\n      return new Fraction(fractionish);\n\n    if ('numerator' in fractionish && 'denominator' in fractionish)\n      return fractionish;\n    throw new Error('Could not parse fraction');\n  }\n\n  // performs floor division\n  public get quotient(): JSBI {\n    return JSBI.divide(this.numerator, this.denominator);\n  }\n\n  // remainder after floor division\n  public get remainder(): Fraction {\n    return new Fraction(\n      JSBI.remainder(this.numerator, this.denominator),\n      this.denominator\n    );\n  }\n\n  public invert(): Fraction {\n    return new Fraction(this.denominator, this.numerator);\n  }\n\n  public add(other: Fraction | BigintIsh): Fraction {\n    const otherParsed = Fraction.tryParseFraction(other);\n    if (JSBI.equal(this.denominator, otherParsed.denominator)) {\n      return new Fraction(\n        JSBI.add(this.numerator, otherParsed.numerator),\n        this.denominator\n      );\n    }\n    return new Fraction(\n      JSBI.add(\n        JSBI.multiply(this.numerator, otherParsed.denominator),\n        JSBI.multiply(otherParsed.numerator, this.denominator)\n      ),\n      JSBI.multiply(this.denominator, otherParsed.denominator)\n    );\n  }\n\n  public subtract(other: Fraction | BigintIsh): Fraction {\n    const otherParsed = Fraction.tryParseFraction(other);\n    if (JSBI.equal(this.denominator, otherParsed.denominator)) {\n      return new Fraction(\n        JSBI.subtract(this.numerator, otherParsed.numerator),\n        this.denominator\n      );\n    }\n    return new Fraction(\n      JSBI.subtract(\n        JSBI.multiply(this.numerator, otherParsed.denominator),\n        JSBI.multiply(otherParsed.numerator, this.denominator)\n      ),\n      JSBI.multiply(this.denominator, otherParsed.denominator)\n    );\n  }\n\n  public lessThan(other: Fraction | BigintIsh): boolean {\n    const otherParsed = Fraction.tryParseFraction(other);\n    return JSBI.lessThan(\n      JSBI.multiply(this.numerator, otherParsed.denominator),\n      JSBI.multiply(otherParsed.numerator, this.denominator)\n    );\n  }\n\n  public equalTo(other: Fraction | BigintIsh): boolean {\n    const otherParsed = Fraction.tryParseFraction(other);\n    return JSBI.equal(\n      JSBI.multiply(this.numerator, otherParsed.denominator),\n      JSBI.multiply(otherParsed.numerator, this.denominator)\n    );\n  }\n\n  public greaterThan(other: Fraction | BigintIsh): boolean {\n    const otherParsed = Fraction.tryParseFraction(other);\n    return JSBI.greaterThan(\n      JSBI.multiply(this.numerator, otherParsed.denominator),\n      JSBI.multiply(otherParsed.numerator, this.denominator)\n    );\n  }\n\n  public multiply(other: Fraction | BigintIsh): Fraction {\n    const otherParsed = Fraction.tryParseFraction(other);\n    return new Fraction(\n      JSBI.multiply(this.numerator, otherParsed.numerator),\n      JSBI.multiply(this.denominator, otherParsed.denominator)\n    );\n  }\n\n  public divide(other: Fraction | BigintIsh): Fraction {\n    const otherParsed = Fraction.tryParseFraction(other);\n    return new Fraction(\n      JSBI.multiply(this.numerator, otherParsed.denominator),\n      JSBI.multiply(this.denominator, otherParsed.numerator)\n    );\n  }\n\n  public toSignificant(\n    significantDigits: number,\n    format: object = { groupSeparator: '' },\n    rounding: Rounding = Rounding.ROUND_HALF_UP\n  ): string {\n    invariant(\n      Number.isInteger(significantDigits),\n      `${significantDigits} is not an integer.`\n    );\n    invariant(significantDigits > 0, `${significantDigits} is not positive.`);\n\n    Decimal.set({\n      precision: significantDigits + 1,\n      rounding: toSignificantRounding[rounding],\n    });\n    const quotient = new Decimal(this.numerator.toString())\n      .div(this.denominator.toString())\n      .toSignificantDigits(significantDigits);\n    return quotient.toFormat(quotient.decimalPlaces(), format);\n  }\n\n  public toFixed(\n    decimalPlaces: number,\n    format: object = { groupSeparator: '' },\n    rounding: Rounding = Rounding.ROUND_HALF_UP\n  ): string {\n    invariant(\n      Number.isInteger(decimalPlaces),\n      `${decimalPlaces} is not an integer.`\n    );\n    invariant(decimalPlaces >= 0, `${decimalPlaces} is negative.`);\n\n    Big.DP = decimalPlaces;\n    Big.RM = toFixedRounding[rounding];\n\n    return new Big(this.numerator.toString())\n      .div(this.denominator.toString())\n      .toFormat(decimalPlaces, format);\n  }\n\n  /**\n   * Helper method for converting any super class back to a fraction\n   */\n  public get asFraction(): Fraction {\n    return new Fraction(this.numerator, this.denominator);\n  }\n}\n","// @ts-expect-error\nimport _Big from 'big.js';\n// @ts-expect-error\nimport toFormat from 'toformat';\n\nimport JSBI from 'jsbi';\nimport invariant from 'tiny-invariant';\nimport { MaxUint256 } from '../constants/internalConstants';\nimport { Rounding } from '../enums/rounding';\nimport { Jetton } from './Jetton';\nimport { BigintIsh } from '../types/BigIntish';\nimport { Fraction } from './Fraction';\n\nconst Big = toFormat(_Big);\n\nexport class JettonAmount<T extends Jetton> extends Fraction {\n  public readonly jetton: T;\n\n  public readonly decimalScale: JSBI;\n\n  /**\n   * Returns a new currency amount instance from the unitless amount of token, i.e. the raw amount\n   * @param currency the currency in the amount\n   * @param rawAmount the raw token or ether amount\n   */\n  public static fromRawAmount<T extends Jetton>(\n    currency: T,\n    rawAmount: BigintIsh\n  ): JettonAmount<T> {\n    return new JettonAmount(currency, rawAmount);\n  }\n\n  /**\n   * Construct a currency amount with a denominator that is not equal to 1\n   * @param currency the currency\n   * @param numerator the numerator of the fractional token amount\n   * @param denominator the denominator of the fractional token amount\n   */\n  public static fromFractionalAmount<T extends Jetton>(\n    currency: T,\n    numerator: BigintIsh,\n    denominator: BigintIsh\n  ): JettonAmount<T> {\n    return new JettonAmount(currency, numerator, denominator);\n  }\n\n  protected constructor(\n    jetton: T,\n    numerator: BigintIsh,\n    denominator?: BigintIsh\n  ) {\n    super(numerator, denominator);\n    invariant(JSBI.lessThanOrEqual(this.quotient, MaxUint256), 'AMOUNT');\n    this.jetton = jetton;\n    this.decimalScale = JSBI.exponentiate(\n      JSBI.BigInt(10),\n      JSBI.BigInt(jetton.decimals)\n    );\n  }\n\n  public add(other: JettonAmount<T>): JettonAmount<T> {\n    invariant(this.jetton.equals(other.jetton), 'CURRENCY');\n    const added = super.add(other);\n    return JettonAmount.fromFractionalAmount(\n      this.jetton,\n      added.numerator,\n      added.denominator\n    );\n  }\n\n  public subtract(other: JettonAmount<T>): JettonAmount<T> {\n    invariant(this.jetton.equals(other.jetton), 'CURRENCY');\n    const subtracted = super.subtract(other);\n    return JettonAmount.fromFractionalAmount(\n      this.jetton,\n      subtracted.numerator,\n      subtracted.denominator\n    );\n  }\n\n  public multiply(other: Fraction | BigintIsh): JettonAmount<T> {\n    const multiplied = super.multiply(other);\n    return JettonAmount.fromFractionalAmount(\n      this.jetton,\n      multiplied.numerator,\n      multiplied.denominator\n    );\n  }\n\n  public divide(other: Fraction | BigintIsh): JettonAmount<T> {\n    const divided = super.divide(other);\n    return JettonAmount.fromFractionalAmount(\n      this.jetton,\n      divided.numerator,\n      divided.denominator\n    );\n  }\n\n  public toSignificant(\n    significantDigits: number = 6,\n    format?: object,\n    rounding: Rounding = Rounding.ROUND_DOWN\n  ): string {\n    return super\n      .divide(this.decimalScale)\n      .toSignificant(significantDigits, format, rounding);\n  }\n\n  public toFixed(\n    decimalPlaces: number = this.jetton.decimals,\n    format?: object,\n    rounding: Rounding = Rounding.ROUND_DOWN\n  ): string {\n    invariant(decimalPlaces <= this.jetton.decimals, 'DECIMALS');\n    return super\n      .divide(this.decimalScale)\n      .toFixed(decimalPlaces, format, rounding);\n  }\n\n  public toExact(format: object = { groupSeparator: '' }): string {\n    Big.DP = this.jetton.decimals;\n    return new Big(this.quotient.toString())\n      .div(this.decimalScale.toString())\n      .toFormat(format);\n  }\n\n  public get wrapped(): JettonAmount<Jetton> {\n    // if (this.jetton.isToken) return this as JettonAmount<Jetton>;\n    return JettonAmount.fromFractionalAmount(\n      this.jetton,\n      this.numerator,\n      this.denominator\n    );\n  }\n}\n","import JSBI from 'jsbi';\nimport { ONE, ZERO } from '../constants';\n\nexport abstract class FullMath {\n  /**\n   * Cannot be constructed.\n   */\n\n  public static mulDivRoundingUp(a: JSBI, b: JSBI, denominator: JSBI): JSBI {\n    const product = JSBI.multiply(a, b);\n    let result = JSBI.divide(product, denominator);\n    if (JSBI.notEqual(JSBI.remainder(product, denominator), ZERO))\n      result = JSBI.add(result, ONE);\n    return result;\n  }\n}\n","import JSBI from 'jsbi';\nimport invariant from 'tiny-invariant';\nimport { MaxUint256, ONE, Q96, ZERO } from '../constants/internalConstants';\nimport { FullMath } from './fullMath';\n\nconst MaxUint160 = JSBI.subtract(\n  JSBI.exponentiate(JSBI.BigInt(2), JSBI.BigInt(160)),\n  ONE\n);\n\nfunction multiplyIn256(x: JSBI, y: JSBI): JSBI {\n  const product = JSBI.multiply(x, y);\n  return JSBI.bitwiseAnd(product, MaxUint256);\n}\n\nfunction addIn256(x: JSBI, y: JSBI): JSBI {\n  const sum = JSBI.add(x, y);\n  return JSBI.bitwiseAnd(sum, MaxUint256);\n}\n\nexport abstract class SqrtPriceMath {\n  /**\n   * Cannot be constructed.\n   */\n\n  public static getAmount0Delta(\n    sqrtRatioAX96: JSBI,\n    sqrtRatioBX96: JSBI,\n    liquidity: JSBI,\n    roundUp: boolean\n  ): JSBI {\n    if (JSBI.greaterThan(sqrtRatioAX96, sqrtRatioBX96)) {\n      [sqrtRatioAX96, sqrtRatioBX96] = [sqrtRatioBX96, sqrtRatioAX96];\n    }\n\n    const numerator1 = JSBI.leftShift(liquidity, JSBI.BigInt(96));\n    const numerator2 = JSBI.subtract(sqrtRatioBX96, sqrtRatioAX96);\n\n    return roundUp\n      ? FullMath.mulDivRoundingUp(\n          FullMath.mulDivRoundingUp(numerator1, numerator2, sqrtRatioBX96),\n          ONE,\n          sqrtRatioAX96\n        )\n      : JSBI.divide(\n          JSBI.divide(JSBI.multiply(numerator1, numerator2), sqrtRatioBX96),\n          sqrtRatioAX96\n        );\n  }\n\n  public static getAmount1Delta(\n    sqrtRatioAX96: JSBI,\n    sqrtRatioBX96: JSBI,\n    liquidity: JSBI,\n    roundUp: boolean\n  ): JSBI {\n    if (JSBI.greaterThan(sqrtRatioAX96, sqrtRatioBX96)) {\n      [sqrtRatioAX96, sqrtRatioBX96] = [sqrtRatioBX96, sqrtRatioAX96];\n    }\n\n    return roundUp\n      ? FullMath.mulDivRoundingUp(\n          liquidity,\n          JSBI.subtract(sqrtRatioBX96, sqrtRatioAX96),\n          Q96\n        )\n      : JSBI.divide(\n          JSBI.multiply(liquidity, JSBI.subtract(sqrtRatioBX96, sqrtRatioAX96)),\n          Q96\n        );\n  }\n\n  public static getNextSqrtPriceFromInput(\n    sqrtPX96: JSBI,\n    liquidity: JSBI,\n    amountIn: JSBI,\n    zeroForOne: boolean\n  ): JSBI {\n    invariant(JSBI.greaterThan(sqrtPX96, ZERO));\n    invariant(JSBI.greaterThan(liquidity, ZERO));\n\n    return zeroForOne\n      ? this.getNextSqrtPriceFromAmount0RoundingUp(\n          sqrtPX96,\n          liquidity,\n          amountIn,\n          true\n        )\n      : this.getNextSqrtPriceFromAmount1RoundingDown(\n          sqrtPX96,\n          liquidity,\n          amountIn,\n          true\n        );\n  }\n\n  public static getNextSqrtPriceFromOutput(\n    sqrtPX96: JSBI,\n    liquidity: JSBI,\n    amountOut: JSBI,\n    zeroForOne: boolean\n  ): JSBI {\n    invariant(JSBI.greaterThan(sqrtPX96, ZERO));\n    invariant(JSBI.greaterThan(liquidity, ZERO));\n\n    return zeroForOne\n      ? this.getNextSqrtPriceFromAmount1RoundingDown(\n          sqrtPX96,\n          liquidity,\n          amountOut,\n          false\n        )\n      : this.getNextSqrtPriceFromAmount0RoundingUp(\n          sqrtPX96,\n          liquidity,\n          amountOut,\n          false\n        );\n  }\n\n  private static getNextSqrtPriceFromAmount0RoundingUp(\n    sqrtPX96: JSBI,\n    liquidity: JSBI,\n    amount: JSBI,\n    add: boolean\n  ): JSBI {\n    if (JSBI.equal(amount, ZERO)) return sqrtPX96;\n    const numerator1 = JSBI.leftShift(liquidity, JSBI.BigInt(96));\n\n    if (add) {\n      const product = multiplyIn256(amount, sqrtPX96);\n      if (JSBI.equal(JSBI.divide(product, amount), sqrtPX96)) {\n        const denominator = addIn256(numerator1, product);\n        if (JSBI.greaterThanOrEqual(denominator, numerator1)) {\n          return FullMath.mulDivRoundingUp(numerator1, sqrtPX96, denominator);\n        }\n      }\n\n      return FullMath.mulDivRoundingUp(\n        numerator1,\n        ONE,\n        JSBI.add(JSBI.divide(numerator1, sqrtPX96), amount)\n      );\n    }\n    const product = multiplyIn256(amount, sqrtPX96);\n\n    invariant(JSBI.equal(JSBI.divide(product, amount), sqrtPX96));\n    invariant(JSBI.greaterThan(numerator1, product));\n    const denominator = JSBI.subtract(numerator1, product);\n    return FullMath.mulDivRoundingUp(numerator1, sqrtPX96, denominator);\n  }\n\n  private static getNextSqrtPriceFromAmount1RoundingDown(\n    sqrtPX96: JSBI,\n    liquidity: JSBI,\n    amount: JSBI,\n    add: boolean\n  ): JSBI {\n    if (add) {\n      const quotient = JSBI.lessThanOrEqual(amount, MaxUint160)\n        ? JSBI.divide(JSBI.leftShift(amount, JSBI.BigInt(96)), liquidity)\n        : JSBI.divide(JSBI.multiply(amount, Q96), liquidity);\n\n      return JSBI.add(sqrtPX96, quotient);\n    }\n    const quotient = FullMath.mulDivRoundingUp(amount, Q96, liquidity);\n\n    invariant(JSBI.greaterThan(sqrtPX96, quotient));\n    return JSBI.subtract(sqrtPX96, quotient);\n  }\n}\n","import JSBI from 'jsbi';\nimport { NEGATIVE_ONE, ZERO } from '../constants/internalConstants';\nimport { SqrtPriceMath } from './sqrtPriceMath';\nimport { FullMath } from './fullMath';\n\nconst MAX_FEE = JSBI.exponentiate(JSBI.BigInt(10), JSBI.BigInt(6));\n\nexport abstract class SwapMath {\n  /**\n   * Cannot be constructed.\n   */\n\n  public static computeSwapStep(\n    sqrtRatioCurrentX96: JSBI,\n    sqrtRatioTargetX96: JSBI,\n    liquidity: JSBI,\n    amountRemaining: JSBI,\n    feePips: number\n  ): [JSBI, JSBI, JSBI, JSBI] {\n    const returnValues: Partial<{\n      sqrtRatioNextX96: JSBI;\n      amountIn: JSBI;\n      amountOut: JSBI;\n      feeAmount: JSBI;\n    }> = {};\n\n    const zeroForOne = JSBI.greaterThanOrEqual(\n      sqrtRatioCurrentX96,\n      sqrtRatioTargetX96\n    );\n    const exactIn = JSBI.greaterThanOrEqual(amountRemaining, ZERO);\n\n    if (exactIn) {\n      const amountRemainingLessFee = JSBI.divide(\n        JSBI.multiply(\n          amountRemaining,\n          JSBI.subtract(MAX_FEE, JSBI.BigInt(feePips))\n        ),\n        MAX_FEE\n      );\n      returnValues.amountIn = zeroForOne\n        ? SqrtPriceMath.getAmount0Delta(\n            sqrtRatioTargetX96,\n            sqrtRatioCurrentX96,\n            liquidity,\n            true\n          )\n        : SqrtPriceMath.getAmount1Delta(\n            sqrtRatioCurrentX96,\n            sqrtRatioTargetX96,\n            liquidity,\n            true\n          );\n      if (\n        JSBI.greaterThanOrEqual(amountRemainingLessFee, returnValues.amountIn!)\n      ) {\n        returnValues.sqrtRatioNextX96 = sqrtRatioTargetX96;\n      } else {\n        returnValues.sqrtRatioNextX96 = SqrtPriceMath.getNextSqrtPriceFromInput(\n          sqrtRatioCurrentX96,\n          liquidity,\n          amountRemainingLessFee,\n          zeroForOne\n        );\n      }\n    } else {\n      returnValues.amountOut = zeroForOne\n        ? SqrtPriceMath.getAmount1Delta(\n            sqrtRatioTargetX96,\n            sqrtRatioCurrentX96,\n            liquidity,\n            false\n          )\n        : SqrtPriceMath.getAmount0Delta(\n            sqrtRatioCurrentX96,\n            sqrtRatioTargetX96,\n            liquidity,\n            false\n          );\n      if (\n        JSBI.greaterThanOrEqual(\n          JSBI.multiply(amountRemaining, NEGATIVE_ONE),\n          returnValues.amountOut\n        )\n      ) {\n        returnValues.sqrtRatioNextX96 = sqrtRatioTargetX96;\n      } else {\n        returnValues.sqrtRatioNextX96 =\n          SqrtPriceMath.getNextSqrtPriceFromOutput(\n            sqrtRatioCurrentX96,\n            liquidity,\n            JSBI.multiply(amountRemaining, NEGATIVE_ONE),\n            zeroForOne\n          );\n      }\n    }\n\n    const max = JSBI.equal(sqrtRatioTargetX96, returnValues.sqrtRatioNextX96);\n\n    if (zeroForOne) {\n      returnValues.amountIn =\n        max && exactIn\n          ? returnValues.amountIn\n          : SqrtPriceMath.getAmount0Delta(\n              returnValues.sqrtRatioNextX96,\n              sqrtRatioCurrentX96,\n              liquidity,\n              true\n            );\n      returnValues.amountOut =\n        max && !exactIn\n          ? returnValues.amountOut\n          : SqrtPriceMath.getAmount1Delta(\n              returnValues.sqrtRatioNextX96,\n              sqrtRatioCurrentX96,\n              liquidity,\n              false\n            );\n    } else {\n      returnValues.amountIn =\n        max && exactIn\n          ? returnValues.amountIn\n          : SqrtPriceMath.getAmount1Delta(\n              sqrtRatioCurrentX96,\n              returnValues.sqrtRatioNextX96,\n              liquidity,\n              true\n            );\n      returnValues.amountOut =\n        max && !exactIn\n          ? returnValues.amountOut\n          : SqrtPriceMath.getAmount0Delta(\n              sqrtRatioCurrentX96,\n              returnValues.sqrtRatioNextX96,\n              liquidity,\n              false\n            );\n    }\n\n    if (\n      !exactIn &&\n      JSBI.greaterThan(\n        returnValues.amountOut!,\n        JSBI.multiply(amountRemaining, NEGATIVE_ONE)\n      )\n    ) {\n      returnValues.amountOut = JSBI.multiply(amountRemaining, NEGATIVE_ONE);\n    }\n\n    if (\n      exactIn &&\n      JSBI.notEqual(returnValues.sqrtRatioNextX96, sqrtRatioTargetX96)\n    ) {\n      // we didn't reach the target, so take the remainder of the maximum input as fee\n      returnValues.feeAmount = JSBI.subtract(\n        amountRemaining,\n        returnValues.amountIn!\n      );\n    } else {\n      returnValues.feeAmount = FullMath.mulDivRoundingUp(\n        returnValues.amountIn!,\n        JSBI.BigInt(feePips),\n        JSBI.subtract(MAX_FEE, JSBI.BigInt(feePips))\n      );\n    }\n\n    return [\n      returnValues.sqrtRatioNextX96!,\n      returnValues.amountIn!,\n      returnValues.amountOut!,\n      returnValues.feeAmount!,\n    ];\n  }\n}\n","import JSBI from 'jsbi';\nimport { NEGATIVE_ONE, ZERO } from '../constants/internalConstants';\n\nexport abstract class LiquidityMath {\n  /**\n   * Cannot be constructed.\n   */\n\n  public static addDelta(x: JSBI, y: JSBI): JSBI {\n    if (JSBI.lessThan(y, ZERO)) {\n      return JSBI.subtract(x, JSBI.multiply(y, NEGATIVE_ONE));\n    }\n    return JSBI.add(x, y);\n  }\n}\n","import JSBI from 'jsbi';\nimport invariant from 'tiny-invariant';\nimport { BigintIsh } from '../types/BigIntish';\nimport { Fraction } from './Fraction';\nimport { Rounding } from '../enums/rounding';\nimport { Jetton } from './Jetton';\nimport { JettonAmount } from './JettonAmount';\n\nexport class Price<\n  TBase extends Jetton,\n  TQuote extends Jetton,\n> extends Fraction {\n  public readonly baseCurrency: TBase; // input i.e. denominator\n\n  public readonly quoteCurrency: TQuote; // output i.e. numerator\n\n  public readonly scalar: Fraction; // used to adjust the raw fraction w/r/t the decimals of the {base,quote}Token\n\n  /**\n   * Construct a price, either with the base and quote currency amount, or the\n   * @param args\n   */\n  public constructor(\n    ...args:\n      | [TBase, TQuote, BigintIsh, BigintIsh]\n      | [\n          {\n            baseAmount: JettonAmount<TBase>;\n            quoteAmount: JettonAmount<TQuote>;\n          },\n        ]\n  ) {\n    let baseCurrency: TBase;\n    let quoteCurrency: TQuote;\n    let denominator: BigintIsh;\n    let numerator: BigintIsh;\n\n    if (args.length === 4) {\n      [baseCurrency, quoteCurrency, denominator, numerator] = args;\n    } else {\n      const result = args[0].quoteAmount.divide(args[0].baseAmount);\n      [baseCurrency, quoteCurrency, denominator, numerator] = [\n        args[0].baseAmount.jetton,\n        args[0].quoteAmount.jetton,\n        result.denominator,\n        result.numerator,\n      ];\n    }\n    super(numerator, denominator);\n\n    this.baseCurrency = baseCurrency;\n    this.quoteCurrency = quoteCurrency;\n    this.scalar = new Fraction(\n      JSBI.exponentiate(JSBI.BigInt(10), JSBI.BigInt(baseCurrency.decimals)),\n      JSBI.exponentiate(JSBI.BigInt(10), JSBI.BigInt(quoteCurrency.decimals))\n    );\n  }\n\n  /**\n   * Flip the price, switching the base and quote currency\n   */\n  public invert(): Price<TQuote, TBase> {\n    return new Price(\n      this.quoteCurrency,\n      this.baseCurrency,\n      this.numerator,\n      this.denominator\n    );\n  }\n\n  /**\n   * Multiply the price by another price, returning a new price. The other price must have the same base currency as this price's quote currency\n   * @param other the other price\n   */\n  public multiply<TOtherQuote extends Jetton>(\n    other: Price<TQuote, TOtherQuote>\n  ): Price<TBase, TOtherQuote> {\n    invariant(this.quoteCurrency.equals(other.baseCurrency), 'TOKEN');\n    const fraction = super.multiply(other);\n    return new Price(\n      this.baseCurrency,\n      other.quoteCurrency,\n      fraction.denominator,\n      fraction.numerator\n    );\n  }\n\n  /**\n   * Return the amount of quote currency corresponding to a given amount of the base currency\n   * @param currencyAmount the amount of base currency to quote against the price\n   */\n  public quote(currencyAmount: JettonAmount<TBase>): JettonAmount<TQuote> {\n    invariant(currencyAmount.jetton.equals(this.baseCurrency), 'TOKEN');\n    const result = super.multiply(currencyAmount);\n    return JettonAmount.fromFractionalAmount(\n      this.quoteCurrency,\n      result.numerator,\n      result.denominator\n    );\n  }\n\n  /**\n   * Get the value scaled by decimals for formatting\n   * @private\n   */\n  private get adjustedForDecimals(): Fraction {\n    return super.multiply(this.scalar);\n  }\n\n  public toSignificant(\n    significantDigits: number = 6,\n    format?: object,\n    rounding?: Rounding\n  ): string {\n    return this.adjustedForDecimals.toSignificant(\n      significantDigits,\n      format,\n      rounding\n    );\n  }\n\n  public toFixed(\n    decimalPlaces: number = 4,\n    format?: object,\n    rounding?: Rounding\n  ): string {\n    return this.adjustedForDecimals.toFixed(decimalPlaces, format, rounding);\n  }\n\n  /* new for TONCO */\n  public get asFraction(): Fraction {\n    return new Fraction(\n      this.adjustedForDecimals.numerator,\n      this.adjustedForDecimals.denominator\n    );\n  }\n}\n","/**\n *   This is a autogenerated file that is created by parsig op-code files\n *   To regenerate it use\n *\n *   ts-node scripts/scan_opcodes.ts\n **/\n\nexport class ContractOpcodes {\n  static ACCOUNTV3_RESET_GAS: number = 0x42a0fb43; // 1117846339\n  static ACCOUNTV3_ADD_LIQUIDITY: number = 0x3ebe5431; // 1052660785\n  static ACCOUNTV3_CB_ADD_LIQUIDITY: number = 0x56dfeb8a; // 1457515402\n  static ACCOUNTV3_GETTER_LP_ACCOUNT_DATA: number = 0x1d439ae0; // 490969824\n  static ACCOUNTV3_DIRECT_ADD_LIQUIDITY: number = 0x4cf82803; // 1291331587\n  static ACCOUNTV3_REFUND_ME: number = 0xbf3f447; // 200537159\n  static ACCOUNTV3_CB_REFUND_ME: number = 0x89446a42; // 2302962242\n  static JETTON_PROVIDE_WALLET_ADDRESS: number = 0x2c76b973; // 745978227\n  static JETTON_TAKE_WALLET_ADDRESS: number = 0xd1735400; // 3513996288\n  static JETTON_TRANSFER: number = 0xf8a7ea5; // 260734629\n  static JETTON_TRANSFER_NOTIFICATION: number = 0x7362d09c; // 1935855772\n  static JETTON_INTERNAL_TRANSFER: number = 0x178d4519; // 395134233\n  static JETTON_EXCESSES: number = 0xd53276db; // 3576854235\n  static JETTON_BURN: number = 0x595f07bc; // 1499400124\n  static JETTON_BURN_NOTIFICATION: number = 0x7bdd97de; // 2078119902\n  static JETTON_MINT: number = 0x15; // 21\n  static NFT_TRANSFER: number = 0x5fcc3d14; // 1607220500\n  static NFT_OWNERSHIP_ASSIGNED: number = 0x5138d91; // 85167505\n  static NFT_EXCESSES: number = 0xd53276db; // 3576854235\n  static NFT_GET_STATIC_DATA: number = 0x2fcb26a2; // 801842850\n  static NFT_REPORT_STATIC_DATA: number = 0x8b771735; // 2339837749\n  static NFT_GET_ROYALTY_PARAMS: number = 0x693d3950; // 1765620048\n  static NFT_REPORT_ROYALTY_PARAMS: number = 0xa8cb00ad; // 2831876269\n  static NFT_EDIT_CONTENT: number = 0x1a0b9d51; // 436968785\n  static NFT_TRANSFER_EDITORSHIP: number = 0x1c04412a; // 470040874\n  static NFT_EDITORSHIP_ASSIGNED: number = 0x511a4463; // 1360675939\n  static POOL_FACTORY_CHANGE_PARAMS: number = 0xaa0db3d7; // 2853024727\n  static POOL_FACTORY_CREATE_POOL: number = 0x9e9a8f7f; // 2660929407\n  static POOL_FACTORY_RESET_GAS: number = 0x42a0fb43; // 1117846339\n  static POOL_FACTORY_ORDER_INIT: number = 0x8b85de63; // 2340806243\n  static POOL_FACTORY_EXECUTE: number = 0xd4b33b0a; // 3568515850\n  static POOLV3_INIT: number = 0x441c39ed; // 1142700525\n  static POOLV3_LOCK: number = 0x5e74697; // 99042967\n  static POOLV3_UNLOCK: number = 0x3205adbd; // 839232957\n  static POOLV3_SET_FEE: number = 0x6bdcbeb8; // 1809628856\n  static POOLV3_SWAP: number = 0xa7fb58f8; // 2818267384\n  static POOLV3_FUND_ACCOUNT: number = 0x4468de77; // 1147723383\n  static POOLV3_MINT: number = 0x81702ef8; // 2171612920\n  static POOLV3_START_BURN: number = 0x530b5f2c; // 1393254188\n  static POOLV3_BURN: number = 0xd73ac09d; // 3610951837\n  static POOLV3_COLLECT_PROTOCOL: number = 0xd3f8a538; // 3556287800\n  static POOLV3_RESET_GAS: number = 0x42a0fb43; // 1117846339\n  static POOLV3_MINT_M: number = 0xdbb7bb55; // 3686251349\n  static POOLV3_BURN_M: number = 0xe639646c; // 3862520940\n  static POOLV3_SWAP_M: number = 0xdb913023; // 3683725347\n  static POOLV3_FILL_TICK_M: number = 0x80139ad6; // 2148768470\n  static POSITIONNFTV3_NFT_TRANSFER: number = 0x5fcc3d14; // 1607220500\n  static POSITIONNFTV3_OWNERSHIP_ASSIGNED: number = 0x5138d91; // 85167505\n  static POSITIONNFTV3_EXCESSES: number = 0xd53276db; // 3576854235\n  static POSITIONNFTV3_GET_STATIC_DATA: number = 0x2fcb26a2; // 801842850\n  static POSITIONNFTV3_REPORT_STATIC_DATA: number = 0x8b771735; // 2339837749\n  static POSITIONNFTV3_GET_ROYALTY_PARAMS: number = 0x693d3950; // 1765620048\n  static POSITIONNFTV3_REPORT_ROYALTY_PARAMS: number = 0xa8cb00ad; // 2831876269\n  static POSITIONNFTV3_POSITION_INIT: number = 0xd5ecca2a; // 3589065258\n  static POSITIONNFTV3_POSITION_BURN: number = 0x46ca335a; // 1187656538\n  static POSITIONNFTV3_FEE_COLLECTED: number = 0x5ee6039f; // 1592132511\n  static POSITIONNFTV3_OWNERSHIP_ASSIGNED_NOTIFY: number = 0xf58760ef; // 4119290095\n  static POSITIONNFTV3_EDIT_CONTENT: number = 0x1a0b9d51; // 436968785\n  static POSITIONNFTV3_TRANSFER_EDITORSHIP: number = 0x1c04412a; // 470040874\n  static POSITIONNFTV3_EDITORSHIP_ASSIGNED: number = 0x511a4463; // 1360675939\n  static ROUTERTV3_ADD_POOL: number = 0x5bcb5a84; // 1540053636\n  static ROUTERTV3_CHANGE_ADMIN: number = 0xb3bc094; // 188465300\n  static ROUTERV3_PAY_TO: number = 0xa1daa96d; // 2715461997\n  static ROUTERV3_CREATE_POOL: number = 0x2e3034ef; // 774911215\n  static ROUTERV3_RESET_GAS: number = 0x42a0fb43; // 1117846339\n  static ROUTERV3_CHANGE_ADMIN_START: number = 0xd4deb03b; // 3571363899\n  static ROUTERV3_CHANGE_ADMIN_COMMIT: number = 0x98bac405; // 2562376709\n  static ROUTERV3_CHANGE_PARAMS: number = 0x87ffe363; // 2281694051\n  static SINKV3_SET: number = 0xe61425dc; // 3860080092\n  static SINKV3_ADD: number = 0xfd1a73e7; // 4246369255\n  static SINKV3_TEST_GAS: number = 0x7337ed7; // 120815319\n  static SINKV3_DUMMY: number = 0xfffffeee; // 4294967022\n  static TONPROXY_MINTER_PROVIDE_WALLET_ADDRESS: number = 0x2c76b973; // 745978227\n  static TONPROXY_MINTER_TAKE_WALLET_ADDRESS: number = 0xd1735400; // 3513996288\n  static TONPROXY_MINTER_DEPLOY_WALLET: number = 0xcf5f4313; // 3479126803\n  static TONPROXY_MINTER_INTERNAL_DEPLOY: number = 0x6540cf85; // 1698746245\n  static TONPROXY_MINTER_TON_TRANSFER: number = 0x1f3835d; // 32736093\n  static TONPROXY_MINTER_RESET_GAS: number = 0x29d22935; // 701638965\n  static TONPROXY_MINTER_TON_REFUND: number = 0xae25d79e; // 2921715614\n}\n\nexport const OpcodesLookup: { [x: number]: string } = {\n  0x15: 'JETTON_MINT',\n  0x1f3835d: 'TONPROXY_MINTER_TON_TRANSFER',\n  0x5138d91: 'NFT_OWNERSHIP_ASSIGNED,POSITIONNFTV3_OWNERSHIP_ASSIGNED',\n  0x5e74697: 'POOLV3_LOCK',\n  0x7337ed7: 'SINKV3_TEST_GAS',\n  0xb3bc094: 'ROUTERTV3_CHANGE_ADMIN',\n  0xbf3f447: 'ACCOUNTV3_REFUND_ME',\n  0xf8a7ea5: 'JETTON_TRANSFER',\n  0x178d4519: 'JETTON_INTERNAL_TRANSFER',\n  0x1a0b9d51: 'NFT_EDIT_CONTENT,POSITIONNFTV3_EDIT_CONTENT',\n  0x1c04412a: 'NFT_TRANSFER_EDITORSHIP,POSITIONNFTV3_TRANSFER_EDITORSHIP',\n  0x1d439ae0: 'ACCOUNTV3_GETTER_LP_ACCOUNT_DATA',\n  0x29d22935: 'TONPROXY_MINTER_RESET_GAS',\n  0x2c76b973: 'JETTON_PROVIDE_WALLET_ADDRESS,TONPROXY_MINTER_PROVIDE_WALLET_ADDRESS',\n  0x2e3034ef: 'ROUTERV3_CREATE_POOL',\n  0x2fcb26a2: 'NFT_GET_STATIC_DATA,POSITIONNFTV3_GET_STATIC_DATA',\n  0x3205adbd: 'POOLV3_UNLOCK',\n  0x3ebe5431: 'ACCOUNTV3_ADD_LIQUIDITY',\n  0x42a0fb43: 'ACCOUNTV3_RESET_GAS,POOL_FACTORY_RESET_GAS,POOLV3_RESET_GAS,ROUTERV3_RESET_GAS',\n  0x441c39ed: 'POOLV3_INIT',\n  0x4468de77: 'POOLV3_FUND_ACCOUNT',\n  0x46ca335a: 'POSITIONNFTV3_POSITION_BURN',\n  0x4cf82803: 'ACCOUNTV3_DIRECT_ADD_LIQUIDITY',\n  0x511a4463: 'NFT_EDITORSHIP_ASSIGNED,POSITIONNFTV3_EDITORSHIP_ASSIGNED',\n  0x530b5f2c: 'POOLV3_START_BURN',\n  0x56dfeb8a: 'ACCOUNTV3_CB_ADD_LIQUIDITY',\n  0x595f07bc: 'JETTON_BURN',\n  0x5bcb5a84: 'ROUTERTV3_ADD_POOL',\n  0x5ee6039f: 'POSITIONNFTV3_FEE_COLLECTED',\n  0x5fcc3d14: 'NFT_TRANSFER,POSITIONNFTV3_NFT_TRANSFER',\n  0x6540cf85: 'TONPROXY_MINTER_INTERNAL_DEPLOY',\n  0x693d3950: 'NFT_GET_ROYALTY_PARAMS,POSITIONNFTV3_GET_ROYALTY_PARAMS',\n  0x6bdcbeb8: 'POOLV3_SET_FEE',\n  0x7362d09c: 'JETTON_TRANSFER_NOTIFICATION',\n  0x7bdd97de: 'JETTON_BURN_NOTIFICATION',\n  0x80139ad6: 'POOLV3_FILL_TICK_M',\n  0x81702ef8: 'POOLV3_MINT',\n  0x87ffe363: 'ROUTERV3_CHANGE_PARAMS',\n  0x89446a42: 'ACCOUNTV3_CB_REFUND_ME',\n  0x8b771735: 'NFT_REPORT_STATIC_DATA,POSITIONNFTV3_REPORT_STATIC_DATA',\n  0x8b85de63: 'POOL_FACTORY_ORDER_INIT',\n  0x98bac405: 'ROUTERV3_CHANGE_ADMIN_COMMIT',\n  0x9e9a8f7f: 'POOL_FACTORY_CREATE_POOL',\n  0xa1daa96d: 'ROUTERV3_PAY_TO',\n  0xa7fb58f8: 'POOLV3_SWAP',\n  0xa8cb00ad: 'NFT_REPORT_ROYALTY_PARAMS,POSITIONNFTV3_REPORT_ROYALTY_PARAMS',\n  0xaa0db3d7: 'POOL_FACTORY_CHANGE_PARAMS',\n  0xae25d79e: 'TONPROXY_MINTER_TON_REFUND',\n  0xcf5f4313: 'TONPROXY_MINTER_DEPLOY_WALLET',\n  0xd1735400: 'JETTON_TAKE_WALLET_ADDRESS,TONPROXY_MINTER_TAKE_WALLET_ADDRESS',\n  0xd3f8a538: 'POOLV3_COLLECT_PROTOCOL',\n  0xd4b33b0a: 'POOL_FACTORY_EXECUTE',\n  0xd4deb03b: 'ROUTERV3_CHANGE_ADMIN_START',\n  0xd53276db: 'JETTON_EXCESSES,NFT_EXCESSES,POSITIONNFTV3_EXCESSES',\n  0xd5ecca2a: 'POSITIONNFTV3_POSITION_INIT',\n  0xd73ac09d: 'POOLV3_BURN',\n  0xdb913023: 'POOLV3_SWAP_M',\n  0xdbb7bb55: 'POOLV3_MINT_M',\n  0xe61425dc: 'SINKV3_SET',\n  0xe639646c: 'POOLV3_BURN_M',\n  0xf58760ef: 'POSITIONNFTV3_OWNERSHIP_ASSIGNED_NOTIFY',\n  0xfd1a73e7: 'SINKV3_ADD',\n  0xfffffeee: 'SINKV3_DUMMY',\n};\nexport class ContractErrors {\n  static COMMON_WRONG_OP: number = 65535; // 0xffff\n  static COMMON_WRONG_WORKCHAIN: number = 333; // 0x14d\n  static JETTON_INVALID_OP: number = 709; // 0x2c5\n  static JETTON_NOT_ADMIN: number = 73; // 0x49\n  static JETTON_UNOUTHORIZED_BURN: number = 74; // 0x4a\n  static JETTON_DISCOVERY_FEE_NOT_MATCHED: number = 75; // 0x4b\n  static JETTON_NOT_OWNER: number = 705; // 0x2c1\n  static JETTON_NOT_ENOUGH_TON: number = 709; // 0x2c5\n  static JETTON_NOT_ENOUGH_GAS: number = 707; // 0x2c3\n  static JETTON_NOT_VALID_WALLET: number = 707; // 0x2c3\n  static JETTON_BALANCE_ERROR: number = 706; // 0x2c2\n  static NFT_NOT_OWNER: number = 401; // 0x191\n  static POOL_FACTORY_INVALID_AMOUNT: number = 110; // 0x6e\n  static POOL_FACTORY_INVALID_CALLER: number = 111; // 0x6f\n  static POOL_FACTORY_POOL_ILLEGAL_PARAMS: number = 112; // 0x70\n  static POOL_FACTORY_INSUFFICIENT_GAS: number = 113; // 0x71\n  static POOLV3_NO_LIQUIDITY: number = 80; // 0x50\n  static POOLV3_ZERO_OUTPUT: number = 81; // 0x51\n  static POOLV3_INVALID_CALLER: number = 82; // 0x52\n  static POOLV3_INSUFFICIENT_GAS: number = 83; // 0x53\n  static POOLV3_INVALID_TOKEN: number = 86; // 0x56\n  static POOLV3_LOW_AMOUNT: number = 87; // 0x57\n  static POOLV3_MATH_ERROR: number = 90; // 0x5a\n  static POOLV3_TICK_IMPOSSIBLE_LOW: number = 91; // 0x5b\n  static POOLV3_TICK_IMPOSSIBLE_HIGH: number = 92; // 0x5c\n  static POOLV3_PRICE_IMPOSSIBLE_LOW: number = 93; // 0x5d\n  static POOLV3_PRICE_IMPOSSIBLE_HIGH: number = 94; // 0x5e\n  static POOLV3_PRICE_LIMIT_WRONG: number = 95; // 0x5f\n  static POOLV3_LOWER_THEN_MIN_OUT: number = 96; // 0x60\n  static POOLV3_INVALID_RECIPIENT: number = 100; // 0x64\n  static POOLV3_POOL_UNDEPLOYED: number = 101; // 0x65\n  static POOLV3_POOL_INACTIVE: number = 102; // 0x66\n  static POOLV3_FORGED_NFT: number = 103; // 0x67\n  static POOLV3_BURN_PARAMETERS_WRONG: number = 104; // 0x68\n  static POOLV3_RESERVES_PROTECTION_ERROR_SIGN: number = 105; // 0x69\n  static POOLV3_RESERVES_PROTECTION_ERROR_DRAIN: number = 106; // 0x6a\n  static POOLV3_POOL_MALFORMED: number = 107; // 0x6b\n  static POOLV3_RESULT_SWAP_OK: number = 200; // 0xc8\n  static POOLV3_RESULT_BURN_OK: number = 201; // 0xc9\n  static POOLV3_RESULT_MINT_OK: number = 202; // 0xca\n  static POOLV3_RESULT_COLLECT_OK: number = 203; // 0xcb\n  static POOLV3_RESULT_SWAP_OUTPUT_TOO_SMALL: number = 230; // 0xe6\n  static POOLV3_RESULT_TICK_IMPOSSIBLE_LOW: number = 220; // 0xdc\n  static POOLV3_RESULT_TICK_IMPOSSIBLE_HIGH: number = 221; // 0xdd\n  static POOLV3_RESULT_WRONG_TICK_SPACING: number = 222; // 0xde\n  static POOLV3_RESULT_TOO_MANY_TICKS: number = 223; // 0xdf\n  static POOLV3_RESULT_TOO_MUCH_LIQUIDITY: number = 224; // 0xe0\n  static POOLV3_RESULT_NOT_ENOUGH_COINS: number = 225; // 0xe1\n  static POOLV3_RESULT_NO_LIQUIDITY: number = 226; // 0xe2\n  static POSITIONNFTV3_INVALID_CALLER: number = 82; // 0x52\n  static POSITIONNFTV3_INIT_NOT_BY_COLLECTION: number = 405; // 0x195\n  static POSITIONNFTV3_NOT_AN_OWNER: number = 401; // 0x191\n  static POSITIONNFTV3_ALREADY_BURNED: number = 408; // 0x198\n  static POSITIONNFTV3_WRONG_BURN_TICKS: number = 409; // 0x199\n  static POSITIONNFTV3_MESSAGE_TOO_LONG: number = 708; // 0x2c4\n  static ROUTERV3_INVALID_AMOUNT: number = 110; // 0x6e\n  static ROUTERV3_INVALID_CALLER: number = 111; // 0x6f\n  static ROUTERV3_POOL_ILLEGAL_PARAMS: number = 112; // 0x70\n  static ROUTERV3_INSUFFICIENT_GAS: number = 113; // 0x71\n  static ROUTERV3_TIMELOCK_NOT_RESPECTED: number = 114; // 0x72\n}\n\nexport const ErrorsLookup = {\n  73: 'JETTON_NOT_ADMIN',\n  74: 'JETTON_UNOUTHORIZED_BURN',\n  75: 'JETTON_DISCOVERY_FEE_NOT_MATCHED',\n  80: 'POOLV3_NO_LIQUIDITY',\n  81: 'POOLV3_ZERO_OUTPUT',\n  82: 'POOLV3_INVALID_CALLER,POSITIONNFTV3_INVALID_CALLER',\n  83: 'POOLV3_INSUFFICIENT_GAS',\n  86: 'POOLV3_INVALID_TOKEN',\n  87: 'POOLV3_LOW_AMOUNT',\n  90: 'POOLV3_MATH_ERROR',\n  91: 'POOLV3_TICK_IMPOSSIBLE_LOW',\n  92: 'POOLV3_TICK_IMPOSSIBLE_HIGH',\n  93: 'POOLV3_PRICE_IMPOSSIBLE_LOW',\n  94: 'POOLV3_PRICE_IMPOSSIBLE_HIGH',\n  95: 'POOLV3_PRICE_LIMIT_WRONG',\n  96: 'POOLV3_LOWER_THEN_MIN_OUT',\n  100: 'POOLV3_INVALID_RECIPIENT',\n  101: 'POOLV3_POOL_UNDEPLOYED',\n  102: 'POOLV3_POOL_INACTIVE',\n  103: 'POOLV3_FORGED_NFT',\n  104: 'POOLV3_BURN_PARAMETERS_WRONG',\n  105: 'POOLV3_RESERVES_PROTECTION_ERROR_SIGN',\n  106: 'POOLV3_RESERVES_PROTECTION_ERROR_DRAIN',\n  107: 'POOLV3_POOL_MALFORMED',\n  110: 'POOL_FACTORY_INVALID_AMOUNT,ROUTERV3_INVALID_AMOUNT',\n  111: 'POOL_FACTORY_INVALID_CALLER,ROUTERV3_INVALID_CALLER',\n  112: 'POOL_FACTORY_POOL_ILLEGAL_PARAMS,ROUTERV3_POOL_ILLEGAL_PARAMS',\n  113: 'POOL_FACTORY_INSUFFICIENT_GAS,ROUTERV3_INSUFFICIENT_GAS',\n  114: 'ROUTERV3_TIMELOCK_NOT_RESPECTED',\n  200: 'POOLV3_RESULT_SWAP_OK',\n  201: 'POOLV3_RESULT_BURN_OK',\n  202: 'POOLV3_RESULT_MINT_OK',\n  203: 'POOLV3_RESULT_COLLECT_OK',\n  220: 'POOLV3_RESULT_TICK_IMPOSSIBLE_LOW',\n  221: 'POOLV3_RESULT_TICK_IMPOSSIBLE_HIGH',\n  222: 'POOLV3_RESULT_WRONG_TICK_SPACING',\n  223: 'POOLV3_RESULT_TOO_MANY_TICKS',\n  224: 'POOLV3_RESULT_TOO_MUCH_LIQUIDITY',\n  225: 'POOLV3_RESULT_NOT_ENOUGH_COINS',\n  226: 'POOLV3_RESULT_NO_LIQUIDITY',\n  230: 'POOLV3_RESULT_SWAP_OUTPUT_TOO_SMALL',\n  333: 'COMMON_WRONG_WORKCHAIN',\n  401: 'NFT_NOT_OWNER,POSITIONNFTV3_NOT_AN_OWNER',\n  405: 'POSITIONNFTV3_INIT_NOT_BY_COLLECTION',\n  408: 'POSITIONNFTV3_ALREADY_BURNED',\n  409: 'POSITIONNFTV3_WRONG_BURN_TICKS',\n  705: 'JETTON_NOT_OWNER',\n  706: 'JETTON_BALANCE_ERROR',\n  707: 'JETTON_NOT_ENOUGH_GAS,JETTON_NOT_VALID_WALLET',\n  708: 'POSITIONNFTV3_MESSAGE_TOO_LONG',\n  709: 'JETTON_INVALID_OP,JETTON_NOT_ENOUGH_TON',\n  65535: 'COMMON_WRONG_OP',\n};\n","// @ts-nocheck\nimport {\n  beginCell,\n  Builder,\n  Cell,\n  Dictionary,\n  DictionaryValue,\n  Slice,\n} from '@ton/core';\nimport { sha256_sync } from '@ton/crypto';\n\n// TODO: In file\n//   - Rework code doubling\n//   - functions packing and unpacking 5 field structures should not be async\nexport const defaultJettonKeys = [\n  'uri',\n  'name',\n  'description',\n  'image',\n  'image_data',\n  'symbol',\n  'decimals',\n  'amount_style',\n];\nexport const defaultNftKeys = [\n  'uri',\n  'name',\n  'description',\n  'image',\n  'image_data',\n  'content_url',\n  'cover_image',\n  'attributes',\n];\n\nconst keyTypes: { [key: string]: 'utf8' | 'ascii' | undefined } = {\n  name: 'utf8',\n  description: 'utf8',\n  image: 'ascii',\n  decimals: 'utf8',\n  symbol: 'utf8',\n  image_data: undefined,\n  uri: 'ascii',\n  content_url: 'ascii',\n  cover_image: 'ascii',\n  attributes: 'ascii',\n};\n\nfunction getKeyType(key: string) {\n  if (key in keyTypes) {\n    return keyTypes[key];\n  }\n  return undefined;\n}\n\nconst ONCHAIN_CONTENT_PREFIX = 0x00;\nconst OFFCHAIN_CONTENT_PREFIX = 0x01;\n\nconst contentValue: DictionaryValue<string> = {\n  serialize: (src: string, builder: Builder) => {\n    builder.storeRef(\n      beginCell()\n        .storeUint(0, 8)\n        .storeStringTail(src)\n        .endCell()\n    );\n  },\n  parse: (src: Slice) => {\n    const sc = src.loadRef().beginParse();\n    const prefix = sc.loadUint(8);\n    if (prefix == 0) {\n      return sc.loadStringTail();\n    } else if (prefix == 1) {\n      // Not really tested, but feels like it should work\n      const chunkDict = Dictionary.loadDirect(\n        Dictionary.Keys.Uint(32),\n        Dictionary.Values.Cell(),\n        sc\n      );\n      return chunkDict\n        .values()\n        .map(x => x.beginParse().loadStringTail())\n        .join('');\n    } else {\n      throw Error(`Prefix ${prefix} is not supported yet`);\n    }\n  },\n};\n\nexport function displayContentCell(\n  content: Cell,\n  jetton: boolean = true,\n  additional?: string[]\n) {\n  const cs = content.beginParse();\n  const contentType = cs.loadUint(8);\n  if (contentType == OFFCHAIN_CONTENT_PREFIX) {\n    const noData = cs.remainingBits == 0;\n    if (noData && cs.remainingRefs == 0) {\n      console.log('No data in content cell!\\n');\n    } else {\n      const contentUrl = noData ? cs.loadStringRefTail() : cs.loadStringTail();\n      console.log(`Content metadata url:${contentUrl}\\n`);\n    }\n  } else if (contentType == ONCHAIN_CONTENT_PREFIX) {\n    let contentKeys: string[];\n    const hasAdditional = additional !== undefined && additional.length > 0;\n    const contentDict = Dictionary.load(\n      Dictionary.Keys.BigUint(256),\n      contentValue,\n      cs\n    );\n    const contentMap: { [key: string]: string } = {};\n\n    if (jetton) {\n      contentKeys = hasAdditional\n        ? [...defaultJettonKeys, ...additional]\n        : defaultJettonKeys;\n    } else {\n      contentKeys = hasAdditional\n        ? [...defaultNftKeys, ...additional]\n        : defaultNftKeys;\n    }\n    for (const name of contentKeys) {\n      // I know we should pre-compute hashed keys for known values... just not today.\n      const dictKey = BigInt('0x' + sha256_sync(name).toString('hex'));\n      const dictValue = contentDict.get(dictKey);\n      if (dictValue !== undefined) {\n        contentMap[name] = dictValue;\n      }\n    }\n    console.log(`Content:${JSON.stringify(contentMap, null, 2)}`);\n  } else {\n    console.log(`Unknown content format indicator:${contentType}\\n`);\n  }\n}\n\nexport function unpackJettonOnchainMetadata(\n  content: Cell,\n  jetton: boolean = true,\n  additional?: string[]\n): { [key: string]: string } {\n  const cs = content.beginParse();\n  const contentType = cs.loadUint(8);\n  if (contentType == 1) {\n    const noData = cs.remainingBits == 0;\n    if (noData && cs.remainingRefs == 0) {\n      console.log('No data in content cell!\\n');\n      return {};\n    } else {\n      const contentUrl = noData ? cs.loadStringRefTail() : cs.loadStringTail();\n      console.log(`Content metadata url:${contentUrl}\\n`);\n      return { uri: contentUrl };\n    }\n  } else if (contentType == 0) {\n    let contentKeys: string[];\n    const hasAdditional = additional !== undefined && additional.length > 0;\n    const contentDict = Dictionary.load(\n      Dictionary.Keys.BigUint(256),\n      contentValue,\n      cs\n    );\n    const contentMap: { [key: string]: string } = {};\n\n    if (jetton) {\n      contentKeys = hasAdditional\n        ? [...defaultJettonKeys, ...additional]\n        : defaultJettonKeys;\n    } else {\n      contentKeys = hasAdditional\n        ? [...defaultNftKeys, ...additional]\n        : defaultNftKeys;\n    }\n    for (const name of contentKeys) {\n      //console.log(`Checking ${name}`)\n      const dictKey = BigInt('0x' + sha256_sync(name).toString('hex'));\n      const dictValue = contentDict.get(dictKey);\n      if (dictValue !== undefined) {\n        contentMap[name] = dictValue;\n      }\n    }\n    return contentMap;\n  } else {\n    console.log(`Unknown content format indicator:${contentType}\\n`);\n    return {};\n  }\n}\n\nexport function packOffchainMetadata(data: string): Cell {\n  const result: Cell = beginCell()\n    .storeInt(OFFCHAIN_CONTENT_PREFIX, 8)\n    .storeStringTail(data)\n    .endCell();\n  return result;\n}\n\nexport function packJettonOnchainMetadata(data: {\n  [s: string]: string | undefined;\n}): Cell {\n  let records = Dictionary.empty(Dictionary.Keys.BigUint(256), contentValue);\n\n  for (const k in data) {\n    const v = data[k];\n\n    if (!getKeyType(k)) throw new Error(`Unsupported onchain key: ${k}`);\n\n    if (v === undefined || v === '') continue;\n\n    let bufferToStore = Buffer.from(v, getKeyType(k));\n    const hash = sha256_sync(k);\n    const hashStr = '0x' + hash.toString('hex');\n\n    // console.log(\"Adding value: \", hashStr, \" ==> \", bufferToStore.toString())\n    records.set(BigInt(hashStr), bufferToStore.toString());\n  }\n\n  const result: Cell = beginCell()\n    .storeInt(ONCHAIN_CONTENT_PREFIX, 8)\n    .storeDict(records)\n    .endCell();\n  return result;\n}\n","import {\n  Address,\n  beginCell,\n  Cell,\n  Dictionary,\n  DictionaryValue,\n  Contract,\n  contractAddress,\n  ContractProvider,\n  Sender,\n  SendMode,\n} from '@ton/core';\nimport { ContractOpcodes } from './opCodes';\nimport { packJettonOnchainMetadata } from './common/jettonContent';\nimport { BLACK_HOLE_ADDRESS, IMPOSSIBLE_FEE } from '../constants';\n\nexport interface PoolStateAndConfiguration {\n  router_address: Address;\n  admin_address: Address;\n  controller_address: Address;\n  jetton0_wallet: Address;\n  jetton1_wallet: Address;\n  jetton0_minter: Address;\n  jetton1_minter: Address;\n  pool_active: boolean;\n  tick_spacing: number;\n  lp_fee_base: number;\n  protocol_fee: number;\n  lp_fee_current: number;\n  tick: number;\n  price_sqrt: bigint;\n  liquidity: bigint;\n  feeGrowthGlobal0X128: bigint;\n  feeGrowthGlobal1X128: bigint;\n  collectedProtocolFee0: bigint;\n  collectedProtocolFee1: bigint;\n  nftv3item_counter: bigint;\n  reserve0: bigint;\n  reserve1: bigint;\n  nftv3items_active?: bigint;\n  ticks_occupied?: number;\n  seqno?: bigint;\n}\n\n/** Inital data structures and settings **/\nexport type PoolV3ContractConfig = {\n  router_address: Address;\n  admin_address?: Address;\n\n  lp_fee_base?: number;\n  protocol_fee?: number;\n\n  jetton0_wallet: Address;\n  jetton1_wallet: Address;\n\n  tick_spacing?: number;\n\n  pool_active?: boolean;\n  tick?: number;\n  price_sqrt?: bigint;\n  liquidity?: bigint;\n  lp_fee_current?: number;\n\n  accountv3_code: Cell;\n  position_nftv3_code: Cell;\n\n  nftContent?: Cell;\n  nftItemContent?: Cell;\n};\n\nexport class TickInfoWrapper {\n  constructor(\n    public liquidityGross: bigint = BigInt(0),\n    public liquidityNet: bigint = BigInt(0),\n    public outerFeeGrowth0Token: bigint = BigInt(0),\n    public outerFeeGrowth1Token: bigint = BigInt(0)\n  ) {}\n}\n\nconst DictionaryTickInfo: DictionaryValue<TickInfoWrapper> = {\n  serialize(src, builder) {\n    builder.storeUint(src.liquidityGross, 256);\n    builder.storeInt(src.liquidityNet, 128);\n    builder.storeUint(src.outerFeeGrowth0Token, 256);\n    builder.storeUint(src.outerFeeGrowth1Token, 256);\n  },\n  parse(src) {\n    let tickInfo = new TickInfoWrapper();\n    tickInfo.liquidityGross = src.loadUintBig(256);\n    tickInfo.liquidityNet = src.loadIntBig(128);\n    tickInfo.outerFeeGrowth0Token = src.loadUintBig(256);\n    tickInfo.outerFeeGrowth1Token = src.loadUintBig(256);\n    return tickInfo;\n  },\n};\n\nexport function embedJettonData(\n  content: Cell,\n  jetton0Name: string,\n  decimals0: number,\n  jetton1Name: string,\n  decimals1: number\n): Cell {\n  let p = content.beginParse();\n\n  //console.log(\"embedJettonData l0 \", Buffer.from(jetton0Name).length )\n  //console.log(\"embedJettonData l1 \", Buffer.from(jetton1Name).length )\n\n  const result: Cell = beginCell()\n    .storeInt(p.loadUint(8), 8)\n    .storeMaybeRef(p.loadRef())\n    .storeUint(decimals0, 6)\n    .storeUint(Buffer.from(jetton0Name).length, 8)\n    .storeBuffer(Buffer.from(jetton0Name))\n    .storeUint(decimals1, 6)\n    .storeUint(Buffer.from(jetton1Name).length, 8)\n    .storeBuffer(Buffer.from(jetton1Name))\n    .endCell();\n  return result;\n}\n\nexport let nftContentToPack: { [s: string]: string | undefined } = {\n  name: 'AMM Pool Minter',\n  description: 'AMM Pool LP Minter',\n  cover_image: 'https://tonco.io/static/tonco-cover.jpeg',\n  image: 'https://tonco.io/static/tonco-astro.png',\n};\n\n//export const nftContentPackedDefault: Cell =  embedJettonData(packJettonOnchainMetadata(nftContentToPack), \"jetton0\", 10, \"jetton1\", 11)\nexport const nftContentPackedDefault: Cell = packJettonOnchainMetadata(\n  nftContentToPack\n);\n\nexport let nftItemContentToPack: { [s: string]: string | undefined } = {\n  name: 'AMM Pool Position',\n  description: 'LP Position',\n  image: 'https://tonco.io/static/tonco-astro.png',\n  //content_url : \"https://tonco.io/static/tonco-astro.png\",\n  //content_type : \"image/png\"\n};\n\nexport const nftItemContentPackedDefault: Cell = packJettonOnchainMetadata(\n  nftItemContentToPack\n);\n\n//const nftItemContentPacked: Cell =  packOffchainMetadata (nftItemContent1ToPack)\n\n/* This function creates the config only form the values that affect the address */\nexport function poolv3StateInitConfig(\n  jetton0Wallet: Address,\n  jetton1Wallet: Address,\n  accountV3Code: Cell,\n  positionNftV3Code: Cell,\n  routerAddress: Address\n): PoolV3ContractConfig {\n  let order = PoolV3Contract.orderJettonId(jetton0Wallet, jetton1Wallet);\n\n  const config: PoolV3ContractConfig = {\n    router_address: routerAddress,\n\n    jetton0_wallet: order ? jetton0Wallet : jetton1Wallet,\n    jetton1_wallet: order ? jetton1Wallet : jetton0Wallet,\n\n    accountv3_code: accountV3Code,\n    position_nftv3_code: positionNftV3Code,\n  };\n  return config;\n}\n\nexport function poolv3ContractConfigToCell(config: PoolV3ContractConfig): Cell {\n  let ticks = Dictionary.empty(Dictionary.Keys.Int(24), DictionaryTickInfo);\n\n  return beginCell()\n    .storeAddress(config.router_address)\n    .storeUint(config.lp_fee_base ?? 30, 16)\n    .storeUint(config.protocol_fee ?? 30, 16)\n    .storeUint(config.lp_fee_current ?? 30, 16)\n    .storeAddress(config.jetton0_wallet)\n    .storeAddress(config.jetton1_wallet)\n    .storeUint(config.tick_spacing ?? 1, 24)\n    .storeUint(0, 64) // poolv3::seqno\n\n    .storeRef(\n      beginCell()\n        .storeUint(BigInt(0), 256) // poolv3::feeGrowthGlobal0X128\n        .storeUint(BigInt(0), 256) // poolv3::feeGrowthGlobal1X128\n        .storeUint(BigInt(0), 128) // poolv3::collectedProtocolFee0\n        .storeUint(BigInt(0), 128) // poolv3::collectedProtocolFee1\n\n        .storeCoins(BigInt(0)) // poolv3::reserve0\n        .storeCoins(BigInt(0)) // poolv3::reserve1\n        .endCell()\n    )\n    .storeRef(\n      beginCell()\n        .storeUint(0, 1)\n        .storeInt(config.tick ?? 0, 24)\n        .storeUint(config.price_sqrt ?? 0, 160)\n        .storeUint(config.liquidity ?? 0, 128)\n        .storeUint(0, 24) // Occupied ticks\n\n        .storeUint(0, 64) // NFT Inital counter\n        .storeUint(0, 64) // NFT Active counter\n\n        .storeAddress(config.admin_address ?? BLACK_HOLE_ADDRESS)\n        .storeAddress(BLACK_HOLE_ADDRESS) // poolv3::controller_address\n        .storeRef(\n          beginCell()\n            .storeAddress(BLACK_HOLE_ADDRESS) // poolv3::jetton0_minter\n            .storeAddress(BLACK_HOLE_ADDRESS) // poolv3::jetton1_minter\n            .endCell()\n        )\n\n        .endCell()\n    )\n    .storeRef(\n      beginCell()\n        .storeDict(ticks)\n        .endCell()\n    )\n    .storeRef(\n      beginCell()\n        .storeRef(config.accountv3_code)\n        .storeRef(config.position_nftv3_code)\n        .storeRef(config.nftContent ?? new Cell())\n        .storeRef(config.nftItemContent ?? new Cell())\n        .endCell()\n    )\n    .endCell();\n}\n\ntype NumberedTickInfo = {\n  tickNum: number;\n  liquidityGross: bigint;\n  liquidityNet: bigint;\n  outerFeeGrowth0Token?: bigint;\n  outerFeeGrowth1Token?: bigint;\n};\n\n/** Pool  **/\nexport class PoolV3Contract implements Contract {\n  constructor(\n    readonly address: Address,\n    readonly init?: { code: Cell; data: Cell }\n  ) {}\n\n  static orderJettonId(\n    jetton0Wallet: Address,\n    jetton1Wallet: Address\n  ): boolean {\n    // let result1 =  beginCell().storeAddress(jetton0Wallet).endCell().hash() > beginCell().storeAddress(jetton1Wallet).endCell().hash()\n\n    let strHex0 = beginCell()\n      .storeAddress(jetton0Wallet)\n      .endCell()\n      .hash()\n      .toString('hex');\n    let strHex1 = beginCell()\n      .storeAddress(jetton1Wallet)\n      .endCell()\n      .hash()\n      .toString('hex');\n\n    let result2 = BigInt('0x' + strHex0) > BigInt('0x' + strHex1);\n\n    //if (result1 != result2) throw Error(\"Unexpected\")\n\n    return result2;\n  }\n\n  static createFromConfig(\n    config: PoolV3ContractConfig,\n    code: Cell,\n    workchain = 0\n  ) {\n    const data = poolv3ContractConfigToCell(config);\n    const init = { code, data };\n    const address = contractAddress(workchain, init);\n\n    return new PoolV3Contract(address, init);\n  }\n\n  async sendDeploy(\n    provider: ContractProvider,\n    via: Sender,\n    value: bigint,\n    tickSpacing: number,\n    sqrtPriceX96: bigint,\n    opts: {\n      is_from_admin?: boolean;\n      activate_pool?: boolean;\n\n      jetton0Minter?: Address;\n      jetton1Minter?: Address;\n      admin?: Address;\n      controller?: Address;\n\n      nftContentPacked?: Cell;\n      nftItemContentPacked?: Cell;\n\n      protocolFee?: number;\n      lpFee?: number;\n      currentFee?: number;\n    }\n  ) {\n    if (!opts.activate_pool) {\n      opts.activate_pool = false;\n    }\n\n    let minterCell = null;\n    if (opts.jetton0Minter && opts.jetton0Minter) {\n      minterCell = beginCell()\n        .storeAddress(opts.jetton0Minter)\n        .storeAddress(opts.jetton1Minter)\n        .endCell();\n    }\n\n    if (opts.is_from_admin == undefined) {\n      opts.is_from_admin = true;\n    }\n\n    let body: Cell = beginCell()\n      .storeUint(ContractOpcodes.POOLV3_INIT, 32) // OP code\n      .storeUint(0, 64) // query_id\n      .storeUint(opts.is_from_admin ? 1 : 0, 1) // is from admin.\n      .storeUint(opts.admin ? 1 : 0, 1)\n      .storeAddress(opts.admin) // null is an invalid Address, but valid slice\n      .storeUint(opts.controller ? 1 : 0, 1)\n      .storeAddress(opts.controller)\n\n      .storeUint(1, 1)\n      .storeUint(tickSpacing, 24)\n      .storeUint(1, 1)\n      .storeUint(sqrtPriceX96, 160)\n      .storeUint(1, 1)\n      .storeUint(opts.activate_pool ? 1 : 0, 1)\n\n      .storeUint(opts.protocolFee ? opts.protocolFee : IMPOSSIBLE_FEE, 16)\n      .storeUint(opts.lpFee ? opts.lpFee : IMPOSSIBLE_FEE, 16)\n      .storeUint(opts.currentFee ? opts.currentFee : IMPOSSIBLE_FEE, 16)\n\n      .storeRef(opts.nftContentPacked ?? nftContentPackedDefault)\n      .storeRef(opts.nftItemContentPacked ?? nftItemContentPackedDefault)\n      .storeMaybeRef(minterCell)\n      .endCell();\n\n    await provider.internal(via, {\n      value,\n      sendMode: SendMode.PAY_GAS_SEPARATELY,\n      body: body,\n    });\n  }\n\n  static reinitMessage(opts: {\n    is_from_admin?: boolean;\n\n    activate_pool?: boolean;\n    tickSpacing?: number;\n    sqrtPriceX96?: bigint;\n\n    jetton0Minter?: Address;\n    jetton1Minter?: Address;\n    admin?: Address;\n    controller?: Address;\n\n    nftContentPacked?: Cell;\n    nftItemContentPacked?: Cell;\n\n    protocolFee?: number;\n    lpFee?: number;\n    currentFee?: number;\n  }): Cell {\n    if (opts.is_from_admin == undefined) {\n      opts.is_from_admin = true;\n    }\n\n    let minterCell = null;\n    if (opts.jetton0Minter && opts.jetton0Minter) {\n      minterCell = beginCell()\n        .storeAddress(opts.jetton0Minter)\n        .storeAddress(opts.jetton1Minter)\n        .endCell();\n    }\n    let body: Cell = beginCell()\n      .storeUint(ContractOpcodes.POOLV3_INIT, 32) // OP code\n      .storeUint(0, 64) // query_id\n      .storeUint(opts.is_from_admin ? 1 : 0, 1) // is_from_admin\n\n      .storeUint(opts.admin == undefined ? 0 : 1, 1)\n      .storeAddress(opts.admin) // null is an invalid Address, but valid slice\n      .storeUint(opts.controller == undefined ? 0 : 1, 1)\n      .storeAddress(opts.controller)\n\n      .storeUint(opts.tickSpacing == undefined ? 0 : 1, 1)\n      .storeUint(opts.tickSpacing ?? 0, 24)\n      .storeUint(opts.sqrtPriceX96 == undefined ? 0 : 1, 1)\n      .storeUint(opts.sqrtPriceX96 ?? 0, 160)\n      .storeUint(opts.activate_pool == undefined ? 0 : 1, 1)\n      .storeUint(opts.activate_pool ? 1 : 0, 1)\n\n      .storeUint(opts.protocolFee ? opts.protocolFee : IMPOSSIBLE_FEE, 16)\n      .storeUint(opts.lpFee ? opts.lpFee : IMPOSSIBLE_FEE, 16)\n      .storeUint(opts.currentFee ? opts.currentFee : IMPOSSIBLE_FEE, 16)\n\n      .storeRef(opts.nftContentPacked ?? beginCell().endCell())\n      .storeRef(opts.nftItemContentPacked ?? beginCell().endCell())\n      .storeMaybeRef(minterCell)\n      .endCell();\n\n    return body;\n  }\n\n  static unpackReinitMessage(\n    body: Cell\n  ): {\n    is_from_admin?: boolean;\n    activate_pool?: boolean;\n    tickSpacing?: number;\n    sqrtPriceX96?: bigint;\n\n    jetton0Minter?: Address;\n    jetton1Minter?: Address;\n    admin?: Address;\n    controller?: Address;\n\n    nftContentPacked?: Cell;\n    nftItemContentPacked?: Cell;\n\n    protocolFee?: number;\n    lpFee?: number;\n    currentFee?: number;\n  } {\n    let s = body.beginParse();\n    const op = s.loadUint(32);\n    const query_id = s.loadUint(64);\n    const is_from_admin = s.loadUint(1) != 0;\n    const setAdmin = s.loadUint(1);\n    const admin = setAdmin == 1 ? s.loadAddress() : undefined;\n    if (setAdmin == 0) {\n      s.loadUint(2);\n    }\n\n    const setControl = s.loadUint(1);\n    const controller = setControl == 1 ? s.loadAddress() : undefined;\n    if (setControl == 0) {\n      s.loadUint(2);\n    }\n\n    const setTickSpacing = s.loadUint(1);\n    let tickSpacingV = s.loadUint(24);\n    let tickSpacing = setTickSpacing != 0 ? tickSpacingV : undefined;\n\n    const setPrice = s.loadUint(1);\n    let sqrtPriceX96V = s.loadUintBig(160);\n    let sqrtPriceX96 = setPrice != 0 ? sqrtPriceX96V : undefined;\n\n    const setActive = s.loadUint(1);\n    let activate_poolV = s.loadUint(1) == 1;\n    let activate_pool = setActive != 0 ? activate_poolV : undefined;\n\n    const protocolFeeV = s.loadUint(16);\n    const protocolFee =\n      protocolFeeV < IMPOSSIBLE_FEE ? protocolFeeV : undefined;\n    const lpFeeV = s.loadUint(16);\n    const lpFee = lpFeeV < IMPOSSIBLE_FEE ? lpFeeV : undefined;\n    const currentFeeV = s.loadUint(16);\n    const currentFee = currentFeeV < IMPOSSIBLE_FEE ? currentFeeV : undefined;\n\n    let nftContentPacked = s.loadRef();\n    let nftItemContentPacked = s.loadRef();\n\n    return {\n      is_from_admin,\n      admin,\n      controller,\n      tickSpacing,\n      sqrtPriceX96,\n      activate_pool,\n      nftContentPacked,\n      nftItemContentPacked,\n      protocolFee,\n      lpFee,\n      currentFee,\n    };\n  }\n\n  async sendReinit(\n    provider: ContractProvider,\n    via: Sender,\n    value: bigint,\n    opts: {\n      is_from_admin?: boolean;\n\n      activate_pool?: boolean;\n      tickSpacing?: number;\n      sqrtPriceX96?: bigint;\n\n      jetton0Minter?: Address;\n      jetton1Minter?: Address;\n      admin?: Address;\n      controller?: Address;\n\n      nftContentPacked?: Cell;\n      nftItemContentPacked?: Cell;\n\n      protocolFee?: number;\n      lpFee?: number;\n      currentFee?: number;\n    }\n  ) {\n    await provider.internal(via, {\n      value,\n      sendMode: SendMode.PAY_GAS_SEPARATELY,\n      body: PoolV3Contract.reinitMessage(opts),\n    });\n  }\n\n  static messageSetFees(\n    protocolFee: number,\n    lpFee: number,\n    currentFee: number\n  ) {\n    return beginCell()\n      .storeUint(ContractOpcodes.POOLV3_SET_FEE, 32) // OP code\n      .storeUint(0, 64) // query_id\n      .storeUint(protocolFee, 16)\n      .storeUint(lpFee, 16)\n      .storeUint(currentFee, 16)\n      .endCell();\n  }\n\n  static unpackSetFeesMessage(\n    body: Cell\n  ): {\n    protocolFee: number;\n    lpFee: number;\n    currentFee: number;\n  } {\n    let s = body.beginParse();\n    const op = s.loadUint(32);\n    if (op != ContractOpcodes.POOLV3_SET_FEE) throw Error('Wrong opcode');\n\n    const query_id = s.loadUint(64);\n    const protocolFee = s.loadUint(16);\n    const lpFee = s.loadUint(16);\n    const currentFee = s.loadUint(16);\n    return { protocolFee, lpFee, currentFee };\n  }\n\n  async sendSetFees(\n    provider: ContractProvider,\n    sender: Sender,\n    value: bigint,\n\n    protocolFee: number,\n    lpFee: number,\n    currentFee: number\n  ) {\n    const msg_body = PoolV3Contract.messageSetFees(\n      protocolFee,\n      lpFee,\n      currentFee\n    );\n    await provider.internal(sender, {\n      value,\n      sendMode: SendMode.PAY_GAS_SEPARATELY,\n      body: msg_body,\n    });\n  }\n\n  async sendLockPool(\n    provider: ContractProvider,\n    sender: Sender,\n    value: bigint\n  ) {\n    const msg_body = beginCell()\n      .storeUint(ContractOpcodes.POOLV3_LOCK, 32) // OP code\n      .storeUint(0, 64) // query_id\n      .endCell();\n    await provider.internal(sender, {\n      value,\n      sendMode: SendMode.PAY_GAS_SEPARATELY,\n      body: msg_body,\n    });\n  }\n\n  async sendUnlockPool(\n    provider: ContractProvider,\n    sender: Sender,\n    value: bigint\n  ) {\n    const msg_body = beginCell()\n      .storeUint(ContractOpcodes.POOLV3_UNLOCK, 32) // OP code\n      .storeUint(0, 64) // query_id\n      .endCell();\n    await provider.internal(sender, {\n      value,\n      sendMode: SendMode.PAY_GAS_SEPARATELY,\n      body: msg_body,\n    });\n  }\n\n  static messageCollectProtocol(): Cell {\n    return beginCell()\n      .storeUint(ContractOpcodes.POOLV3_COLLECT_PROTOCOL, 32) // OP code\n      .storeUint(0, 64) // query_id\n      .endCell();\n  }\n\n  static unpackCollectProtocolMessage(body: Cell) {\n    let s = body.beginParse();\n    const op = s.loadUint(32);\n    if (op != ContractOpcodes.POOLV3_COLLECT_PROTOCOL)\n      throw Error('Wrong opcode');\n\n    const query_id = s.loadUint(64);\n  }\n\n  async sendCollectProtocol(\n    provider: ContractProvider,\n    sender: Sender,\n    value: bigint\n  ) {\n    await provider.internal(sender, {\n      value,\n      sendMode: SendMode.PAY_GAS_SEPARATELY,\n      body: PoolV3Contract.messageCollectProtocol(),\n    });\n  }\n\n  async sendBurn(\n    provider: ContractProvider,\n    via: Sender,\n    value: bigint,\n    nftIndex: bigint,\n    tickLower: number,\n    tickUpper: number,\n    liquidity2Burn: bigint\n  ) {\n    await provider.internal(via, {\n      value: value,\n      body: beginCell()\n        .storeUint(ContractOpcodes.POOLV3_START_BURN, 32) // op\n        .storeUint(0, 64) // query id\n        .storeUint(nftIndex, 64)\n        .storeUint(liquidity2Burn, 128)\n        .storeInt(tickLower, 24)\n        .storeInt(tickUpper, 24)\n        .endCell(),\n    });\n  }\n\n  /** Getters **/\n\n  async getIsActive(provider: ContractProvider) {\n    const { stack } = await provider.get('getIsActive', []);\n    return stack.readBoolean();\n  }\n\n  /* If not debug, it can actually would throw the exception */\n  async getIsDebug(provider: ContractProvider) {\n    try {\n      const { stack } = await provider.get('isDebugBuild', []);\n      return stack.readBoolean();\n    } catch (err) {\n      return false;\n    }\n  }\n\n  async getPoolStateAndConfiguration(\n    provider: ContractProvider\n  ): Promise<PoolStateAndConfiguration> {\n    const { stack } = await provider.get('getPoolStateAndConfiguration', []);\n\n    return {\n      router_address: stack.readAddress(),\n      admin_address: stack.readAddress(),\n      controller_address: stack.readAddress(),\n\n      jetton0_wallet: stack.readAddress(),\n      jetton1_wallet: stack.readAddress(),\n\n      jetton0_minter: stack.readAddress(),\n      jetton1_minter: stack.readAddress(),\n\n      pool_active: stack.readBoolean(),\n      tick_spacing: stack.readNumber(),\n\n      lp_fee_base: stack.readNumber(),\n      protocol_fee: stack.readNumber(),\n      lp_fee_current: stack.readNumber(),\n\n      tick: stack.readNumber(),\n      price_sqrt: stack.readBigNumber(),\n      liquidity: stack.readBigNumber(),\n\n      feeGrowthGlobal0X128: stack.readBigNumber(),\n      feeGrowthGlobal1X128: stack.readBigNumber(),\n      collectedProtocolFee0: stack.readBigNumber(),\n      collectedProtocolFee1: stack.readBigNumber(),\n\n      nftv3item_counter: stack.readBigNumber(),\n\n      reserve0: stack.readBigNumber(),\n      reserve1: stack.readBigNumber(),\n\n      nftv3items_active: stack.readBigNumber(),\n      ticks_occupied: stack.readNumber(),\n\n      seqno: stack.readBigNumber(),\n    };\n  }\n\n  /* Tick related getters */\n  /**\n   *  Returns a tick by tickNumber. If tick not inited - tick filled with zero will be returned.\n   *  Also pervious tick and next tick numbers are returned\n   *\n   *\n   *  @param provider   blockchain access provider\n   *  @param tickNumber Tick to extract data for\n   *\n   **/\n\n  async getTickInfo(provider: ContractProvider, tickNumber: number) {\n    const result = await this.getTickInfosFromArr(\n      provider,\n      tickNumber - 1,\n      1,\n      false,\n      true\n    );\n    if (result.length == 0 || result[0].tickNum != tickNumber)\n      return new TickInfoWrapper();\n\n    let tickInfo = new TickInfoWrapper();\n    tickInfo.liquidityGross = result[0].liquidityGross;\n    tickInfo.liquidityNet = result[0].liquidityNet;\n    tickInfo.outerFeeGrowth0Token = result[0].outerFeeGrowth0Token ?? BigInt(0);\n    tickInfo.outerFeeGrowth1Token = result[0].outerFeeGrowth1Token ?? BigInt(0);\n    return tickInfo;\n  }\n\n  async getTickInfosAll(provider: ContractProvider) {\n    const { stack } = await provider.get('getAllTickInfos', []);\n\n    if (stack.peek().type !== 'cell') {\n      return [];\n    }\n    let valueReader = stack.readCell();\n\n    const dict = Dictionary.loadDirect(\n      Dictionary.Keys.Int(24),\n      DictionaryTickInfo,\n      valueReader\n    );\n\n    let result: NumberedTickInfo[] = [];\n\n    let tickKeys = dict.keys();\n    tickKeys.sort((a, b) => a - b);\n    for (let key of tickKeys) {\n      const info = dict.get(key);\n      result.push({\n        tickNum: key,\n        liquidityGross: info!.liquidityGross,\n        liquidityNet: info!.liquidityNet,\n        outerFeeGrowth0Token: info!.outerFeeGrowth0Token,\n        outerFeeGrowth1Token: info!.outerFeeGrowth1Token,\n      });\n    }\n    return result;\n  }\n\n  /**\n   *  Returns a hash object of ticks infos with all internal data starting from key >=tickNumber  or key <= tickNumber\n   *  and no more then number. Unfortunately there is an internal limit of 255 tickInfos\n   *\n   *\n   *  @param provider   blockchain access provider\n   *  @param tickNumber Starting tick. Ticks greater or equal will be returned with back == false, with back == true - less or equal keys will be enumerated\n   *  @param amount     Number of tick infos to be returned\n   *  @param back       directions of ticks\n   *  @param full       should fee related fields be filled\n   *\n   *\n   **/\n  async getTickInfosFromArr(\n    provider: ContractProvider,\n    tickNumber: number,\n    amount: number,\n    back: boolean = false,\n    full: boolean = false\n  ) {\n    const { stack } = await provider.get('getTickInfosFrom', [\n      { type: 'int', value: BigInt(tickNumber) },\n      { type: 'int', value: BigInt(amount) },\n      { type: 'int', value: BigInt(back ? 1 : 0) },\n      { type: 'int', value: BigInt(full ? 1 : 0) },\n    ]);\n\n    if (stack.peek().type !== 'tuple') {\n      return [];\n    }\n    let valueReader = stack.readTuple();\n\n    let result: NumberedTickInfo[] = [];\n\n    while (valueReader.remaining) {\n      // console.log(\"Outer iteration\")\n      let internalReader = valueReader.readTuple();\n      while (internalReader.remaining) {\n        // console.log(\"Inner iteration\")\n        const infoTuple = internalReader.readTuple();\n        const tickInfo: NumberedTickInfo = {\n          tickNum: infoTuple.readNumber(),\n          liquidityGross: infoTuple.readBigNumber(),\n          liquidityNet: infoTuple.readBigNumber(),\n          outerFeeGrowth0Token: full ? infoTuple.readBigNumber() : BigInt(0),\n          outerFeeGrowth1Token: full ? infoTuple.readBigNumber() : BigInt(0),\n        };\n        result.push(tickInfo);\n      }\n    }\n    return result;\n  }\n\n  async getMintEstimate(\n    provider: ContractProvider,\n    tickLower: number,\n    tickUpper: number,\n    liquidity: bigint\n  ) {\n    const { stack } = await provider.get('getMintEstimate', [\n      { type: 'int', value: BigInt(tickLower) },\n      { type: 'int', value: BigInt(tickUpper) },\n      { type: 'int', value: BigInt(liquidity) },\n    ]);\n    return {\n      amount0: stack.readBigNumber(),\n      amount1: stack.readBigNumber(),\n      mintErrors: stack.readNumber(),\n    };\n  }\n\n  async getSwapEstimate(\n    provider: ContractProvider,\n    zeroForOne: boolean,\n    amount: bigint,\n    sqrtPriceLimitX96: bigint,\n    minOutAmount: bigint = BigInt(0),\n    gasLimit: bigint = BigInt(0)\n  ) {\n    const { stack } = await provider.get('getSwapEstimateGas', [\n      { type: 'int', value: BigInt(zeroForOne ? 1 : 0) },\n      { type: 'int', value: BigInt(amount) },\n      { type: 'int', value: BigInt(sqrtPriceLimitX96) },\n      { type: 'int', value: BigInt(minOutAmount) },\n      { type: 'int', value: BigInt(gasLimit) },\n    ]);\n    return { amount0: stack.readBigNumber(), amount1: stack.readBigNumber() };\n  }\n\n  async getCollectedFees(\n    provider: ContractProvider,\n    tickLower: number,\n    tickUpper: number,\n    posLiquidityDelta: bigint,\n    posFeeGrowthInside0X128: bigint,\n    posFeeGrowthInside1X128: bigint\n  ) {\n    const { stack } = await provider.get('getCollectedFees', [\n      { type: 'int', value: BigInt(tickLower) },\n      { type: 'int', value: BigInt(tickUpper) },\n      { type: 'int', value: BigInt(posLiquidityDelta) },\n      { type: 'int', value: BigInt(posFeeGrowthInside0X128) },\n      { type: 'int', value: BigInt(posFeeGrowthInside1X128) },\n    ]);\n    return { amount0: stack.readBigNumber(), amount1: stack.readBigNumber() };\n  }\n\n  async getFeeGrowthInside(\n    provider: ContractProvider,\n    tickLower: number,\n    tickUpper: number,\n    tickCurrent: number,\n    feeGrowthGlobal0X128: bigint,\n    feeGrowthGlobal1X128: bigint\n  ) {\n    const { stack } = await provider.get('getFeeGrowthInside', [\n      { type: 'int', value: BigInt(tickLower) },\n      { type: 'int', value: BigInt(tickUpper) },\n      { type: 'int', value: BigInt(tickCurrent) },\n      { type: 'int', value: BigInt(feeGrowthGlobal0X128) },\n      { type: 'int', value: BigInt(feeGrowthGlobal1X128) },\n    ]);\n    return {\n      feeGrowthInside0X128: stack.readBigNumber(),\n      feeGrowthInside1X128: stack.readBigNumber(),\n    };\n  }\n\n  /* Subcontracts getters */\n  async getUserAccountAddress(\n    provider: ContractProvider,\n    owner: Address\n  ): Promise<Address> {\n    const res = await provider.get('getUserAccountAddress', [\n      {\n        type: 'slice',\n        cell: beginCell()\n          .storeAddress(owner)\n          .endCell(),\n      },\n    ]);\n    return res.stack.readAddress();\n  }\n\n  async getNFTAddressByIndex(\n    provider: ContractProvider,\n    index: bigint\n  ): Promise<Address> {\n    const res = await provider.get('get_nft_address_by_index', [\n      { type: 'int', value: BigInt(index) },\n    ]);\n    return res.stack.readAddress();\n  }\n\n  async getNFTCollectionContent(provider: ContractProvider) {\n    const res = await provider.get('get_collection_data', []);\n    return {\n      nftv3item_counter: res.stack.readBigNumber(),\n      nftv3_content: res.stack.readCell(),\n      router_address: res.stack.readAddress(),\n    };\n  }\n\n  async getNFTContent(\n    provider: ContractProvider,\n    index: bigint,\n    nftItemContent: Cell\n  ): Promise<Cell> {\n    const res = await provider.get('get_nft_content', [\n      { type: 'int', value: BigInt(index) },\n      { type: 'cell', cell: nftItemContent },\n    ]);\n    return res.stack.readCell();\n  }\n\n  /* Access code of subcontracts */\n  async getChildContracts(provider: ContractProvider) {\n    const { stack } = await provider.get('getChildContracts', []);\n    return {\n      accountCode: stack.readCell(),\n      positionNFTCode: stack.readCell(),\n      nftCollectionContent: stack.readCell(),\n      nftItemContent: stack.readCell(),\n    };\n  }\n}\n","import { Address, Cell, beginCell } from '@ton/core';\nimport {\n  PoolV3Contract,\n  PoolV3ContractConfig,\n  poolv3ContractConfigToCell,\n} from '../contracts/PoolV3Contract';\nimport { ROUTER } from '../constants/addresses';\nimport {\n  ACCOUNTV3_CODE,\n  POOLV3_CODE,\n  POSITIONV3_CODE,\n} from '../constants/code';\n\nexport function packPoolData(\n  jetton0Wallet: Address,\n  jetton1Wallet: Address,\n  accountV3Code: Cell,\n  positionNftV3Code: Cell,\n  routerAddress: Address\n): Cell {\n  const config = {\n    router_address: routerAddress,\n\n    jetton0_wallet: jetton0Wallet,\n    jetton1_wallet: jetton1Wallet,\n\n    accountv3_code: accountV3Code,\n    position_nftv3_code: positionNftV3Code,\n  };\n  return poolv3ContractConfigToCell(config as PoolV3ContractConfig);\n}\n\nexport function calculatePoolStateInit(\n  jetton0Address: Address,\n  jetton1Address: Address,\n  poolCode: Cell,\n  accountV3Code: Cell,\n  positionNftV3Code: Cell,\n  routerAddress: Address\n): Cell {\n  let poolData: Cell;\n  if (PoolV3Contract.orderJettonId(jetton0Address, jetton1Address)) {\n    poolData = packPoolData(\n      jetton0Address,\n      jetton1Address,\n      accountV3Code,\n      positionNftV3Code,\n      routerAddress\n    );\n  } else {\n    poolData = packPoolData(\n      jetton1Address,\n      jetton0Address,\n      accountV3Code,\n      positionNftV3Code,\n      routerAddress\n    );\n  }\n\n  return beginCell()\n    .storeUint(0, 2)\n    .storeMaybeRef(poolCode)\n    .storeMaybeRef(poolData)\n    .storeUint(0, 1)\n    .endCell();\n}\n\nfunction calculateAddress(stateInit: Cell, workchain: number): Address {\n  return new Address(workchain, stateInit.hash());\n}\n\nexport function computePoolAddress(\n  jettonWallet0: Address,\n  jettonWallet1: Address\n): Address {\n  const routerAddress = Address.parse(ROUTER);\n\n  const stateInit = calculatePoolStateInit(\n    jettonWallet0,\n    jettonWallet1,\n    POOLV3_CODE,\n    ACCOUNTV3_CODE,\n    POSITIONV3_CODE,\n    routerAddress\n  );\n  return calculateAddress(stateInit, routerAddress.workChain);\n}\n","import JSBI from 'jsbi';\nimport invariant from 'tiny-invariant';\nimport { Address } from '@ton/core';\nimport { NoTickDataProvider, TickDataProvider } from './tickDataProvider';\nimport { BigintIsh } from '../types/BigIntish';\nimport { Jetton } from './Jetton';\nimport { Tick, TickConstructorArgs } from './tick';\nimport { TickMath } from '../utils/tickMath';\nimport { TickListDataProvider } from './tickListDataProvider';\nimport { ADDRESS_ZERO, NEGATIVE_ONE, ONE, Q192, ZERO } from '../constants';\nimport { JettonAmount } from './JettonAmount';\nimport { SwapMath } from '../utils/swapMath';\nimport { LiquidityMath } from '../utils/liquidityMath';\nimport { Price } from './Price';\nimport { computePoolAddress } from '../functions/computePoolAddress';\n\ninterface StepComputations {\n  sqrtPriceStartX96: JSBI;\n  tickNext: number;\n  initialized: boolean;\n  sqrtPriceNextX96: JSBI;\n  amountIn: JSBI;\n  amountOut: JSBI;\n  feeAmount: JSBI;\n}\n\n/**\n * By default, pools will not allow operations that require ticks.\n */\nconst NO_TICK_DATA_PROVIDER_DEFAULT = new NoTickDataProvider();\n\n/**\n * Represents a V3 pool\n */\nexport class Pool {\n  public readonly jetton0: Jetton;\n\n  public readonly jetton1: Jetton;\n\n  public readonly fee: number;\n\n  public readonly sqrtRatioX96: JSBI;\n\n  public readonly liquidity: JSBI;\n\n  public readonly tickCurrent: number;\n\n  public readonly tickDataProvider: TickDataProvider;\n\n  public readonly _tickSpacing: number;\n\n  /**\n   * Jetton Wallet addreses attached to the Router\n   */\n  public readonly jetton0_wallet?: string;\n\n  public readonly jetton1_wallet?: string;\n\n  /**\n   * Construct a pool\n   * @param tokenA One of the tokens in the pool\n   * @param tokenB The other token in the pool\n   * @param fee The fee in hundredths of a bips of the input amount of every swap that is collected by the pool\n   * @param sqrtRatioX96 The sqrt of the current ratio of amounts of token1 to token0\n   * @param liquidity The current value of in range liquidity\n   * @param tickCurrent The current tick of the pool\n   * @param ticks The current state of the pool ticks or a data provider that can return tick data\n   * @param _tickSpacing The spacing between ticks\n   */\n  public constructor(\n    jettonA: Jetton,\n    jettonB: Jetton,\n    fee: number,\n    sqrtRatioX96: BigintIsh,\n    liquidity: BigintIsh,\n    tickCurrent: number,\n    _tickSpacing: number,\n    ticks:\n      | TickDataProvider\n      | (Tick | TickConstructorArgs)[] = NO_TICK_DATA_PROVIDER_DEFAULT,\n    jetton0_wallet?: string,\n    jetton1_wallet?: string\n  ) {\n    invariant(Number.isInteger(fee) && fee < 1_000_000, 'FEE');\n\n    const tickCurrentSqrtRatioX96 = TickMath.getSqrtRatioAtTick(tickCurrent);\n    const nextTickSqrtRatioX96 = TickMath.getSqrtRatioAtTick(tickCurrent + 1);\n    invariant(\n      JSBI.greaterThanOrEqual(\n        JSBI.BigInt(sqrtRatioX96),\n        tickCurrentSqrtRatioX96\n      ) &&\n        JSBI.lessThanOrEqual(JSBI.BigInt(sqrtRatioX96), nextTickSqrtRatioX96),\n      'PRICE_BOUNDS'\n    );\n\n    // always create a copy of the list since we want the pool's tick list to be immutable\n    [this.jetton0, this.jetton1] = [jettonA, jettonB];\n    [this.jetton0_wallet, this.jetton1_wallet] = [\n      jetton0_wallet,\n      jetton1_wallet,\n    ];\n    this.fee = fee;\n    this.sqrtRatioX96 = JSBI.BigInt(sqrtRatioX96);\n    this.liquidity = JSBI.BigInt(liquidity);\n    this.tickCurrent = tickCurrent;\n    this.tickDataProvider = Array.isArray(ticks)\n      ? new TickListDataProvider(ticks, _tickSpacing)\n      : ticks;\n    this._tickSpacing = _tickSpacing;\n  }\n\n  private _jetton0Price?: Price<Jetton, Jetton>;\n\n  /**\n   * Returns the current mid price of the pool in terms of token0, i.e. the ratio of token1 over token0\n   */\n  public get jetton0Price(): Price<Jetton, Jetton> {\n    return (\n      this._jetton0Price ??\n      (this._jetton0Price = new Price(\n        this.jetton0,\n        this.jetton1,\n        Q192,\n        JSBI.multiply(this.sqrtRatioX96, this.sqrtRatioX96)\n      ))\n    );\n  }\n\n  private _jetton1Price?: Price<Jetton, Jetton>;\n\n  /**\n   * Returns the current mid price of the pool in terms of token1, i.e. the ratio of token0 over token1\n   */\n  public get jetton1Price(): Price<Jetton, Jetton> {\n    return (\n      this._jetton1Price ??\n      (this._jetton1Price = new Price(\n        this.jetton1,\n        this.jetton0,\n        JSBI.multiply(this.sqrtRatioX96, this.sqrtRatioX96),\n        Q192\n      ))\n    );\n  }\n\n  public get tickSpacing(): number {\n    return this._tickSpacing;\n  }\n\n  public static getAddress(\n    token0_wallet: string | undefined,\n    token1_wallet: string | undefined\n  ) {\n    if (!token0_wallet || !token1_wallet) return Address.parse(ADDRESS_ZERO);\n    return computePoolAddress(\n      Address.parse(token0_wallet),\n      Address.parse(token1_wallet)\n    );\n  }\n\n  /**\n   * Returns true if the token is either token0 or token1\n   * @param token The token to check\n   * @returns True if token is either token0 or token\n   */\n  public involvesToken(jetton: Jetton): boolean {\n    return jetton.equals(this.jetton0) || jetton.equals(this.jetton1);\n  }\n\n  /**\n   * Return the price of the given token in terms of the other token in the pool.\n   * @param token The token to return price of\n   * @returns The price of the given token, in terms of the other.\n   */\n  public priceOf(jetton: Jetton): Price<Jetton, Jetton> {\n    invariant(this.involvesToken(jetton), 'TOKEN');\n    return jetton.equals(this.jetton0) ? this.jetton0Price : this.jetton1Price;\n  }\n\n  /**\n   * Given an input amount of a token, return the computed output amount, and a pool with state updated after the trade\n   * @param inputAmount The input amount for which to quote the output amount\n   * @param sqrtPriceLimitX96 The Q64.96 sqrt price limit\n   * @returns The output amount and the pool with updated state\n   */\n  public async getOutputAmount(\n    inputAmount: JettonAmount<Jetton>,\n    sqrtPriceLimitX96?: JSBI\n  ): Promise<[JettonAmount<Jetton>, Pool]> {\n    invariant(this.involvesToken(inputAmount.jetton), 'TOKEN');\n\n    const zeroForOne = inputAmount.jetton.equals(this.jetton0);\n\n    const {\n      amountCalculated: outputAmount,\n      sqrtRatioX96,\n      liquidity,\n      tickCurrent,\n    } = await this.swap(zeroForOne, inputAmount.quotient, sqrtPriceLimitX96);\n    const outputToken = zeroForOne ? this.jetton1 : this.jetton0;\n    return [\n      JettonAmount.fromRawAmount(\n        outputToken,\n        JSBI.multiply(outputAmount, NEGATIVE_ONE)\n      ),\n      new Pool(\n        this.jetton0,\n        this.jetton1,\n        this.fee,\n        sqrtRatioX96,\n        liquidity,\n        tickCurrent,\n        this.tickSpacing,\n        this.tickDataProvider\n      ),\n    ];\n  }\n\n  /**\n   * Given a desired output amount of a token, return the computed input amount and a pool with state updated after the trade\n   * @param outputAmount the output amount for which to quote the input amount\n   * @param sqrtPriceLimitX96 The Q64.96 sqrt price limit. If zero for one, the price cannot be less than this value after the swap. If one for zero, the price cannot be greater than this value after the swap\n   * @returns The input amount and the pool with updated state\n   */\n  public async getInputAmount(\n    outputAmount: JettonAmount<Jetton>,\n    sqrtPriceLimitX96?: JSBI\n  ): Promise<[JettonAmount<Jetton>, Pool]> {\n    invariant(this.involvesToken(outputAmount.jetton), 'TOKEN');\n\n    const zeroForOne = outputAmount.jetton.equals(this.jetton1);\n\n    const {\n      amountCalculated: inputAmount,\n      sqrtRatioX96,\n      liquidity,\n      tickCurrent,\n    } = await this.swap(\n      zeroForOne,\n      JSBI.multiply(outputAmount.quotient, NEGATIVE_ONE),\n      sqrtPriceLimitX96\n    );\n    const inputToken = zeroForOne ? this.jetton0 : this.jetton1;\n    return [\n      JettonAmount.fromRawAmount(inputToken, inputAmount),\n      new Pool(\n        this.jetton0,\n        this.jetton1,\n        this.fee,\n        sqrtRatioX96,\n        liquidity,\n        tickCurrent,\n        this.tickSpacing,\n        this.tickDataProvider\n      ),\n    ];\n  }\n\n  /**\n   * Executes a swap\n   * @param zeroForOne Whether the amount in is token0 or token1\n   * @param amountSpecified The amount of the swap, which implicitly configures the swap as exact input (positive), or exact output (negative)\n   * @param sqrtPriceLimitX96 The Q64.96 sqrt price limit. If zero for one, the price cannot be less than this value after the swap. If one for zero, the price cannot be greater than this value after the swap\n   * @returns amountCalculated\n   * @returns sqrtRatioX96\n   * @returns liquidity\n   * @returns tickCurrent\n   */\n  private async swap(\n    zeroForOne: boolean,\n    amountSpecified: JSBI,\n    sqrtPriceLimitX96?: JSBI\n  ): Promise<{\n    amountCalculated: JSBI;\n    sqrtRatioX96: JSBI;\n    liquidity: JSBI;\n    tickCurrent: number;\n  }> {\n    if (!sqrtPriceLimitX96)\n      sqrtPriceLimitX96 = zeroForOne\n        ? JSBI.add(TickMath.MIN_SQRT_RATIO, ONE)\n        : JSBI.subtract(TickMath.MAX_SQRT_RATIO, ONE);\n\n    if (zeroForOne) {\n      invariant(\n        JSBI.greaterThan(sqrtPriceLimitX96, TickMath.MIN_SQRT_RATIO),\n        'RATIO_MIN'\n      );\n      invariant(\n        JSBI.lessThan(sqrtPriceLimitX96, this.sqrtRatioX96),\n        'RATIO_CURRENT'\n      );\n    } else {\n      invariant(\n        JSBI.lessThan(sqrtPriceLimitX96, TickMath.MAX_SQRT_RATIO),\n        'RATIO_MAX'\n      );\n      invariant(\n        JSBI.greaterThan(sqrtPriceLimitX96, this.sqrtRatioX96),\n        'RATIO_CURRENT'\n      );\n    }\n\n    const exactInput = JSBI.greaterThanOrEqual(amountSpecified, ZERO);\n\n    // keep track of swap state\n\n    const state = {\n      amountSpecifiedRemaining: amountSpecified,\n      amountCalculated: ZERO,\n      sqrtPriceX96: this.sqrtRatioX96,\n      tick: this.tickCurrent,\n      liquidity: this.liquidity,\n    };\n\n    // start swap while loop\n    while (\n      JSBI.notEqual(state.amountSpecifiedRemaining, ZERO) &&\n      state.sqrtPriceX96 != sqrtPriceLimitX96\n    ) {\n      const step: Partial<StepComputations> = {};\n      step.sqrtPriceStartX96 = state.sqrtPriceX96;\n\n      // because each iteration of the while loop rounds, we can't optimize this code (relative to the smart contract)\n      // by simply traversing to the next available tick, we instead need to exactly replicate\n      // tickBitmap.nextInitializedTickWithinOneWord\n      [step.tickNext, step.initialized] =\n        await this.tickDataProvider.nextInitializedTickWithinOneWord(\n          state.tick,\n          zeroForOne,\n          this.tickSpacing\n        );\n\n      if (step.tickNext < TickMath.MIN_TICK) {\n        step.tickNext = TickMath.MIN_TICK;\n      } else if (step.tickNext > TickMath.MAX_TICK) {\n        step.tickNext = TickMath.MAX_TICK;\n      }\n\n      step.sqrtPriceNextX96 = TickMath.getSqrtRatioAtTick(step.tickNext);\n      [state.sqrtPriceX96, step.amountIn, step.amountOut, step.feeAmount] =\n        SwapMath.computeSwapStep(\n          state.sqrtPriceX96,\n          (\n            zeroForOne\n              ? JSBI.lessThan(step.sqrtPriceNextX96, sqrtPriceLimitX96)\n              : JSBI.greaterThan(step.sqrtPriceNextX96, sqrtPriceLimitX96)\n          )\n            ? sqrtPriceLimitX96\n            : step.sqrtPriceNextX96,\n          state.liquidity,\n          state.amountSpecifiedRemaining,\n          this.fee\n        );\n\n      if (exactInput) {\n        state.amountSpecifiedRemaining = JSBI.subtract(\n          state.amountSpecifiedRemaining,\n          JSBI.add(step.amountIn, step.feeAmount)\n        );\n        state.amountCalculated = JSBI.subtract(\n          state.amountCalculated,\n          step.amountOut\n        );\n      } else {\n        state.amountSpecifiedRemaining = JSBI.add(\n          state.amountSpecifiedRemaining,\n          step.amountOut\n        );\n        state.amountCalculated = JSBI.add(\n          state.amountCalculated,\n          JSBI.add(step.amountIn, step.feeAmount)\n        );\n      }\n\n      // TODO\n      if (JSBI.equal(state.sqrtPriceX96, step.sqrtPriceNextX96)) {\n        // if the tick is initialized, run the tick transition\n        if (step.initialized) {\n          let liquidityNet = JSBI.BigInt(\n            (await this.tickDataProvider.getTick(step.tickNext)).liquidityNet\n          );\n          // if we're moving leftward, we interpret liquidityNet as the opposite sign\n          // safe because liquidityNet cannot be type(int128).min\n          if (zeroForOne)\n            liquidityNet = JSBI.multiply(liquidityNet, NEGATIVE_ONE);\n\n          state.liquidity = LiquidityMath.addDelta(\n            state.liquidity,\n            liquidityNet\n          );\n        }\n\n        state.tick = zeroForOne ? step.tickNext - 1 : step.tickNext;\n      } else if (state.sqrtPriceX96 != step.sqrtPriceStartX96) {\n        // recompute unless we're on a lower tick boundary (i.e. already transitioned ticks), and haven't moved\n        state.tick = TickMath.getTickAtSqrtRatio(state.sqrtPriceX96);\n      }\n    }\n\n    return {\n      amountCalculated: state.amountCalculated,\n      sqrtRatioX96: state.sqrtPriceX96,\n      liquidity: state.liquidity,\n      tickCurrent: state.tick,\n    };\n  }\n}\n","import JSBI from 'jsbi';\nimport invariant from 'tiny-invariant';\n\nexport const MAX_SAFE_INTEGER = JSBI.BigInt(Number.MAX_SAFE_INTEGER);\n\nconst ZERO = JSBI.BigInt(0);\nconst ONE = JSBI.BigInt(1);\nconst TWO = JSBI.BigInt(2);\n\n/**\n * Computes floor(sqrt(value))\n * @param value the value for which to compute the square root, rounded down\n */\nexport function sqrt(value: JSBI): JSBI {\n  invariant(JSBI.greaterThanOrEqual(value, ZERO), 'NEGATIVE');\n\n  // rely on built in sqrt if possible\n  if (JSBI.lessThan(value, MAX_SAFE_INTEGER)) {\n    return JSBI.BigInt(Math.floor(Math.sqrt(JSBI.toNumber(value))));\n  }\n\n  let z: JSBI;\n  let x: JSBI;\n  z = value;\n  x = JSBI.add(JSBI.divide(value, TWO), ONE);\n  while (JSBI.lessThan(x, z)) {\n    z = x;\n    x = JSBI.divide(JSBI.add(JSBI.divide(value, x), x), TWO);\n  }\n  return z;\n}\n","import JSBI from 'jsbi';\nimport { BigintIsh } from '../types/BigIntish';\nimport { sqrt } from './sqrt';\n\n/**\n * Returns the sqrt ratio as a Q64.96 corresponding to a given ratio of amount1 and amount0\n * @param amount1 The numerator amount i.e., the amount of token1\n * @param amount0 The denominator amount i.e., the amount of token0\n * @returns The sqrt ratio\n */\n\nexport function encodeSqrtRatioX96(\n  amount1: BigintIsh,\n  amount0: BigintIsh\n): JSBI {\n  const numerator = JSBI.leftShift(JSBI.BigInt(amount1), JSBI.BigInt(192));\n  const denominator = JSBI.BigInt(amount0);\n  const ratioX192 = JSBI.divide(numerator, denominator);\n  return sqrt(ratioX192);\n}\n","import JSBI from 'jsbi';\nimport { Q192 } from '../constants/internalConstants';\nimport { encodeSqrtRatioX96 } from './encodeSqrtRatioX96';\nimport { TickMath } from './tickMath';\nimport { Jetton } from '../entities/Jetton';\nimport { Price } from '../entities/Price';\n\n/**\n * Returns a price object corresponding to the input tick and the base/quote token\n * Inputs must be tokens because the address order is used to interpret the price represented by the tick\n * @param baseToken the base token of the price\n * @param quoteToken the quote token of the price\n * @param tick the tick for which to return the price\n */\nexport function tickToPrice(\n  baseToken: Jetton,\n  quoteToken: Jetton,\n  tick: number,\n  isSorted: boolean = true\n): Price<Jetton, Jetton> {\n  const sqrtRatioX96 = TickMath.getSqrtRatioAtTick(tick);\n\n  const ratioX192 = JSBI.multiply(sqrtRatioX96, sqrtRatioX96);\n\n  // return new Price(baseToken, quoteToken, Q192, ratioX192);\n\n  return isSorted\n    ? new Price(baseToken, quoteToken, Q192, ratioX192)\n    : new Price(baseToken, quoteToken, ratioX192, Q192);\n}\n\n/**\n * Returns the first tick for which the given price is greater than or equal to the tick price\n * @param price for which to return the closest tick that represents a price less than or equal to the input price,\n * i.e. the price of the returned tick is less than or equal to the input price\n */\nexport function priceToClosestTick(price: Price<Jetton, Jetton>): number {\n  // const sorted = price.baseCurrency.sortsBefore(price.quoteCurrency);\n\n  const sorted = true;\n\n  const sqrtRatioX96 = sorted\n    ? encodeSqrtRatioX96(price.numerator, price.denominator)\n    : encodeSqrtRatioX96(price.denominator, price.numerator);\n\n  let tick = TickMath.getTickAtSqrtRatio(sqrtRatioX96);\n  const nextTickPrice = tickToPrice(\n    price.baseCurrency,\n    price.quoteCurrency,\n    tick + 1\n  );\n  if (sorted) {\n    if (!price.lessThan(nextTickPrice)) {\n      tick++;\n    }\n  } else if (!price.greaterThan(nextTickPrice)) {\n    tick++;\n  }\n  return tick;\n}\n","import JSBI from 'jsbi';\nimport { BigintIsh } from '../types/BigIntish';\nimport { Q96 } from '../constants/internalConstants';\n\n/**\n * Returns an imprecise maximum amount of liquidity received for a given amount of token 0.\n * This function is available to accommodate LiquidityAmounts#getLiquidityForAmount0 in the v3 periphery,\n * which could be more precise by at least 32 bits by dividing by Q64 instead of Q96 in the intermediate step,\n * and shifting the subtracted ratio left by 32 bits. This imprecise calculation will likely be replaced in a future\n * v3 router contract.\n * @param sqrtRatioAX96 The price at the lower boundary\n * @param sqrtRatioBX96 The price at the upper boundary\n * @param amount0 The token0 amount\n * @returns liquidity for amount0, imprecise\n */\nfunction maxLiquidityForAmount0Imprecise(\n  sqrtRatioAX96: JSBI,\n  sqrtRatioBX96: JSBI,\n  amount0: BigintIsh\n): JSBI {\n  if (JSBI.greaterThan(sqrtRatioAX96, sqrtRatioBX96)) {\n    [sqrtRatioAX96, sqrtRatioBX96] = [sqrtRatioBX96, sqrtRatioAX96];\n  }\n  const intermediate = JSBI.divide(\n    JSBI.multiply(sqrtRatioAX96, sqrtRatioBX96),\n    Q96\n  );\n  return JSBI.divide(\n    JSBI.multiply(JSBI.BigInt(amount0), intermediate),\n    JSBI.subtract(sqrtRatioBX96, sqrtRatioAX96)\n  );\n}\n\n/**\n * Returns a precise maximum amount of liquidity received for a given amount of token 0 by dividing by Q64 instead of Q96 in the intermediate step,\n * and shifting the subtracted ratio left by 32 bits.\n * @param sqrtRatioAX96 The price at the lower boundary\n * @param sqrtRatioBX96 The price at the upper boundary\n * @param amount0 The token0 amount\n * @returns liquidity for amount0, precise\n */\nfunction maxLiquidityForAmount0Precise(\n  sqrtRatioAX96: JSBI,\n  sqrtRatioBX96: JSBI,\n  amount0: BigintIsh\n): JSBI {\n  if (JSBI.greaterThan(sqrtRatioAX96, sqrtRatioBX96)) {\n    [sqrtRatioAX96, sqrtRatioBX96] = [sqrtRatioBX96, sqrtRatioAX96];\n  }\n\n  const numerator = JSBI.multiply(\n    JSBI.multiply(JSBI.BigInt(amount0), sqrtRatioAX96),\n    sqrtRatioBX96\n  );\n  const denominator = JSBI.multiply(\n    Q96,\n    JSBI.subtract(sqrtRatioBX96, sqrtRatioAX96)\n  );\n\n  return JSBI.divide(numerator, denominator);\n}\n\n/**\n * Computes the maximum amount of liquidity received for a given amount of token1\n * @param sqrtRatioAX96 The price at the lower tick boundary\n * @param sqrtRatioBX96 The price at the upper tick boundary\n * @param amount1 The token1 amount\n * @returns liquidity for amount1\n */\nfunction maxLiquidityForAmount1(\n  sqrtRatioAX96: JSBI,\n  sqrtRatioBX96: JSBI,\n  amount1: BigintIsh\n): JSBI {\n  if (JSBI.greaterThan(sqrtRatioAX96, sqrtRatioBX96)) {\n    [sqrtRatioAX96, sqrtRatioBX96] = [sqrtRatioBX96, sqrtRatioAX96];\n  }\n  return JSBI.divide(\n    JSBI.multiply(JSBI.BigInt(amount1), Q96),\n    JSBI.subtract(sqrtRatioBX96, sqrtRatioAX96)\n  );\n}\n\n/**\n * Computes the maximum amount of liquidity received for a given amount of token0, token1,\n * and the prices at the tick boundaries.\n * @param sqrtRatioCurrentX96 the current price\n * @param sqrtRatioAX96 price at lower boundary\n * @param sqrtRatioBX96 price at upper boundary\n * @param amount0 token0 amount\n * @param amount1 token1 amount\n * @param useFullPrecision if false, liquidity will be maximized according to what the router can calculate,\n * not what core can theoretically support\n */\nexport function maxLiquidityForAmounts(\n  sqrtRatioCurrentX96: JSBI,\n  sqrtRatioAX96: JSBI,\n  sqrtRatioBX96: JSBI,\n  amount0: BigintIsh,\n  amount1: BigintIsh,\n  useFullPrecision: boolean\n): JSBI {\n  if (JSBI.greaterThan(sqrtRatioAX96, sqrtRatioBX96)) {\n    [sqrtRatioAX96, sqrtRatioBX96] = [sqrtRatioBX96, sqrtRatioAX96];\n  }\n\n  const maxLiquidityForAmount0 = useFullPrecision\n    ? maxLiquidityForAmount0Precise\n    : maxLiquidityForAmount0Imprecise;\n\n  if (JSBI.lessThanOrEqual(sqrtRatioCurrentX96, sqrtRatioAX96)) {\n    return maxLiquidityForAmount0(sqrtRatioAX96, sqrtRatioBX96, amount0);\n  }\n  if (JSBI.lessThan(sqrtRatioCurrentX96, sqrtRatioBX96)) {\n    const liquidity0 = maxLiquidityForAmount0(\n      sqrtRatioCurrentX96,\n      sqrtRatioBX96,\n      amount0\n    );\n    const liquidity1 = maxLiquidityForAmount1(\n      sqrtRatioAX96,\n      sqrtRatioCurrentX96,\n      amount1\n    );\n    return JSBI.lessThan(liquidity0, liquidity1) ? liquidity0 : liquidity1;\n  }\n  return maxLiquidityForAmount1(sqrtRatioAX96, sqrtRatioBX96, amount1);\n}\n","import JSBI from 'jsbi';\nimport { BigintIsh } from '../types/BigIntish';\nimport { Fraction } from './Fraction';\nimport { Rounding } from '../enums/rounding';\n\nconst ONE_HUNDRED = new Fraction(JSBI.BigInt(100));\n\n/**\n * Converts a fraction to a percent\n * @param fraction the fraction to convert\n */\nfunction toPercent(fraction: Fraction): Percent {\n  return new Percent(fraction.numerator, fraction.denominator);\n}\n\nexport class Percent extends Fraction {\n  /**\n   * This boolean prevents a fraction from being interpreted as a Percent\n   */\n  public readonly isPercent: true = true;\n\n  public constructor(\n    numerator: BigintIsh,\n    denominator: BigintIsh = JSBI.BigInt(1)\n  ) {\n    super(numerator, denominator);\n  }\n\n  add(other: Fraction | BigintIsh): Percent {\n    return toPercent(super.add(other));\n  }\n\n  subtract(other: Fraction | BigintIsh): Percent {\n    return toPercent(super.subtract(other));\n  }\n\n  multiply(other: Fraction | BigintIsh): Percent {\n    return toPercent(super.multiply(other));\n  }\n\n  divide(other: Fraction | BigintIsh): Percent {\n    return toPercent(super.divide(other));\n  }\n\n  public toSignificant(\n    significantDigits: number = 5,\n    format?: object,\n    rounding?: Rounding\n  ): string {\n    return super\n      .multiply(ONE_HUNDRED)\n      .toSignificant(significantDigits, format, rounding);\n  }\n\n  public toFixed(\n    decimalPlaces: number = 2,\n    format?: object,\n    rounding?: Rounding\n  ): string {\n    return super.multiply(ONE_HUNDRED).toFixed(decimalPlaces, format, rounding);\n  }\n}\n","import JSBI from 'jsbi';\nimport invariant from 'tiny-invariant';\nimport { BigintIsh } from '../types/BigIntish';\nimport { MaxUint256, ZERO } from '../constants/internalConstants';\nimport { tickToPrice } from '../utils/priceTickConversions';\nimport { SqrtPriceMath } from '../utils/sqrtPriceMath';\nimport { TickMath } from '../utils/tickMath';\nimport { encodeSqrtRatioX96 } from '../utils/encodeSqrtRatioX96';\nimport { Pool } from './Pool';\nimport { JettonAmount } from './JettonAmount';\nimport { Jetton } from './Jetton';\nimport { Price } from './Price';\nimport { maxLiquidityForAmounts } from '../utils/maxLiquidityForAmounts';\nimport { Percent } from './Percent';\n\ninterface PositionConstructorArgs {\n  pool: Pool;\n  tickLower: number;\n  tickUpper: number;\n  liquidity: BigintIsh;\n}\n\n/**\n * Represents a position on a Algebra Pool\n */\nexport class Position {\n  public readonly pool: Pool;\n\n  public readonly tickLower: number;\n\n  public readonly tickUpper: number;\n\n  public readonly liquidity: JSBI;\n\n  // cached resuts for the getters\n  private _token0Amount: JettonAmount<Jetton> | null = null;\n\n  private _token1Amount: JettonAmount<Jetton> | null = null;\n\n  /**\n   * Constructs a position for a given pool with the given liquidity\n   * @param pool For which pool the liquidity is assigned\n   * @param liquidity The amount of liquidity that is in the position\n   * @param tickLower The lower tick of the position\n   * @param tickUpper The upper tick of the position\n   */\n  public constructor({\n    pool,\n    liquidity,\n    tickLower,\n    tickUpper,\n  }: PositionConstructorArgs) {\n    invariant(tickLower < tickUpper, 'TICK_ORDER');\n    invariant(\n      tickLower >= TickMath.MIN_TICK && tickLower % pool.tickSpacing === 0,\n      'TICK_LOWER'\n    );\n    invariant(\n      tickUpper <= TickMath.MAX_TICK && tickUpper % pool.tickSpacing === 0,\n      'TICK_UPPER'\n    );\n\n    this.pool = pool;\n    this.tickLower = tickLower;\n    this.tickUpper = tickUpper;\n    this.liquidity = JSBI.BigInt(liquidity);\n  }\n\n  private _mintAmounts: Readonly<{ amount0: JSBI; amount1: JSBI }> | null =\n    null;\n\n  /**\n   * Returns the minimum amounts that must be sent in order to mint the amount of liquidity held by the position at\n   * the current price for the pool\n   */\n  public get mintAmounts(): Readonly<{ amount0: JSBI; amount1: JSBI }> {\n    if (this._mintAmounts === null) {\n      if (this.pool.tickCurrent < this.tickLower) {\n        return {\n          amount0: SqrtPriceMath.getAmount0Delta(\n            TickMath.getSqrtRatioAtTick(this.tickLower),\n            TickMath.getSqrtRatioAtTick(this.tickUpper),\n            this.liquidity,\n            true\n          ),\n          amount1: ZERO,\n        };\n      }\n      if (this.pool.tickCurrent < this.tickUpper) {\n        return {\n          amount0: SqrtPriceMath.getAmount0Delta(\n            this.pool.sqrtRatioX96,\n            TickMath.getSqrtRatioAtTick(this.tickUpper),\n            this.liquidity,\n            true\n          ),\n          amount1: SqrtPriceMath.getAmount1Delta(\n            TickMath.getSqrtRatioAtTick(this.tickLower),\n            this.pool.sqrtRatioX96,\n            this.liquidity,\n            true\n          ),\n        };\n      }\n      return {\n        amount0: ZERO,\n        amount1: SqrtPriceMath.getAmount1Delta(\n          TickMath.getSqrtRatioAtTick(this.tickLower),\n          TickMath.getSqrtRatioAtTick(this.tickUpper),\n          this.liquidity,\n          true\n        ),\n      };\n    }\n    return this._mintAmounts;\n  }\n\n  /**\n   * Returns the price of token0 at the lower tick\n   */\n  public get token0PriceLower(): Price<Jetton, Jetton> {\n    return tickToPrice(this.pool.jetton0, this.pool.jetton1, this.tickLower);\n  }\n\n  /**\n   * Returns the price of token0 at the upper tick\n   */\n  public get token0PriceUpper(): Price<Jetton, Jetton> {\n    return tickToPrice(this.pool.jetton0, this.pool.jetton1, this.tickUpper);\n  }\n\n  /**\n   * Returns the amount of token0 that this position's liquidity could be burned for at the current pool price\n   */\n  public get amount0(): JettonAmount<Jetton> {\n    if (this._token0Amount === null) {\n      if (this.pool.tickCurrent < this.tickLower) {\n        this._token0Amount = JettonAmount.fromRawAmount(\n          this.pool.jetton0,\n          SqrtPriceMath.getAmount0Delta(\n            TickMath.getSqrtRatioAtTick(this.tickLower),\n            TickMath.getSqrtRatioAtTick(this.tickUpper),\n            this.liquidity,\n            false\n          )\n        );\n      } else if (this.pool.tickCurrent < this.tickUpper) {\n        this._token0Amount = JettonAmount.fromRawAmount(\n          this.pool.jetton0,\n          SqrtPriceMath.getAmount0Delta(\n            this.pool.sqrtRatioX96,\n            TickMath.getSqrtRatioAtTick(this.tickUpper),\n            this.liquidity,\n            false\n          )\n        );\n      } else {\n        this._token0Amount = JettonAmount.fromRawAmount(\n          this.pool.jetton0,\n          ZERO\n        );\n      }\n    }\n    return this._token0Amount;\n  }\n\n  /**\n   * Returns the amount of token1 that this position's liquidity could be burned for at the current pool price\n   */\n  public get amount1(): JettonAmount<Jetton> {\n    if (this._token1Amount === null) {\n      if (this.pool.tickCurrent < this.tickLower) {\n        this._token1Amount = JettonAmount.fromRawAmount(\n          this.pool.jetton1,\n          ZERO\n        );\n      } else if (this.pool.tickCurrent < this.tickUpper) {\n        this._token1Amount = JettonAmount.fromRawAmount(\n          this.pool.jetton1,\n          SqrtPriceMath.getAmount1Delta(\n            TickMath.getSqrtRatioAtTick(this.tickLower),\n            this.pool.sqrtRatioX96,\n            this.liquidity,\n            false\n          )\n        );\n      } else {\n        this._token1Amount = JettonAmount.fromRawAmount(\n          this.pool.jetton1,\n          SqrtPriceMath.getAmount1Delta(\n            TickMath.getSqrtRatioAtTick(this.tickLower),\n            TickMath.getSqrtRatioAtTick(this.tickUpper),\n            this.liquidity,\n            false\n          )\n        );\n      }\n    }\n    return this._token1Amount;\n  }\n\n  /**\n   * Computes the maximum amount of liquidity received for a given amount of token0, token1,\n   * and the prices at the tick boundaries.\n   * @param pool The pool for which the position should be created\n   * @param tickLower The lower tick of the position\n   * @param tickUpper The upper tick of the position\n   * @param amount0 token0 amount\n   * @param amount1 token1 amount\n   * @param useFullPrecision If false, liquidity will be maximized according to what the router can calculate,\n   * not what core can theoretically support\n   * @returns The amount of liquidity for the position\n   */\n  public static fromAmounts({\n    pool,\n    tickLower,\n    tickUpper,\n    amount0,\n    amount1,\n    useFullPrecision,\n  }: {\n    pool: Pool;\n    tickLower: number;\n    tickUpper: number;\n    amount0: BigintIsh;\n    amount1: BigintIsh;\n    useFullPrecision: boolean;\n  }) {\n    const sqrtRatioAX96 = TickMath.getSqrtRatioAtTick(tickLower);\n    const sqrtRatioBX96 = TickMath.getSqrtRatioAtTick(tickUpper);\n    return new Position({\n      pool,\n      tickLower,\n      tickUpper,\n      liquidity: maxLiquidityForAmounts(\n        pool.sqrtRatioX96,\n        sqrtRatioAX96,\n        sqrtRatioBX96,\n        amount0,\n        amount1,\n        useFullPrecision\n      ),\n    });\n  }\n\n  /**\n   * Computes a position with the maximum amount of liquidity received for a given amount of token0, assuming an unlimited amount of token1\n   * @param pool The pool for which the position is created\n   * @param tickLower The lower tick\n   * @param tickUpper The upper tick\n   * @param amount0 The desired amount of token0\n   * @param useFullPrecision If true, liquidity will be maximized according to what the router can calculate,\n   * not what core can theoretically support\n   * @returns The position\n   */\n  public static fromAmount0({\n    pool,\n    tickLower,\n    tickUpper,\n    amount0,\n    useFullPrecision,\n  }: {\n    pool: Pool;\n    tickLower: number;\n    tickUpper: number;\n    amount0: BigintIsh;\n    useFullPrecision: boolean;\n  }) {\n    return Position.fromAmounts({\n      pool,\n      tickLower,\n      tickUpper,\n      amount0,\n      amount1: MaxUint256,\n      useFullPrecision,\n    });\n  }\n\n  /**\n   * Computes a position with the maximum amount of liquidity received for a given amount of token1, assuming an unlimited amount of token0\n   * @param pool The pool for which the position is created\n   * @param tickLower The lower tick\n   * @param tickUpper The upper tick\n   * @param amount1 The desired amount of token1\n   * @returns The position\n   */\n  public static fromAmount1({\n    pool,\n    tickLower,\n    tickUpper,\n    amount1,\n  }: {\n    pool: Pool;\n    tickLower: number;\n    tickUpper: number;\n    amount1: BigintIsh;\n  }) {\n    // this function always uses full precision,\n    return Position.fromAmounts({\n      pool,\n      tickLower,\n      tickUpper,\n      amount0: MaxUint256,\n      amount1,\n      useFullPrecision: true,\n    });\n  }\n\n  /**\n   * Returns the minimum amounts that must be sent in order to safely mint the amount of liquidity held by the position\n   * with the given slippage tolerance\n   * @param slippageTolerance Tolerance of unfavorable slippage from the current price\n   * @returns The amounts, with slippage\n   */\n  public mintAmountsWithSlippage(\n    slippageTolerance: Percent\n  ): Readonly<{ amount0: JSBI; amount1: JSBI }> {\n    // get lower/upper prices\n    const { sqrtRatioX96Upper, sqrtRatioX96Lower } =\n      this.ratiosAfterSlippage(slippageTolerance);\n\n    // construct counterfactual pools\n    const poolLower = new Pool(\n      this.pool.jetton0,\n      this.pool.jetton1,\n      this.pool.fee,\n      sqrtRatioX96Lower,\n      0 /* liquidity doesn't matter */,\n      TickMath.getTickAtSqrtRatio(sqrtRatioX96Lower),\n      this.pool.tickSpacing\n    );\n    const poolUpper = new Pool(\n      this.pool.jetton0,\n      this.pool.jetton1,\n      this.pool.fee,\n      sqrtRatioX96Upper,\n      0 /* liquidity doesn't matter */,\n      TickMath.getTickAtSqrtRatio(sqrtRatioX96Upper),\n      this.pool.tickSpacing\n    );\n\n    // because the router is imprecise, we need to calculate the position that will be created (assuming no slippage)\n    const positionThatWillBeCreated = Position.fromAmounts({\n      pool: this.pool,\n      tickLower: this.tickLower,\n      tickUpper: this.tickUpper,\n      ...this.mintAmounts, // the mint amounts are what will be passed as calldata\n      useFullPrecision: false,\n    });\n\n    // we want the smaller amounts...\n    // ...which occurs at the upper price for amount0...\n    const { amount0 } = new Position({\n      pool: poolUpper,\n      liquidity: positionThatWillBeCreated.liquidity,\n      tickLower: this.tickLower,\n      tickUpper: this.tickUpper,\n    }).mintAmounts;\n    // ...and the lower for amount1\n    const { amount1 } = new Position({\n      pool: poolLower,\n      liquidity: positionThatWillBeCreated.liquidity,\n      tickLower: this.tickLower,\n      tickUpper: this.tickUpper,\n    }).mintAmounts;\n\n    return { amount0, amount1 };\n  }\n\n  /**\n   * Returns the minimum amounts that should be requested in order to safely burn the amount of liquidity held by the\n   * position with the given slippage tolerance\n   * @param slippageTolerance tolerance of unfavorable slippage from the current price\n   * @returns The amounts, with slippage\n   */\n  public burnAmountsWithSlippage(\n    slippageTolerance: Percent\n  ): Readonly<{ amount0: JSBI; amount1: JSBI }> {\n    // get lower/upper prices\n    const { sqrtRatioX96Upper, sqrtRatioX96Lower } =\n      this.ratiosAfterSlippage(slippageTolerance);\n\n    // construct counterfactual pools\n    const poolLower = new Pool(\n      this.pool.jetton0,\n      this.pool.jetton1,\n      this.pool.fee,\n      sqrtRatioX96Lower,\n      0 /* liquidity doesn't matter */,\n      TickMath.getTickAtSqrtRatio(sqrtRatioX96Lower),\n      this.pool.tickSpacing\n    );\n    const poolUpper = new Pool(\n      this.pool.jetton0,\n      this.pool.jetton1,\n      this.pool.fee,\n      sqrtRatioX96Upper,\n      0 /* liquidity doesn't matter */,\n      TickMath.getTickAtSqrtRatio(sqrtRatioX96Upper),\n      this.pool.tickSpacing\n    );\n\n    // we want the smaller amounts...\n    // ...which occurs at the upper price for amount0...\n    const amount0 = new Position({\n      pool: poolUpper,\n      liquidity: this.liquidity,\n      tickLower: this.tickLower,\n      tickUpper: this.tickUpper,\n    }).amount0;\n    // ...and the lower for amount1\n    const amount1 = new Position({\n      pool: poolLower,\n      liquidity: this.liquidity,\n      tickLower: this.tickLower,\n      tickUpper: this.tickUpper,\n    }).amount1;\n\n    return { amount0: amount0.quotient, amount1: amount1.quotient };\n  }\n\n  /**\n   * Returns the lower and upper sqrt ratios if the price 'slips' up to slippage tolerance percentage\n   * @param slippageTolerance The amount by which the price can 'slip' before the transaction will revert\n   * @returns The sqrt ratios after slippage\n   */\n  private ratiosAfterSlippage(slippageTolerance: Percent): {\n    sqrtRatioX96Lower: JSBI;\n    sqrtRatioX96Upper: JSBI;\n  } {\n    const priceLower = this.pool.jetton0Price.asFraction.multiply(\n      new Percent(1).subtract(slippageTolerance)\n    );\n    const priceUpper = this.pool.jetton0Price.asFraction.multiply(\n      slippageTolerance.add(1)\n    );\n    let sqrtRatioX96Lower = encodeSqrtRatioX96(\n      priceLower.numerator,\n      priceLower.denominator\n    );\n    if (JSBI.lessThanOrEqual(sqrtRatioX96Lower, TickMath.MIN_SQRT_RATIO)) {\n      sqrtRatioX96Lower = JSBI.add(TickMath.MIN_SQRT_RATIO, JSBI.BigInt(1));\n    }\n    let sqrtRatioX96Upper = encodeSqrtRatioX96(\n      priceUpper.numerator,\n      priceUpper.denominator\n    );\n    if (JSBI.greaterThanOrEqual(sqrtRatioX96Upper, TickMath.MAX_SQRT_RATIO)) {\n      sqrtRatioX96Upper = JSBI.subtract(\n        TickMath.MAX_SQRT_RATIO,\n        JSBI.BigInt(1)\n      );\n    }\n    return {\n      sqrtRatioX96Lower,\n      sqrtRatioX96Upper,\n    };\n  }\n}\n","import invariant from 'tiny-invariant';\nimport { Pool } from './Pool';\nimport { Jetton } from './Jetton';\nimport { Price } from './Price';\n\n/**\n * Represents a list of pools through which a swap can occur\n * @template TInput The input token\n * @template TOutput The output token\n */\nexport class Route<TInput extends Jetton, TOutput extends Jetton> {\n  public readonly pools: Pool[];\n\n  public readonly tokenPath: Jetton[];\n\n  public readonly input: TInput;\n\n  public readonly output: TOutput;\n\n  /**\n   * Creates an instance of route.\n   * @param pools An array of `Pool` objects, ordered by the route the swap will take\n   * @param input The input token\n   * @param output The output token\n   */\n  public constructor(pools: Pool[], input: TInput, output: TOutput) {\n    invariant(pools.length > 0, 'POOLS');\n\n    // const chainId = pools[0].chainId;\n    // const allOnSameChain = pools.every(pool => pool.chainId === chainId);\n    // invariant(allOnSameChain, 'CHAIN_IDS');\n\n    const wrappedInput = input;\n    invariant(pools[0].involvesToken(wrappedInput), 'INPUT');\n\n    invariant(pools[pools.length - 1].involvesToken(output), 'OUTPUT');\n\n    /**\n     * Normalizes token0-token1 order and selects the next token/fee step to add to the path\n     * */\n    const tokenPath: Jetton[] = [wrappedInput];\n    for (const [i, pool] of pools.entries()) {\n      const currentInputToken = tokenPath[i];\n      invariant(\n        currentInputToken.equals(pool.jetton0) ||\n          currentInputToken.equals(pool.jetton1),\n        'PATH'\n      );\n      const nextToken = currentInputToken.equals(pool.jetton0)\n        ? pool.jetton1\n        : pool.jetton0;\n      tokenPath.push(nextToken);\n    }\n\n    this.pools = pools;\n    this.tokenPath = tokenPath;\n    this.input = input;\n    this.output = output ?? tokenPath[tokenPath.length - 1];\n  }\n\n  private _midPrice: Price<TInput, TOutput> | null = null;\n\n  /**\n   * Returns the mid price of the route\n   */\n  public get midPrice(): Price<TInput, TOutput> {\n    if (this._midPrice !== null) return this._midPrice;\n\n    const price = this.pools.slice(1).reduce(\n      ({ nextInput, price }, pool) =>\n        nextInput.equals(pool.jetton0)\n          ? {\n              nextInput: pool.jetton1,\n              price: price.multiply(pool.jetton0Price),\n            }\n          : {\n              nextInput: pool.jetton0,\n              price: price.multiply(pool.jetton1Price),\n            },\n      this.pools[0].jetton0.equals(this.input)\n        ? {\n            nextInput: this.pools[0].jetton1,\n            price: this.pools[0].jetton0Price,\n          }\n        : {\n            nextInput: this.pools[0].jetton0,\n            price: this.pools[0].jetton1Price,\n          }\n    ).price;\n\n    return (this._midPrice = new Price(\n      this.input,\n      this.output,\n      price.denominator,\n      price.numerator\n    ));\n  }\n\n  // public get chainId(): number {\n  //   return this.pools[0].chainId;\n  // }\n}\n","import invariant from 'tiny-invariant';\n\n// given an array of items sorted by `comparator`, insert an item into its sort index and constrain the size to\n// `maxSize` by removing the last item\nexport function sortedInsert<T>(\n  items: T[],\n  add: T,\n  maxSize: number,\n  comparator: (a: T, b: T) => number\n): T | null {\n  invariant(maxSize > 0, 'MAX_SIZE_ZERO');\n  // this is an invariant because the interface cannot return multiple removed items if items.length exceeds maxSize\n  invariant(items.length <= maxSize, 'ITEMS_SIZE');\n\n  // short circuit first item add\n  if (items.length === 0) {\n    items.push(add);\n    return null;\n  }\n  const isFull = items.length === maxSize;\n  // short circuit if full and the additional item does not come before the last item\n  if (isFull && comparator(items[items.length - 1], add) <= 0) {\n    return add;\n  }\n\n  let lo = 0;\n  let hi = items.length;\n\n  while (lo < hi) {\n    const mid = (lo + hi) >>> 1;\n    if (comparator(items[mid], add) <= 0) {\n      lo = mid + 1;\n    } else {\n      hi = mid;\n    }\n  }\n  items.splice(lo, 0, add);\n  return isFull ? items.pop()! : null;\n}\n","import { Address } from '@ton/core';\nimport invariant from 'tiny-invariant';\nimport { TradeType } from '../enums/tradeType';\nimport { ONE, ZERO } from '../constants';\nimport { Jetton } from './Jetton';\nimport { JettonAmount } from './JettonAmount';\nimport { Route } from './route';\nimport { Pool } from './Pool';\nimport { Price } from './Price';\nimport { Percent } from './Percent';\nimport { Fraction } from './Fraction';\nimport { sortedInsert } from '../utils/sortedInsert';\nimport { computePoolAddress } from '../functions/computePoolAddress';\n\n/**\n * Trades comparator, an extension of the input output comparator that also considers other dimensions of the trade in ranking them\n * @template TInput The input token, either Ether or an ERC-20\n * @template TOutput The output token, either Ether or an ERC-20\n * @template TTradeType The trade type, either exact input or exact output\n * @param a The first trade to compare\n * @param b The second trade to compare\n * @returns A sorted ordering for two neighboring elements in a trade array\n */\nexport function tradeComparator<\n  TInput extends Jetton,\n  TOutput extends Jetton,\n  TTradeType extends TradeType,\n>(\n  a: Trade<TInput, TOutput, TTradeType>,\n  b: Trade<TInput, TOutput, TTradeType>\n) {\n  // must have same input and output token for comparison\n  invariant(\n    a.inputAmount.jetton.equals(b.inputAmount.jetton),\n    'INPUT_CURRENCY'\n  );\n  invariant(\n    a.outputAmount.jetton.equals(b.outputAmount.jetton),\n    'OUTPUT_CURRENCY'\n  );\n  if (a.outputAmount.equalTo(b.outputAmount)) {\n    if (a.inputAmount.equalTo(b.inputAmount)) {\n      // consider the number of hops since each hop costs gas\n      const aHops = a.swaps.reduce(\n        (total, cur) => total + cur.route.tokenPath.length,\n        0\n      );\n      const bHops = b.swaps.reduce(\n        (total, cur) => total + cur.route.tokenPath.length,\n        0\n      );\n      return aHops - bHops;\n    }\n    // trade A requires less input than trade B, so A should come first\n    if (a.inputAmount.lessThan(b.inputAmount)) {\n      return -1;\n    }\n    return 1;\n  }\n  // tradeA has less output than trade B, so should come second\n  if (a.outputAmount.lessThan(b.outputAmount)) {\n    return 1;\n  }\n  return -1;\n}\n\nexport interface BestTradeOptions {\n  // how many results to return\n  maxNumResults?: number;\n  // the maximum number of hops a trade should contain\n  maxHops?: number;\n}\n\n/**\n * Represents a trade executed against a set of routes where some percentage of the input is\n * split across each route.\n *\n * Each route has its own set of pools. Pools can not be re-used across routes.\n *\n * Does not account for slippage, i.e., changes in price environment that can occur between\n * the time the trade is submitted and when it is executed.\n * @template TInput The input token, either Ether or an ERC-20\n * @template TOutput The output token, either Ether or an ERC-20\n * @template TTradeType The trade type, either exact input or exact output\n */\nexport class Trade<\n  TInput extends Jetton,\n  TOutput extends Jetton,\n  TTradeType extends TradeType,\n> {\n  /**\n   * The swaps of the trade, i.e. which routes and how much is swapped in each that\n   * make up the trade.\n   */\n  public readonly swaps: {\n    route: Route<TInput, TOutput>;\n    inputAmount: JettonAmount<TInput>;\n    outputAmount: JettonAmount<TOutput>;\n  }[];\n\n  /**\n   * The type of the trade, either exact in or exact out.\n   */\n  public readonly tradeType: TTradeType;\n\n  /**\n   * Construct a trade by passing in the pre-computed property values\n   * @param routes The routes through which the trade occurs\n   * @param tradeType The type of trade, exact input or exact output\n   */\n  private constructor({\n    routes,\n    tradeType,\n  }: {\n    routes: {\n      route: Route<TInput, TOutput>;\n      inputAmount: JettonAmount<TInput>;\n      outputAmount: JettonAmount<TOutput>;\n    }[];\n    tradeType: TTradeType;\n  }) {\n    const inputCurrency = routes[0].inputAmount.jetton;\n    const outputCurrency = routes[0].outputAmount.jetton;\n    invariant(\n      routes.every(({ route }) => inputCurrency.equals(route.input)),\n      'INPUT_CURRENCY_MATCH'\n    );\n    invariant(\n      routes.every(({ route }) => outputCurrency.equals(route.output)),\n      'OUTPUT_CURRENCY_MATCH'\n    );\n\n    const numPools = routes\n      .map(({ route }) => route.pools.length)\n      .reduce((total, cur) => total + cur, 0);\n    const poolAddressSet = new Set<string>();\n    for (const { route } of routes) {\n      for (const pool of route.pools) {\n        poolAddressSet.add(\n          computePoolAddress(\n            Address.parse(pool.jetton0_wallet as string),\n            Address.parse(pool.jetton1_wallet as string)\n          ).toString()\n        );\n      }\n    }\n\n    invariant(numPools == poolAddressSet.size, 'POOLS_DUPLICATED');\n\n    this.swaps = routes;\n    this.tradeType = tradeType;\n  }\n\n  /**\n   * @deprecated Deprecated in favor of 'swaps' property. If the trade consists of multiple routes\n   * this will return an error.\n   *\n   * When the trade consists of just a single route, this returns the route of the trade,\n   * i.e. which pools the trade goes through.\n   */\n  public get route(): Route<TInput, TOutput> {\n    invariant(this.swaps.length == 1, 'MULTIPLE_ROUTES');\n    return this.swaps[0].route;\n  }\n\n  /**\n   * The cached result of the input amount computation\n   * @private\n   */\n  private _inputAmount: JettonAmount<TInput> | undefined;\n\n  /**\n   * The input amount for the trade assuming no slippage.\n   */\n  public get inputAmount(): JettonAmount<TInput> {\n    if (this._inputAmount) {\n      return this._inputAmount;\n    }\n\n    const inputCurrency = this.swaps[0].inputAmount.jetton;\n    const totalInputFromRoutes = this.swaps\n      .map(({ inputAmount }) => inputAmount)\n      .reduce(\n        (total, cur) => total.add(cur),\n        JettonAmount.fromRawAmount(inputCurrency, 0)\n      );\n\n    this._inputAmount = totalInputFromRoutes;\n    return this._inputAmount;\n  }\n\n  /**\n   * The cached result of the output amount computation\n   * @private\n   */\n  private _outputAmount: JettonAmount<TOutput> | undefined;\n\n  /**\n   * The output amount for the trade assuming no slippage.\n   */\n  public get outputAmount(): JettonAmount<TOutput> {\n    if (this._outputAmount) {\n      return this._outputAmount;\n    }\n\n    const outputCurrency = this.swaps[0].outputAmount.jetton;\n    const totalOutputFromRoutes = this.swaps\n      .map(({ outputAmount }) => outputAmount)\n      .reduce(\n        (total, cur) => total.add(cur),\n        JettonAmount.fromRawAmount(outputCurrency, 0)\n      );\n\n    this._outputAmount = totalOutputFromRoutes;\n    return this._outputAmount;\n  }\n\n  /**\n   * The cached result of the computed execution price\n   * @private\n   */\n  private _executionPrice: Price<TInput, TOutput> | undefined;\n\n  /**\n   * The price expressed in terms of output amount/input amount.\n   */\n  public get executionPrice(): Price<TInput, TOutput> {\n    return (\n      this._executionPrice ??\n      (this._executionPrice = new Price(\n        this.inputAmount.jetton,\n        this.outputAmount.jetton,\n        this.inputAmount.quotient,\n        this.outputAmount.quotient\n      ))\n    );\n  }\n\n  /**\n   * The cached result of the price impact computation\n   * @private\n   */\n  private _priceImpact: Percent | undefined;\n\n  /**\n   * Returns the percent difference between the route's mid price and the price impact\n   */\n  public get priceImpact(): Percent {\n    if (this._priceImpact) {\n      return this._priceImpact;\n    }\n\n    let spotOutputAmount = JettonAmount.fromRawAmount(\n      this.outputAmount.jetton,\n      0\n    );\n    for (const { route, inputAmount } of this.swaps) {\n      const midPrice = route.midPrice;\n      spotOutputAmount = spotOutputAmount.add(midPrice.quote(inputAmount));\n    }\n\n    const priceImpact = spotOutputAmount\n      .subtract(this.outputAmount)\n      .divide(spotOutputAmount);\n    this._priceImpact = new Percent(\n      priceImpact.numerator,\n      priceImpact.denominator\n    );\n\n    return this._priceImpact;\n  }\n\n  /**\n   * Constructs an exact in trade with the given amount in and route\n   * @template TInput The input token, either Ether or an ERC-20\n   * @template TOutput The output token, either Ether or an ERC-20\n   * @param route The route of the exact in trade\n   * @param amountIn The amount being passed in\n   * @returns The exact in trade\n   */\n  public static async exactIn<TInput extends Jetton, TOutput extends Jetton>(\n    route: Route<TInput, TOutput>,\n    amountIn: JettonAmount<TInput>\n  ): Promise<Trade<TInput, TOutput, TradeType.EXACT_INPUT>> {\n    return Trade.fromRoute(route, amountIn, TradeType.EXACT_INPUT);\n  }\n\n  /**\n   * Constructs an exact out trade with the given amount out and route\n   * @template TInput The input token, either Ether or an ERC-20\n   * @template TOutput The output token, either Ether or an ERC-20\n   * @param route The route of the exact out trade\n   * @param amountOut The amount returned by the trade\n   * @returns The exact out trade\n   */\n  public static async exactOut<TInput extends Jetton, TOutput extends Jetton>(\n    route: Route<TInput, TOutput>,\n    amountOut: JettonAmount<TOutput>\n  ): Promise<Trade<TInput, TOutput, TradeType.EXACT_OUTPUT>> {\n    return Trade.fromRoute(route, amountOut, TradeType.EXACT_OUTPUT);\n  }\n\n  /**\n   * Constructs a trade by simulating swaps through the given route\n   * @template TInput The input token, either Ether or an ERC-20.\n   * @template TOutput The output token, either Ether or an ERC-20.\n   * @template TTradeType The type of the trade, either exact in or exact out.\n   * @param route route to swap through\n   * @param amount the amount specified, either input or output, depending on tradeType\n   * @param tradeType whether the trade is an exact input or exact output swap\n   * @returns The route\n   */\n  public static async fromRoute<\n    TInput extends Jetton,\n    TOutput extends Jetton,\n    TTradeType extends TradeType,\n  >(\n    route: Route<TInput, TOutput>,\n    amount: TTradeType extends TradeType.EXACT_INPUT\n      ? JettonAmount<TInput>\n      : JettonAmount<TOutput>,\n    tradeType: TTradeType\n  ): Promise<Trade<TInput, TOutput, TTradeType>> {\n    const amounts: JettonAmount<Jetton>[] = new Array(route.tokenPath.length);\n    let inputAmount: JettonAmount<TInput>;\n    let outputAmount: JettonAmount<TOutput>;\n    if (tradeType === TradeType.EXACT_INPUT) {\n      invariant(amount.jetton.equals(route.input), 'INPUT');\n      amounts[0] = amount.wrapped;\n      for (let i = 0; i < route.tokenPath.length - 1; i++) {\n        const pool = route.pools[i];\n        const [outputAmount] = await pool.getOutputAmount(amounts[i]);\n        amounts[i + 1] = outputAmount;\n      }\n      inputAmount = JettonAmount.fromFractionalAmount(\n        route.input,\n        amount.numerator,\n        amount.denominator\n      );\n      outputAmount = JettonAmount.fromFractionalAmount(\n        route.output,\n        amounts[amounts.length - 1].numerator,\n        amounts[amounts.length - 1].denominator\n      );\n    } else {\n      invariant(amount.jetton.equals(route.output), 'OUTPUT');\n      amounts[amounts.length - 1] = amount.wrapped;\n      for (let i = route.tokenPath.length - 1; i > 0; i--) {\n        const pool = route.pools[i - 1];\n        const [inputAmount] = await pool.getInputAmount(amounts[i]);\n        amounts[i - 1] = inputAmount;\n      }\n      inputAmount = JettonAmount.fromFractionalAmount(\n        route.input,\n        amounts[0].numerator,\n        amounts[0].denominator\n      );\n      outputAmount = JettonAmount.fromFractionalAmount(\n        route.output,\n        amount.numerator,\n        amount.denominator\n      );\n    }\n\n    return new Trade({\n      routes: [{ inputAmount, outputAmount, route }],\n      tradeType,\n    });\n  }\n\n  /**\n   * Constructs a trade from routes by simulating swaps\n   *\n   * @template TInput The input token, either Ether or an ERC-20.\n   * @template TOutput The output token, either Ether or an ERC-20.\n   * @template TTradeType The type of the trade, either exact in or exact out.\n   * @param routes the routes to swap through and how much of the amount should be routed through each\n   * @param tradeType whether the trade is an exact input or exact output swap\n   * @returns The trade\n   */\n  public static async fromRoutes<\n    TInput extends Jetton,\n    TOutput extends Jetton,\n    TTradeType extends TradeType,\n  >(\n    routes: {\n      amount: TTradeType extends TradeType.EXACT_INPUT\n        ? JettonAmount<TInput>\n        : JettonAmount<TOutput>;\n      route: Route<TInput, TOutput>;\n    }[],\n    tradeType: TTradeType\n  ): Promise<Trade<TInput, TOutput, TTradeType>> {\n    const populatedRoutes: {\n      route: Route<TInput, TOutput>;\n      inputAmount: JettonAmount<TInput>;\n      outputAmount: JettonAmount<TOutput>;\n    }[] = [];\n\n    for (const { route, amount } of routes) {\n      const amounts: JettonAmount<Jetton>[] = new Array(route.tokenPath.length);\n      let inputAmount: JettonAmount<TInput>;\n      let outputAmount: JettonAmount<TOutput>;\n\n      if (tradeType === TradeType.EXACT_INPUT) {\n        invariant(amount.jetton.equals(route.input), 'INPUT');\n        inputAmount = JettonAmount.fromFractionalAmount(\n          route.input,\n          amount.numerator,\n          amount.denominator\n        );\n        amounts[0] = JettonAmount.fromFractionalAmount(\n          route.input,\n          amount.numerator,\n          amount.denominator\n        );\n\n        for (let i = 0; i < route.tokenPath.length - 1; i++) {\n          const pool = route.pools[i];\n          const [outputAmount] = await pool.getOutputAmount(amounts[i]);\n          amounts[i + 1] = outputAmount;\n        }\n\n        outputAmount = JettonAmount.fromFractionalAmount(\n          route.output,\n          amounts[amounts.length - 1].numerator,\n          amounts[amounts.length - 1].denominator\n        );\n      } else {\n        invariant(amount.jetton.equals(route.output), 'OUTPUT');\n        outputAmount = JettonAmount.fromFractionalAmount(\n          route.output,\n          amount.numerator,\n          amount.denominator\n        );\n        amounts[amounts.length - 1] = JettonAmount.fromFractionalAmount(\n          route.output,\n          amount.numerator,\n          amount.denominator\n        );\n\n        for (let i = route.tokenPath.length - 1; i > 0; i--) {\n          const pool = route.pools[i - 1];\n          const [inputAmount] = await pool.getInputAmount(amounts[i]);\n          amounts[i - 1] = inputAmount;\n        }\n\n        inputAmount = JettonAmount.fromFractionalAmount(\n          route.input,\n          amounts[0].numerator,\n          amounts[0].denominator\n        );\n      }\n\n      populatedRoutes.push({ route, inputAmount, outputAmount });\n    }\n\n    return new Trade({\n      routes: populatedRoutes,\n      tradeType,\n    });\n  }\n\n  /**\n   * Creates a trade without computing the result of swapping through the route. Useful when you have simulated the trade\n   * elsewhere and do not have any tick data\n   * @template TInput The input token, either Ether or an ERC-20\n   * @template TOutput The output token, either Ether or an ERC-20\n   * @template TTradeType The type of the trade, either exact in or exact out\n   * @param constructorArguments The arguments passed to the trade constructor\n   * @returns The unchecked trade\n   */\n  public static createUncheckedTrade<\n    TInput extends Jetton,\n    TOutput extends Jetton,\n    TTradeType extends TradeType,\n  >(constructorArguments: {\n    route: Route<TInput, TOutput>;\n    inputAmount: JettonAmount<TInput>;\n    outputAmount: JettonAmount<TOutput>;\n    tradeType: TTradeType;\n  }): Trade<TInput, TOutput, TTradeType> {\n    return new Trade({\n      ...constructorArguments,\n      routes: [\n        {\n          inputAmount: constructorArguments.inputAmount,\n          outputAmount: constructorArguments.outputAmount,\n          route: constructorArguments.route,\n        },\n      ],\n    });\n  }\n\n  /**\n   * Creates a trade without computing the result of swapping through the routes. Useful when you have simulated the trade\n   * elsewhere and do not have any tick data\n   * @template TInput The input token, either Ether or an ERC-20\n   * @template TOutput The output token, either Ether or an ERC-20\n   * @template TTradeType The type of the trade, either exact in or exact out\n   * @param constructorArguments The arguments passed to the trade constructor\n   * @returns The unchecked trade\n   */\n  public static createUncheckedTradeWithMultipleRoutes<\n    TInput extends Jetton,\n    TOutput extends Jetton,\n    TTradeType extends TradeType,\n  >(constructorArguments: {\n    routes: {\n      route: Route<TInput, TOutput>;\n      inputAmount: JettonAmount<TInput>;\n      outputAmount: JettonAmount<TOutput>;\n    }[];\n    tradeType: TTradeType;\n  }): Trade<TInput, TOutput, TTradeType> {\n    return new Trade(constructorArguments);\n  }\n\n  /**\n   * Given a list of pools, and a fixed amount in, returns the top `maxNumResults` trades that go from an input token\n   * amount to an output token, making at most `maxHops` hops.\n   * Note this does not consider aggregation, as routes are linear. It's possible a better route exists by splitting\n   * the amount in among multiple routes.\n   * @param pools the pools to consider in finding the best trade\n   * @param nextAmountIn exact amount of input currency to spend\n   * @param currencyOut the desired currency out\n   * @param maxNumResults maximum number of results to return\n   * @param maxHops maximum number of hops a returned trade can make, e.g. 1 hop goes through a single pool\n   * @param currentPools used in recursion; the current list of pools\n   * @param currencyAmountIn used in recursion; the original value of the currencyAmountIn parameter\n   * @param bestTrades used in recursion; the current list of best trades\n   * @returns The exact in trade\n   */\n  public static async bestTradeExactIn<\n    TInput extends Jetton,\n    TOutput extends Jetton,\n  >(\n    pools: Pool[],\n    currencyAmountIn: JettonAmount<TInput>,\n    currencyOut: TOutput,\n    { maxNumResults = 3, maxHops = 3 }: BestTradeOptions = {},\n    // used in recursion.\n    currentPools: Pool[] = [],\n    nextAmountIn: JettonAmount<Jetton> = currencyAmountIn,\n    bestTrades: Trade<TInput, TOutput, TradeType.EXACT_INPUT>[] = []\n  ): Promise<Trade<TInput, TOutput, TradeType.EXACT_INPUT>[]> {\n    invariant(pools.length > 0, 'POOLS');\n    invariant(maxHops > 0, 'MAX_HOPS');\n    invariant(\n      currencyAmountIn === nextAmountIn || currentPools.length > 0,\n      'INVALID_RECURSION'\n    );\n\n    const amountIn = nextAmountIn;\n    const tokenOut = currencyOut;\n    for (let i = 0; i < pools.length; i++) {\n      const pool = pools[i];\n      // pool irrelevant\n      if (\n        !pool.jetton0.equals(amountIn.jetton) &&\n        !pool.jetton1.equals(amountIn.jetton)\n      )\n        continue;\n\n      let amountOut: JettonAmount<Jetton>;\n      try {\n        [amountOut] = await pool.getOutputAmount(amountIn);\n      } catch (_error) {\n        const error = _error as any;\n        // input too low\n        if (error.isInsufficientInputAmountError) {\n          continue;\n        }\n        throw error;\n      }\n      // we have arrived at the output token, so this is the final trade of one of the paths\n      if (amountOut.jetton.isToken && amountOut.jetton.equals(tokenOut)) {\n        sortedInsert(\n          bestTrades,\n          await Trade.fromRoute(\n            new Route(\n              [...currentPools, pool],\n              currencyAmountIn.jetton,\n              currencyOut\n            ),\n            currencyAmountIn,\n            TradeType.EXACT_INPUT\n          ),\n          maxNumResults,\n          tradeComparator\n        );\n      } else if (maxHops > 1 && pools.length > 1) {\n        const poolsExcludingThisPool = pools\n          .slice(0, i)\n          .concat(pools.slice(i + 1, pools.length));\n\n        // otherwise, consider all the other paths that lead from this token as long as we have not exceeded maxHops\n        await Trade.bestTradeExactIn(\n          poolsExcludingThisPool,\n          currencyAmountIn,\n          currencyOut,\n          {\n            maxNumResults,\n            maxHops: maxHops - 1,\n          },\n          [...currentPools, pool],\n          amountOut,\n          bestTrades\n        );\n      }\n    }\n\n    return bestTrades;\n  }\n\n  /**\n   * similar to the above method but instead targets a fixed output amount\n   * given a list of pools, and a fixed amount out, returns the top `maxNumResults` trades that go from an input token\n   * to an output token amount, making at most `maxHops` hops\n   * note this does not consider aggregation, as routes are linear. it's possible a better route exists by splitting\n   * the amount in among multiple routes.\n   * @param pools the pools to consider in finding the best trade\n   * @param currencyIn the currency to spend\n   * @param currencyAmountOut the desired currency amount out\n   * @param nextAmountOut the exact amount of currency out\n   * @param maxNumResults maximum number of results to return\n   * @param maxHops maximum number of hops a returned trade can make, e.g. 1 hop goes through a single pool\n   * @param currentPools used in recursion; the current list of pools\n   * @param bestTrades used in recursion; the current list of best trades\n   * @returns The exact out trade\n   */\n  public static async bestTradeExactOut<\n    TInput extends Jetton,\n    TOutput extends Jetton,\n  >(\n    pools: Pool[],\n    currencyIn: TInput,\n    currencyAmountOut: JettonAmount<TOutput>,\n    { maxNumResults = 3, maxHops = 3 }: BestTradeOptions = {},\n    // used in recursion.\n    currentPools: Pool[] = [],\n    nextAmountOut: JettonAmount<Jetton> = currencyAmountOut,\n    bestTrades: Trade<TInput, TOutput, TradeType.EXACT_OUTPUT>[] = []\n  ): Promise<Trade<TInput, TOutput, TradeType.EXACT_OUTPUT>[]> {\n    invariant(pools.length > 0, 'POOLS');\n    invariant(maxHops > 0, 'MAX_HOPS');\n    invariant(\n      currencyAmountOut === nextAmountOut || currentPools.length > 0,\n      'INVALID_RECURSION'\n    );\n\n    const amountOut = nextAmountOut;\n    const tokenIn = currencyIn;\n    for (let i = 0; i < pools.length; i++) {\n      const pool = pools[i];\n      // pool irrelevant\n      if (\n        !pool.jetton0.equals(amountOut.jetton) &&\n        !pool.jetton1.equals(amountOut.jetton)\n      )\n        continue;\n\n      let amountIn: JettonAmount<Jetton>;\n      try {\n        [amountIn] = await pool.getInputAmount(amountOut);\n      } catch (_error) {\n        // not enough liquidity in this pool\n\n        const error = _error as any;\n        if (error.isInsufficientReservesError) {\n          continue;\n        }\n        throw error;\n      }\n      // we have arrived at the input token, so this is the first trade of one of the paths\n      if (amountIn.jetton.equals(tokenIn)) {\n        sortedInsert(\n          bestTrades,\n          await Trade.fromRoute(\n            new Route(\n              [pool, ...currentPools],\n              currencyIn,\n              currencyAmountOut.jetton\n            ),\n            currencyAmountOut,\n            TradeType.EXACT_OUTPUT\n          ),\n          maxNumResults,\n          tradeComparator\n        );\n      } else if (maxHops > 1 && pools.length > 1) {\n        const poolsExcludingThisPool = pools\n          .slice(0, i)\n          .concat(pools.slice(i + 1, pools.length));\n\n        // otherwise, consider all the other paths that arrive at this token as long as we have not exceeded maxHops\n        await Trade.bestTradeExactOut(\n          poolsExcludingThisPool,\n          currencyIn,\n          currencyAmountOut,\n          {\n            maxNumResults,\n            maxHops: maxHops - 1,\n          },\n          [pool, ...currentPools],\n          amountIn,\n          bestTrades\n        );\n      }\n    }\n\n    return bestTrades;\n  }\n\n  /**\n   * Get the minimum amount that must be received from this trade for the given slippage tolerance\n   * @param slippageTolerance The tolerance of unfavorable slippage from the execution price of this trade\n   * @returns The amount out\n   */\n  public minimumAmountOut(\n    slippageTolerance: Percent,\n    amountOut = this.outputAmount\n  ): JettonAmount<TOutput> {\n    invariant(!slippageTolerance.lessThan(ZERO), 'SLIPPAGE_TOLERANCE');\n    if (this.tradeType === TradeType.EXACT_OUTPUT) {\n      return amountOut;\n    }\n    const slippageAdjustedAmountOut = new Fraction(ONE)\n      .add(slippageTolerance)\n      .invert()\n      .multiply(amountOut.quotient).quotient;\n    return JettonAmount.fromRawAmount(\n      amountOut.jetton,\n      slippageAdjustedAmountOut\n    );\n  }\n\n  /**\n   * Get the maximum amount in that can be spent via this trade for the given slippage tolerance\n   * @param slippageTolerance The tolerance of unfavorable slippage from the execution price of this trade\n   * @returns The amount in\n   */\n  public maximumAmountIn(\n    slippageTolerance: Percent,\n    amountIn = this.inputAmount\n  ): JettonAmount<TInput> {\n    invariant(!slippageTolerance.lessThan(ZERO), 'SLIPPAGE_TOLERANCE');\n    if (this.tradeType === TradeType.EXACT_INPUT) {\n      return amountIn;\n    }\n    const slippageAdjustedAmountIn = new Fraction(ONE)\n      .add(slippageTolerance)\n      .multiply(amountIn.quotient).quotient;\n    return JettonAmount.fromRawAmount(\n      amountIn.jetton,\n      slippageAdjustedAmountIn\n    );\n  }\n\n  /**\n   * Return the execution price after accounting for slippage tolerance\n   * @param slippageTolerance the allowed tolerated slippage\n   * @returns The execution price\n   */\n  public worstExecutionPrice(\n    slippageTolerance: Percent\n  ): Price<TInput, TOutput> {\n    return new Price(\n      this.inputAmount.jetton,\n      this.outputAmount.jetton,\n      this.maximumAmountIn(slippageTolerance).quotient,\n      this.minimumAmountOut(slippageTolerance).quotient\n    );\n  }\n}\n","import { Address } from '@ton/ton';\n\nexport function validateAndParseAddress(address: string): string {\n  try {\n    return Address.parse(address).toString();\n  } catch (error) {\n    throw new Error(`${address} is not a valid address.`);\n  }\n}\n","import { Address } from '@ton/core';\nimport { AbstractJetton } from './AbstractJetton';\nimport { validateAndParseAddress } from '../utils/validateAndParseAddress';\n/**\n * Represents an ERC20 token with a unique address and some metadata.\n */\nexport class Jetton extends AbstractJetton {\n  public readonly address: string;\n\n  public readonly isToken: true = true;\n\n  public constructor(\n    address: string,\n    decimals: number,\n    symbol: string,\n    name?: string,\n    image?: string\n  ) {\n    super(decimals, symbol, name, image);\n    this.address = validateAndParseAddress(address);\n  }\n\n  /**\n   * Returns true if the two tokens are equivalent, i.e. have the same chainId and address.\n   * @param other other token to compare\n   */\n  public equals(other: Jetton): boolean {\n    return (\n      other.isToken &&\n      Address.parse(this.address).equals(Address.parse(other.address))\n    );\n  }\n}\n\n//   /**\n//    * Returns true if the address of this token sorts before the address of the other token\n//    * @param other other token to compare\n//    * @throws if the tokens have the same address\n//    * @throws if the tokens are on different chains\n//    */\n//   public sortsBefore(other: Jetton): boolean {\n//     invariant(this.address !== other.address, 'ADDRESSES');\n//     return this.address.toLowerCase() < other.address.toLowerCase();\n//   }\n// }\n\n//   /**\n//    * Return this token, which does not need to be wrapped\n//    */\n//   public get wrapped(): Token {\n//     return this;\n//   }\n// }\n\n/**\n * Compares two currencies for equality\n */\nexport function currencyEquals(jettonA: Jetton, jettonB: Jetton): boolean {\n  if (jettonA instanceof Jetton && jettonB instanceof Jetton) {\n    return jettonA.equals(jettonB);\n  }\n  if (jettonA instanceof Jetton) {\n    return false;\n  }\n  if (jettonB instanceof Jetton) {\n    return false;\n  }\n  return jettonA === jettonB;\n}\n","import invariant from 'tiny-invariant';\nimport { Jetton } from './Jetton';\n\n/**\n * A currency is any fungible financial instrument, including Ether, all ERC20 tokens, and other chain-native currencies\n */\nexport abstract class AbstractJetton {\n  /**\n   * The decimals used in representing currency amounts\n   */\n  public readonly decimals: number;\n\n  /**\n   * The symbol of the currency, i.e. a short textual non-unique identifier\n   */\n  public readonly symbol: string;\n\n  /**\n   * The name of the currency, i.e. a descriptive textual non-unique identifier\n   */\n  public readonly name?: string;\n\n  public readonly image?: string;\n\n  /**\n   * Constructs an instance of the base class `BaseCurrency`.\n   * @param chainId the chain ID on which this currency resides\n   * @param decimals decimals of the currency\n   * @param symbol symbol of the currency\n   * @param name of the currency\n   */\n  protected constructor(\n    decimals: number,\n    symbol: string,\n    name?: string,\n    image?: string\n  ) {\n    invariant(\n      decimals >= 0 && decimals < 255 && Number.isInteger(decimals),\n      'DECIMALS'\n    );\n\n    this.decimals = decimals;\n    this.symbol = symbol;\n    this.name = name;\n    this.image = image;\n  }\n\n  /**\n   * Returns whether this currency is functionally equivalent to the other currency\n   * @param other the other currency\n   */\n  public abstract equals(other: Jetton): boolean;\n}\n","import invariant from 'tiny-invariant';\nimport { TickMath } from './tickMath';\n\n/**\n * Returns the closest tick that is nearest a given tick and usable for the given tick spacing\n * @param tick the target tick\n * @param tickSpacing the spacing of the pool\n */\nexport function nearestUsableTick(tick: number, tickSpacing: number) {\n  invariant(\n    Number.isInteger(tick) && Number.isInteger(tickSpacing),\n    'INTEGERS'\n  );\n  invariant(tickSpacing > 0, 'TICK_SPACING');\n  invariant(\n    tick >= TickMath.MIN_TICK && tick <= TickMath.MAX_TICK,\n    'TICK_BOUND'\n  );\n  const rounded = Math.round(tick / tickSpacing) * tickSpacing;\n  if (rounded < TickMath.MIN_TICK) return rounded + tickSpacing;\n  if (rounded > TickMath.MAX_TICK) return rounded - tickSpacing;\n  return rounded;\n}\n","import JSBI from 'jsbi';\nimport { ZERO } from '../constants/internalConstants';\n\ninterface FeeGrowthOutside {\n  feeGrowthOutside0X128: JSBI;\n  feeGrowthOutside1X128: JSBI;\n}\n\nconst Q256 = JSBI.exponentiate(JSBI.BigInt(2), JSBI.BigInt(256));\n\nexport function subIn256(x: JSBI, y: JSBI): JSBI {\n  const difference = JSBI.subtract(x, y);\n\n  if (JSBI.lessThan(difference, ZERO)) {\n    return JSBI.add(Q256, difference);\n  }\n  return difference;\n}\n\nexport abstract class TickLibrary {\n  /**\n   * Cannot be constructed.\n   */\n  private constructor() {}\n\n  public static getFeeGrowthInside(\n    feeGrowthOutsideLower: FeeGrowthOutside,\n    feeGrowthOutsideUpper: FeeGrowthOutside,\n    tickLower: number,\n    tickUpper: number,\n    tickCurrent: number,\n    feeGrowthGlobal0X128: JSBI,\n    feeGrowthGlobal1X128: JSBI\n  ) {\n    let feeGrowthBelow0X128: JSBI;\n    let feeGrowthBelow1X128: JSBI;\n    if (tickCurrent >= tickLower) {\n      feeGrowthBelow0X128 = feeGrowthOutsideLower.feeGrowthOutside0X128;\n      feeGrowthBelow1X128 = feeGrowthOutsideLower.feeGrowthOutside1X128;\n    } else {\n      feeGrowthBelow0X128 = subIn256(\n        feeGrowthGlobal0X128,\n        feeGrowthOutsideLower.feeGrowthOutside0X128\n      );\n      feeGrowthBelow1X128 = subIn256(\n        feeGrowthGlobal1X128,\n        feeGrowthOutsideLower.feeGrowthOutside1X128\n      );\n    }\n\n    let feeGrowthAbove0X128: JSBI;\n    let feeGrowthAbove1X128: JSBI;\n    if (tickCurrent < tickUpper) {\n      feeGrowthAbove0X128 = feeGrowthOutsideUpper.feeGrowthOutside0X128;\n      feeGrowthAbove1X128 = feeGrowthOutsideUpper.feeGrowthOutside1X128;\n    } else {\n      feeGrowthAbove0X128 = subIn256(\n        feeGrowthGlobal0X128,\n        feeGrowthOutsideUpper.feeGrowthOutside0X128\n      );\n      feeGrowthAbove1X128 = subIn256(\n        feeGrowthGlobal1X128,\n        feeGrowthOutsideUpper.feeGrowthOutside1X128\n      );\n    }\n\n    return [\n      subIn256(\n        subIn256(feeGrowthGlobal0X128, feeGrowthBelow0X128),\n        feeGrowthAbove0X128\n      ),\n      subIn256(\n        subIn256(feeGrowthGlobal1X128, feeGrowthBelow1X128),\n        feeGrowthAbove1X128\n      ),\n    ];\n  }\n}\n","export enum WalletVersion {\n  V3R1 = 0,\n  V3R2 = 1,\n  V4R1 = 2,\n  V4R2 = 3,\n  V5_BETA = 4,\n  V5R1 = 5,\n}\n","import JSBI from 'jsbi';\nimport { subIn256 } from '.';\n\nconst Q128 = JSBI.exponentiate(JSBI.BigInt(2), JSBI.BigInt(128));\n\nexport abstract class PositionLibrary {\n  /**\n   * Cannot be constructed.\n   */\n  private constructor() {}\n\n  // replicates the portions of Position#update required to compute unaccounted fees\n  public static getTokensOwed(\n    feeGrowthInside0LastX128: JSBI,\n    feeGrowthInside1LastX128: JSBI,\n    liquidity: JSBI,\n    feeGrowthInside0X128: JSBI,\n    feeGrowthInside1X128: JSBI\n  ) {\n    const tokensOwed0 = JSBI.divide(\n      JSBI.multiply(\n        subIn256(feeGrowthInside0X128, feeGrowthInside0LastX128),\n        liquidity\n      ),\n      Q128\n    );\n\n    const tokensOwed1 = JSBI.divide(\n      JSBI.multiply(\n        subIn256(feeGrowthInside1X128, feeGrowthInside1LastX128),\n        liquidity\n      ),\n      Q128\n    );\n\n    return [tokensOwed0, tokensOwed1];\n  }\n}\n","import { Address } from '@ton/core';\nimport JSBI from 'jsbi';\nimport { JettonAmount } from '../entities/JettonAmount';\nimport { Jetton } from '../entities/Jetton';\nimport { pTON_MINTER } from '../constants/addresses';\n\nconst MIN_NATIVE_CURRENCY_FOR_GAS: JSBI = JSBI.multiply(\n  JSBI.exponentiate(JSBI.BigInt(10), JSBI.BigInt(7)),\n  JSBI.BigInt(61)\n); // 0.61 TON\n\n/**\n * Given some token amount, return the max that can be spent of it\n * @param currencyAmount to return max of\n */\nexport function maxAmountSpend(\n  currencyAmount?: JettonAmount<Jetton>\n): JettonAmount<Jetton> | undefined {\n  if (!currencyAmount) return undefined;\n\n  const isNative = Address.parse(currencyAmount.jetton.address).equals(\n    Address.parse(pTON_MINTER)\n  );\n\n  if (isNative) {\n    if (\n      JSBI.greaterThan(currencyAmount.quotient, MIN_NATIVE_CURRENCY_FOR_GAS)\n    ) {\n      return JettonAmount.fromRawAmount(\n        currencyAmount.jetton,\n        JSBI.subtract(currencyAmount.quotient, MIN_NATIVE_CURRENCY_FOR_GAS)\n      );\n    }\n    return JettonAmount.fromRawAmount(currencyAmount.jetton, JSBI.BigInt(0));\n  }\n  return currencyAmount;\n}\n","export function parseUnits(amount: number | string, decimals: number): bigint {\n  const amountNum = Number(amount);\n  if (isNaN(amountNum)) return BigInt(0);\n\n  return BigInt(Math.round(amountNum * 10 ** decimals));\n}\n","import JSBI from 'jsbi';\nimport { Jetton } from '../entities/Jetton';\nimport { Price } from '../entities/Price';\nimport { encodeSqrtRatioX96 } from '../utils/encodeSqrtRatioX96';\nimport { TickMath } from '../utils/tickMath';\nimport { priceToClosestTick } from '../utils/priceTickConversions';\nimport { nearestUsableTick } from '../utils/nearestUsableTick';\n\nexport function tryParsePrice(\n  baseToken?: Jetton,\n  quoteToken?: Jetton,\n  value?: string\n) {\n  if (!baseToken || !quoteToken || !value) {\n    return undefined;\n  }\n\n  if (!value.match(/^\\d*\\.?\\d+$/)) {\n    return undefined;\n  }\n\n  const [whole, fraction] = value.split('.');\n\n  const decimals = fraction?.length ?? 0;\n  const withoutDecimals = JSBI.BigInt((whole ?? '') + (fraction ?? ''));\n\n  return new Price(\n    baseToken,\n    quoteToken,\n    JSBI.multiply(\n      JSBI.BigInt(10 ** decimals),\n      JSBI.BigInt(10 ** baseToken.decimals)\n    ),\n    JSBI.multiply(withoutDecimals, JSBI.BigInt(10 ** quoteToken.decimals))\n  );\n}\n\nexport function tryParseTick(\n  baseToken?: Jetton,\n  quoteToken?: Jetton,\n  value?: string,\n  tickSpacing?: number\n): number | undefined {\n  if (!baseToken || !quoteToken || !value || !tickSpacing) {\n    return undefined;\n  }\n\n  const price = tryParsePrice(baseToken, quoteToken, value);\n\n  if (!price) {\n    return undefined;\n  }\n\n  let tick: number;\n\n  // check price is within min/max bounds, if outside return min/max\n  const sqrtRatioX96 = encodeSqrtRatioX96(price.numerator, price.denominator);\n\n  if (JSBI.greaterThanOrEqual(sqrtRatioX96, TickMath.MAX_SQRT_RATIO)) {\n    tick = TickMath.MAX_TICK;\n  } else if (JSBI.lessThanOrEqual(sqrtRatioX96, TickMath.MIN_SQRT_RATIO)) {\n    tick = TickMath.MIN_TICK;\n  } else {\n    // this function is agnostic to the base, will always return the correct tick\n    tick = priceToClosestTick(price);\n  }\n\n  return nearestUsableTick(tick, tickSpacing);\n}\n","import {\n  ROUTERV3_CODE,\n  ACCOUNTV3_CODE,\n  POOLV3_CODE,\n  POSITIONV3_CODE,\n} from '../constants/code';\n\nconst emojiBigArray = [\n    '','','','','','','','','','','','','','','','','',\n    '','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','',\n    '','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','',\n    '','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','',\n    '','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','',\n    '','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','',\n    '','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','',\n    '','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','',\n    '','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','',\n    '','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','',\n    '','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','',\n    '','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','',\n    '','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','',\n    '','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','',\n    '','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','',\n    '','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','',\n    '','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','',\n    '','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','',\n    '','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','',\n    '','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','',\n    '','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','',\n    '','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','',\n    '','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','',\n    '','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','',\n    '','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','',\n    '','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','',\n    '','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','',\n    '','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','',\n    '','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','',\n    '','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','',\n    '','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','',\n    '','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','',\n    '','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','',\n    '','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','',\n    '','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','',''\n    ]\n    \nfunction xorBuffers(buffers: Buffer[]): Buffer {\n  const length = buffers[0].length;\n  const result = Buffer.alloc(length);\n\n  for (let i = 0; i < length; i++) {\n    // Perform XOR for each corresponding byte from the buffers\n    for (let j = 0; j < buffers.length; j++)\n      result[i] = result[i] ^ buffers[j][i];\n  }\n  return result;\n}\n\nfunction bigIntPow(base: bigint, exponent: bigint): bigint {\n  let result = BigInt(1);\n  for (let i = BigInt(0); i < exponent; i++) {\n    result *= base;\n  }\n  return result;\n}\n\nconst toncoCells = [\n  ROUTERV3_CODE,\n  POOLV3_CODE,\n  ACCOUNTV3_CODE,\n  POSITIONV3_CODE,\n];\n\nexport function getEmojiHash(): string {\n  const toncoHashes: Buffer[] = [];\n\n  for (const contractCell of toncoCells) {\n    toncoHashes.push(contractCell.hash(0));\n  }\n\n  const mainHash = xorBuffers(Object.values(toncoHashes));\n  let shortHash =\n    BigInt(`0x${mainHash.toString('hex')}`) % bigIntPow(BigInt(2), BigInt(42));\n\n  const base = BigInt(emojiBigArray.length);\n  let result: string = '';\n\n  for (let i = 0; i < 4; i++) {\n    result += emojiBigArray[Number(shortHash % base)];\n    shortHash /= base;\n  }\n\n  return result;\n}\n","import {\n  Cell,\n  WalletContractV3R1,\n  WalletContractV3R2,\n  WalletContractV4,\n  WalletContractV5R1,\n} from '@ton/ton';\nimport { WalletVersion } from '../types/WalletVersion';\nimport {\n  WalletV3SendArgsSignable,\n  WalletV3SendArgsSigned,\n} from '@ton/ton/dist/wallets/WalletContractV3Types';\nimport {\n  Wallet4SendArgsSignable,\n  Wallet4SendArgsSigned,\n} from '@ton/ton/dist/wallets/WalletContractV4';\n\n// function overloading\ninterface IWalletContract {\n  createTransfer<T extends WalletV3SendArgsSigned | WalletV3SendArgsSignable>(\n    args: T\n  ): T extends WalletV3SendArgsSignable ? Promise<Cell> : Cell;\n\n  createTransfer<T extends Wallet4SendArgsSigned | Wallet4SendArgsSignable>(\n    args: T\n  ): T extends Wallet4SendArgsSignable ? Promise<Cell> : Cell;\n}\n\nexport type WalletContracts =\n  | WalletContractV5R1\n  | WalletContractV3R1\n  | WalletContractV3R2\n  | WalletContractV4;\n\nexport class WalletContract {\n  private constructor() {}\n\n  public static create = (\n    workchain: number,\n    publicKey: Buffer,\n    version: WalletVersion\n  ): IWalletContract => {\n    switch (version) {\n      case WalletVersion.V3R1:\n        return WalletContractV3R1.create({ workchain, publicKey });\n      case WalletVersion.V3R2:\n        return WalletContractV3R2.create({ workchain, publicKey });\n      case WalletVersion.V4R1:\n        throw new Error('Unsupported wallet contract version - v4R1');\n      case WalletVersion.V4R2:\n        return WalletContractV4.create({ workchain, publicKey });\n      case WalletVersion.V5R1:\n        return WalletContractV5R1.create({ workchain, publicKey });\n      default:\n        throw new Error(`Unsupported wallet contract version - ${version}`);\n    }\n  };\n}\n","import { Api } from 'tonapi-sdk-js';\nimport {\n  Address,\n  beginCell,\n  Cell,\n  external,\n  internal,\n  SenderArguments,\n  SendMode,\n  storeMessage,\n} from '@ton/ton';\nimport { sign } from '@ton/crypto';\nimport { WalletVersion } from '../types/WalletVersion';\nimport { WalletContract, WalletContracts } from '../contracts/WalletContract';\n\nconst signer = async (message: Cell): Promise<Buffer> =>\n  sign(message.hash(), Buffer.alloc(64));\n\nconst externalMessage = (\n  contract: WalletContracts,\n  seqno: number,\n  body: Cell\n) =>\n  beginCell()\n    .storeWritable(\n      storeMessage(\n        external({\n          to: contract.address,\n          init: seqno === 0 ? contract.init : undefined,\n          body: body,\n        })\n      )\n    )\n    .endCell();\n\nexport async function emulateMessage(\n  client: Api<unknown>,\n  messages: SenderArguments[] | undefined,\n  wallet: string | null,\n  walletPubKey: string | null,\n  walletVersion: WalletVersion | undefined\n) {\n  if (\n    !wallet ||\n    !messages ||\n    !messages[0].body ||\n    !walletVersion ||\n    !walletPubKey\n  )\n    return;\n  const walletContract = WalletContract.create(\n    Address.parse(wallet).workChain,\n    Buffer.from(walletPubKey, 'hex'),\n    walletVersion\n  );\n\n  const seqno = (await client.wallet.getAccountSeqno(wallet)).seqno;\n\n  const secretKey = await signer(messages[0].body);\n\n  /* replace secretKey by signer if @ton/ton ver. ^14.0.0 */\n  const transfer = await walletContract.createTransfer({\n    seqno,\n    signer,\n    secretKey,\n    timeout: 0,\n    sendMode: SendMode.PAY_GAS_SEPARATELY + SendMode.IGNORE_ERRORS,\n    messages: messages.map(message =>\n      internal({\n        to: message.to,\n        bounce: true,\n        value: message.value,\n        init: {\n          code: message.init?.code ?? null,\n          data: message.init?.data ?? null,\n        },\n        body: message.body,\n      })\n    ),\n  });\n\n  const msgCell = externalMessage(\n    walletContract as WalletContracts,\n    seqno,\n    transfer\n  ).toBoc({\n    idx: false,\n  });\n\n  const emulation = await client.wallet.emulateMessageToWallet({\n    boc: msgCell.toString('base64'),\n  });\n\n  return emulation;\n}\n","export abstract class Op {\n  static transfer = 0xf8a7ea5;\n  static transfer_notification = 0x7362d09c;\n  static internal_transfer = 0x178d4519;\n  static excesses = 0xd53276db;\n  static burn = 0x595f07bc;\n  static burn_notification = 0x7bdd97de;\n\n  static provide_wallet_address = 0x2c76b973;\n  static take_wallet_address = 0xd1735400;\n  static mint = 21;\n  static change_admin = 3;\n  static change_content = 4;\n}\n\nexport abstract class Errors {\n  static invalid_op = 709;\n  static not_admin = 73;\n  static unouthorized_burn = 74;\n  static discovery_fee_not_matched = 75;\n  static wrong_op = 0xffff;\n  static not_owner = 705;\n  static not_enough_ton = 709;\n  static not_enough_gas = 707;\n  static not_valid_wallet = 707;\n  static wrong_workchain = 333;\n  static balance_error = 706;\n}\n","import {\n  Address,\n  beginCell,\n  Cell,\n  Contract,\n  contractAddress,\n  ContractProvider,\n  Sender,\n  SendMode,\n  toNano,\n} from '@ton/core';\n\nimport { Op } from './JettonConstants';\n\nexport type JettonMinterContent = {\n  type: 0 | 1;\n  uri: string;\n};\n\nexport type JettonMinterConfig = {\n  admin: Address;\n  content: Cell;\n  wallet_code: Cell;\n};\n\nexport function jettonMinterConfigToCell(config: JettonMinterConfig): Cell {\n  return beginCell()\n    .storeCoins(0)\n    .storeAddress(config.admin)\n    .storeRef(config.content)\n    .storeRef(config.wallet_code)\n    .endCell();\n}\n\nexport function jettonContentToCell(content: JettonMinterContent) {\n  return beginCell()\n    .storeUint(content.type, 8)\n    .storeStringTail(content.uri) //Snake logic under the hood\n    .endCell();\n}\n\nexport class JettonMinter implements Contract {\n  constructor(\n    readonly address: Address,\n    readonly init?: { code: Cell; data: Cell }\n  ) {}\n\n  static createFromAddress(address: Address) {\n    return new JettonMinter(address);\n  }\n\n  static createFromConfig(\n    config: JettonMinterConfig,\n    code: Cell,\n    workchain = 0\n  ) {\n    const data = jettonMinterConfigToCell(config);\n    const init = { code, data };\n    const address: Address = contractAddress(workchain, init);\n    return new JettonMinter(address, init);\n  }\n\n  async sendDeploy(provider: ContractProvider, via: Sender, value: bigint) {\n    await provider.internal(via, {\n      value,\n      sendMode: SendMode.PAY_GAS_SEPARATELY,\n      body: beginCell().endCell(),\n    });\n  }\n\n  protected static jettonInternalTransfer(\n    jetton_amount: bigint,\n    forward_ton_amount: bigint,\n    response_addr?: Address,\n    query_id: number | bigint = 0\n  ) {\n    return beginCell()\n      .storeUint(Op.internal_transfer, 32)\n      .storeUint(query_id, 64)\n      .storeCoins(jetton_amount)\n      .storeAddress(null)\n      .storeAddress(response_addr)\n      .storeCoins(forward_ton_amount)\n      .storeBit(false)\n      .endCell();\n  }\n  static mintMessage(\n    from: Address,\n    to: Address,\n    jetton_amount: bigint,\n    forward_ton_amount: bigint,\n    total_ton_amount: bigint,\n    query_id: number | bigint = 0\n  ) {\n    const mintMsg = beginCell()\n      .storeUint(Op.internal_transfer, 32)\n      .storeUint(0, 64)\n      .storeCoins(jetton_amount)\n      .storeAddress(null)\n      .storeAddress(from) // Response addr\n      .storeCoins(forward_ton_amount)\n      .storeMaybeRef(null)\n      .endCell();\n\n    return beginCell()\n      .storeUint(Op.mint, 32)\n      .storeUint(query_id, 64) // op, queryId\n      .storeAddress(to)\n      .storeCoins(total_ton_amount)\n      .storeCoins(jetton_amount)\n      .storeRef(mintMsg)\n      .endCell();\n  }\n  async sendMint(\n    provider: ContractProvider,\n    via: Sender,\n    to: Address,\n    jetton_amount: bigint,\n    forward_ton_amount: bigint,\n    total_ton_amount: bigint\n  ) {\n    if (total_ton_amount <= forward_ton_amount) {\n      throw new Error('Total ton amount should be > forward amount');\n    }\n    await provider.internal(via, {\n      sendMode: SendMode.PAY_GAS_SEPARATELY,\n      body: JettonMinter.mintMessage(\n        this.address,\n        to,\n        jetton_amount,\n        forward_ton_amount,\n        total_ton_amount\n      ),\n      value: total_ton_amount,\n    });\n  }\n\n  /* provide_wallet_address#2c76b973 query_id:uint64 owner_address:MsgAddress include_address:Bool = InternalMsgBody;\n   */\n  static discoveryMessage(owner: Address, include_address: boolean) {\n    return beginCell()\n      .storeUint(0x2c76b973, 32)\n      .storeUint(0, 64) // op, queryId\n      .storeAddress(owner)\n      .storeBit(include_address)\n      .endCell();\n  }\n\n  async sendDiscovery(\n    provider: ContractProvider,\n    via: Sender,\n    owner: Address,\n    include_address: boolean,\n    value: bigint = toNano('0.1')\n  ) {\n    await provider.internal(via, {\n      sendMode: SendMode.PAY_GAS_SEPARATELY,\n      body: JettonMinter.discoveryMessage(owner, include_address),\n      value: value,\n    });\n  }\n\n  static changeAdminMessage(newOwner: Address) {\n    return beginCell()\n      .storeUint(Op.change_admin, 32)\n      .storeUint(0, 64) // op, queryId\n      .storeAddress(newOwner)\n      .endCell();\n  }\n\n  async sendChangeAdmin(\n    provider: ContractProvider,\n    via: Sender,\n    newOwner: Address\n  ) {\n    await provider.internal(via, {\n      sendMode: SendMode.PAY_GAS_SEPARATELY,\n      body: JettonMinter.changeAdminMessage(newOwner),\n      value: toNano('0.05'),\n    });\n  }\n  static changeContentMessage(content: Cell) {\n    return beginCell()\n      .storeUint(Op.change_content, 32)\n      .storeUint(0, 64) // op, queryId\n      .storeRef(content)\n      .endCell();\n  }\n\n  async sendChangeContent(\n    provider: ContractProvider,\n    via: Sender,\n    content: Cell\n  ) {\n    await provider.internal(via, {\n      sendMode: SendMode.PAY_GAS_SEPARATELY,\n      body: JettonMinter.changeContentMessage(content),\n      value: toNano('0.05'),\n    });\n  }\n  async getWalletAddress(\n    provider: ContractProvider,\n    owner: Address\n  ): Promise<Address> {\n    const res = await provider.get('get_wallet_address', [\n      { type: 'slice', cell: beginCell().storeAddress(owner).endCell() },\n    ]);\n    return res.stack.readAddress();\n  }\n\n  async getJettonData(provider: ContractProvider) {\n    let res = await provider.get('get_jetton_data', []);\n    let totalSupply = res.stack.readBigNumber();\n    let mintable = res.stack.readBoolean();\n\n    // let adminAddress = res.stack.readAddress(); Well.....\n    let adminAddress = res.stack.readAddressOpt();\n\n    let content = res.stack.readCell();\n    let walletCode = res.stack.readCell();\n    return {\n      totalSupply,\n      mintable,\n      adminAddress,\n      content,\n      walletCode,\n    };\n  }\n\n  async getTotalSupply(provider: ContractProvider) {\n    let res = await this.getJettonData(provider);\n    return res.totalSupply;\n  }\n  async getAdminAddress(provider: ContractProvider) {\n    let res = await this.getJettonData(provider);\n    return res.adminAddress;\n  }\n  async getContent(provider: ContractProvider) {\n    let res = await this.getJettonData(provider);\n    return res.content;\n  }\n}\n","import {\n  Address,\n  beginCell,\n  Cell,\n  Contract,\n  contractAddress,\n  ContractProvider,\n  Sender,\n  SendMode,\n  toNano,\n} from '@ton/core';\n\nexport type JettonWalletConfig = object;\n\nexport function jettonWalletConfigToCell(config: JettonWalletConfig): Cell {\n  console.log(config);\n  return beginCell().endCell();\n}\n\nexport class JettonWallet implements Contract {\n  constructor(\n    readonly address: Address,\n    readonly init?: { code: Cell; data: Cell }\n  ) {}\n\n  static createFromAddress(address: Address) {\n    return new JettonWallet(address);\n  }\n\n  static createFromConfig(\n    config: JettonWalletConfig,\n    code: Cell,\n    workchain = 0\n  ) {\n    const data = jettonWalletConfigToCell(config);\n    const init = { code, data };\n    return new JettonWallet(contractAddress(workchain, init), init);\n  }\n\n  async sendDeploy(provider: ContractProvider, via: Sender, value: bigint) {\n    await provider.internal(via, {\n      value,\n      sendMode: SendMode.PAY_GAS_SEPARATELY,\n      body: beginCell().endCell(),\n    });\n  }\n\n  async getJettonBalance(provider: ContractProvider) {\n    const state = await provider.getState();\n    if (state.state.type !== 'active') {\n      return 0n;\n    }\n    const res = await provider.get('get_wallet_data', []);\n    return res.stack.readBigNumber();\n  }\n\n  async getJettonMinterAddress(provider: ContractProvider) {\n    const res = await provider.get('get_wallet_data', []);\n    res.stack.skip(2);\n    const jettonMinterAddress = res.stack.readAddress();\n\n    return jettonMinterAddress;\n  }\n\n  static transferMessage(\n    jetton_amount: bigint,\n    to: Address,\n    responseAddress: Address,\n    customPayload: Cell | null,\n    forward_ton_amount: bigint,\n    forwardPayload: Cell | null\n  ) {\n    return beginCell()\n      .storeUint(0xf8a7ea5, 32)\n      .storeUint(0, 64) // op, queryId\n      .storeCoins(jetton_amount)\n      .storeAddress(to)\n      .storeAddress(responseAddress)\n      .storeMaybeRef(customPayload)\n      .storeCoins(forward_ton_amount)\n      .storeMaybeRef(forwardPayload)\n      .endCell();\n  }\n\n  async sendTransfer(\n    provider: ContractProvider,\n    via: Sender,\n    value: bigint,\n    jetton_amount: bigint,\n    to: Address,\n    responseAddress: Address,\n    customPayload: Cell,\n    forward_ton_amount: bigint,\n    forwardPayload: Cell\n  ) {\n    await provider.internal(via, {\n      sendMode: SendMode.PAY_GAS_SEPARATELY,\n      body: JettonWallet.transferMessage(\n        jetton_amount,\n        to,\n        responseAddress,\n        customPayload,\n        forward_ton_amount,\n        forwardPayload\n      ),\n      value: value,\n    });\n  }\n\n  /*\n      burn#595f07bc query_id:uint64 amount:(VarUInteger 16)\n                    response_destination:MsgAddress custom_payload:(Maybe ^Cell)\n                    = InternalMsgBody;\n    */\n  static burnMessage(\n    jetton_amount: bigint,\n    responseAddress: Address,\n    customPayload: Cell | null\n  ) {\n    return beginCell()\n      .storeUint(0x595f07bc, 32)\n      .storeUint(0, 64) // op, queryId\n      .storeCoins(jetton_amount)\n      .storeAddress(responseAddress)\n      .storeMaybeRef(customPayload)\n      .endCell();\n  }\n\n  async sendBurn(\n    provider: ContractProvider,\n    via: Sender,\n    value: bigint,\n    jetton_amount: bigint,\n    responseAddress: Address,\n    customPayload: Cell\n  ) {\n    await provider.internal(via, {\n      sendMode: SendMode.PAY_GAS_SEPARATELY,\n      body: JettonWallet.burnMessage(\n        jetton_amount,\n        responseAddress,\n        customPayload\n      ),\n      value: value,\n    });\n  }\n\n  /*\n      withdraw_tons#107c49ef query_id:uint64 = InternalMsgBody;\n    */\n  static withdrawTonsMessage() {\n    return beginCell()\n      .storeUint(0x6d8e5e3c, 32)\n      .storeUint(0, 64) // op, queryId\n      .endCell();\n  }\n\n  async sendWithdrawTons(provider: ContractProvider, via: Sender) {\n    await provider.internal(via, {\n      sendMode: SendMode.PAY_GAS_SEPARATELY,\n      body: JettonWallet.withdrawTonsMessage(),\n      value: toNano('0.1'),\n    });\n  }\n\n  /*\n      withdraw_jettons#10 query_id:uint64 wallet:MsgAddressInt amount:Coins = InternalMsgBody;\n    */\n  static withdrawJettonsMessage(from: Address, amount: bigint) {\n    return beginCell()\n      .storeUint(0x768a50b2, 32)\n      .storeUint(0, 64) // op, queryId\n      .storeAddress(from)\n      .storeCoins(amount)\n      .storeMaybeRef(null)\n      .endCell();\n  }\n\n  async sendWithdrawJettons(\n    provider: ContractProvider,\n    via: Sender,\n    from: Address,\n    amount: bigint\n  ) {\n    await provider.internal(via, {\n      sendMode: SendMode.PAY_GAS_SEPARATELY,\n      body: JettonWallet.withdrawJettonsMessage(from, amount),\n      value: toNano('0.1'),\n    });\n  }\n\n  async getWalletData(provider: ContractProvider) {\n    const result = await provider.get('get_wallet_data', []);\n    return {\n      balance: result.stack.readBigNumber(),\n      ownerAddress: result.stack.readAddress(),\n      jettonMasterAddress: result.stack.readAddress(),\n      jettonWalletCode: result.stack.readCell(),\n    };\n  }\n}\n","import { Address, beginCell, Cell } from '@ton/core';\n\nexport type WalletConfig = {\n  balance: bigint;\n  ownerAddress: Address;\n  minterAddress: Address;\n};\n\nexport function walletConfigToCell(config: WalletConfig): Cell {\n  return beginCell()\n    .storeCoins(config.balance)\n    .storeAddress(config.ownerAddress)\n    .storeAddress(config.minterAddress)\n    .endCell();\n}\n\nexport const jWalletOpcodes = {\n  transfer: 0xf8a7ea5,\n  internalTransfer: 0x178d4519,\n  burn: 0x595f07bc,\n} as const;\n\nexport const proxyWalletOpcodesV2 = {\n  ...jWalletOpcodes,\n  resetGas: 0x29d22935,\n  tonTransfer: 0x01f3835d,\n} as const;\n\n// export class PTonWalletV2 extends JettonWalletContractBase<\n//   typeof proxyWalletOpcodesV2\n// > {\n//   constructor(\n//     readonly address: Address,\n//     readonly init?: { code: Cell; data: Cell }\n//   ) {\n//     super(proxyWalletOpcodesV2, address, init);\n//   }\n\n//   static createFromConfig(config: WalletConfig, code: Cell, workchain = 0) {\n//     return this.createFromConfigBase(\n//       config,\n//       walletConfigToCell,\n//       code,\n//       workchain\n//     );\n//   }\n\n//   async sendDeploy(provider: ContractProvider, via: Sender, value: bigint) {\n//     await provider.internal(via, {\n//       value,\n//       sendMode: SendMode.PAY_GAS_SEPARATELY,\n//       body: beginCell().endCell(),\n//     });\n//   }\n\n//   static tonTransferMessage(opts: {\n//     tonAmount: bigint;\n//     refundAddress: Address | ExternalAddress | null;\n//     fwdPayload: Cell | Slice;\n//     gas: bigint;\n//     noPayloadOverride?: boolean; // only used to test refund\n//   }) {\n//     let msg_builder = beginMessage(proxyWalletOpcodesV2.tonTransfer)\n//       .storeCoins(opts.tonAmount)\n//       .storeAddress(opts.refundAddress);\n\n//     if (!opts.noPayloadOverride) {\n//       if (opts.fwdPayload instanceof Cell) {\n//         msg_builder = msg_builder.storeUint(1, 1).storeRef(opts.fwdPayload);\n//       } else {\n//         msg_builder = msg_builder.storeUint(0, 1).storeSlice(opts.fwdPayload);\n//       }\n//     }\n//     return msg_builder.endCell();\n//   }\n\n//   async sendTonTransfer(\n//     provider: ContractProvider,\n//     via: Sender,\n//     opts: {\n//       tonAmount: bigint;\n//       refundAddress: Address | ExternalAddress | null;\n//       fwdPayload: Cell | Slice;\n//       gas: bigint;\n//       noPayloadOverride?: boolean; // only used to test refund\n//     },\n//     value?: bigint\n//   ) {\n//     if (!opts.gas) throw new Error('gas is 0');\n\n//     let msg_builder = beginMessage(this.opCodes.tonTransfer)\n//       .storeCoins(opts.tonAmount)\n//       .storeAddress(opts.refundAddress);\n\n//     let msg: Cell;\n//     if (opts.noPayloadOverride) {\n//       msg = msg_builder.endCell();\n//     } else {\n//       if (opts.fwdPayload instanceof Cell) {\n//         msg = msg_builder.storeUint(1, 1).storeRef(opts.fwdPayload).endCell();\n//       } else {\n//         msg = msg_builder.storeUint(0, 1).storeSlice(opts.fwdPayload).endCell();\n//       }\n//     }\n\n//     await provider.internal(via, {\n//       value: value ?? opts.tonAmount + opts.gas,\n//       sendMode: SendMode.PAY_GAS_SEPARATELY,\n//       body: msg,\n//     });\n//   }\n\n//   async sendResetGas(provider: ContractProvider, via: Sender, value: bigint) {\n//     await provider.internal(via, {\n//       value: value,\n//       sendMode: SendMode.PAY_GAS_SEPARATELY,\n//       body: beginMessage(this.opCodes.resetGas).endCell(),\n//     });\n//   }\n// }\n","import {\n  Address,\n  beginCell,\n  Builder,\n  Cell,\n  Contract,\n  contractAddress,\n  ContractProvider,\n  Sender,\n  SendMode,\n  toNano,\n} from '@ton/core';\nimport { ContractOpcodes } from './opCodes';\n\n/** Inital data structures and settings * */\nexport type PositionNFTV3ContractConfig = {\n  poolAddress: Address;\n  userAddress: Address;\n\n  liquidity: bigint;\n  tickLow: number;\n  tickHigh: number;\n\n  feeGrowthInside0LastX128: bigint;\n  feeGrowthInside1LastX128: bigint;\n};\n\nexport function positionNFTv3ContractConfigToCell(\n  config: PositionNFTV3ContractConfig\n): Cell {\n  return beginCell()\n    .storeAddress(config.poolAddress)\n    .storeAddress(config.userAddress)\n    .storeUint(config.liquidity, 128)\n    .storeInt(config.tickLow, 24)\n    .storeInt(config.tickHigh, 24)\n    .storeRef(\n      beginCell()\n        .storeUint(config.feeGrowthInside0LastX128, 256)\n        .storeUint(config.feeGrowthInside1LastX128, 256)\n        .endCell()\n    )\n    .endCell();\n}\n\nexport class PositionNFTV3Contract implements Contract {\n  constructor(\n    readonly address: Address,\n    readonly init?: { code: Cell; data: Cell }\n  ) {}\n\n  static createFromConfig(\n    config: PositionNFTV3ContractConfig,\n    code: Cell,\n    workchain = 0\n  ) {\n    const data = positionNFTv3ContractConfigToCell(config);\n    const init = { code, data };\n    const address = contractAddress(workchain, init);\n    return new PositionNFTV3Contract(address, init);\n  }\n\n  async sendDeploy(provider: ContractProvider, via: Sender, value: bigint) {\n    await provider.internal(via, {\n      value,\n      sendMode: SendMode.PAY_GAS_SEPARATELY,\n      body: beginCell().endCell(),\n    });\n  }\n\n  async sendTransfer(\n    provider: ContractProvider,\n    via: Sender,\n    params: {\n      value?: bigint;\n      to: Address;\n      responseTo?: Address;\n      forwardAmount?: bigint;\n      forwardBody?: Cell | Builder;\n    }\n  ) {\n    await provider.internal(via, {\n      value: params.value ?? toNano('0.05'),\n      body: beginCell()\n        .storeUint(ContractOpcodes.POSITIONNFTV3_NFT_TRANSFER, 32) // op\n        .storeUint(0, 64) // query id\n        .storeAddress(params.to)\n        .storeAddress(params.responseTo)\n        .storeBit(false) // custom payload\n        .storeCoins(params.forwardAmount ?? BigInt(0))\n        .storeMaybeRef(params.forwardBody)\n        .endCell(),\n    });\n  }\n\n  /** Getters * */\n  async getBalance(provider: ContractProvider) {\n    const { stack } = await provider.get('balance', []);\n    return { number: stack.readNumber() };\n  }\n\n  async getUserAddress(provider: ContractProvider): Promise<Address> {\n    const { stack } = await provider.get('getUserAddress', []);\n    return stack.readAddress();\n  }\n\n  async getPoolAddress(provider: ContractProvider): Promise<Address> {\n    const { stack } = await provider.get('getPoolAddress', []);\n    return stack.readAddress();\n  }\n\n  async getPositionInfo(provider: ContractProvider) {\n    const { stack } = await provider.get('getPositionInfo', []);\n    return {\n      liquidity: stack.readBigNumber(),\n      tickLow: stack.readNumber(),\n      tickHigh: stack.readNumber(),\n      feeGrowthInside0LastX128: stack.readBigNumber(),\n      feeGrowthInside1LastX128: stack.readBigNumber(),\n    };\n  }\n\n  /* TODO: Should I use inheritance? */\n  async getData(provider: ContractProvider) {\n    const { stack } = await provider.get('get_nft_data', []);\n    return {\n      inited: stack.readBoolean(),\n      index: stack.readNumber(),\n      collection: stack.readAddressOpt(),\n      owner: stack.readAddressOpt(),\n      content: stack.readCellOpt(),\n    };\n  }\n}\n","import {\n  Address,\n  beginCell,\n  Cell,\n  Contract,\n  contractAddress,\n  ContractProvider,\n  Sender,\n  SendMode,\n  Slice,\n} from '@ton/core';\nimport { ContractErrors, ContractOpcodes } from './opCodes';\nimport {\n  nftContentPackedDefault,\n  nftItemContentPackedDefault,\n} from './PoolV3Contract';\nimport { BLACK_HOLE_ADDRESS, IMPOSSIBLE_FEE } from '../constants';\n\n/** Initial data structures and settings **/\nexport const TIMELOCK_DELAY_DEFAULT: bigint =\n  BigInt(2) * BigInt(24) * BigInt(60) * BigInt(60);\n\nexport type RouterV3ContractConfig = {\n  adminAddress: Address;\n  poolAdminAddress?: Address;\n\n  poolFactoryAddress: Address;\n  flags?: bigint;\n  poolv3_code: Cell;\n  accountv3_code: Cell;\n  position_nftv3_code: Cell;\n\n  timelockDelay?: bigint;\n\n  nonce?: bigint;\n};\n\nexport function routerv3ContractConfigToCell(\n  config: RouterV3ContractConfig\n): Cell {\n  return beginCell()\n    .storeAddress(config.adminAddress)\n    .storeAddress(config.poolAdminAddress ?? config.adminAddress)\n    .storeAddress(config.poolFactoryAddress)\n    .storeUint(config.flags ?? 0, 64)\n    .storeUint(0, 64) // seqno\n\n    .storeRef(\n      beginCell()\n        .storeRef(config.poolv3_code)\n        .storeRef(config.accountv3_code)\n        .storeRef(config.position_nftv3_code)\n        .endCell()\n    )\n\n    .storeRef(\n      beginCell()\n        .storeUint(config.timelockDelay ?? TIMELOCK_DELAY_DEFAULT, 64) // timelock Delay\n        .storeUint(0, 3) // 3 maybe refs for active timelocks\n        .endCell()\n    )\n    .storeUint(config.nonce ?? 0, 64)\n    .endCell();\n}\n\nexport function routerv3ContractCellToConfig(c: Cell): RouterV3ContractConfig {\n  let s: Slice = c.beginParse();\n\n  const adminAddress: Address = s.loadAddress();\n  const poolAdminAddress: Address = s.loadAddress();\n  const poolFactoryAddress: Address = s.loadAddress();\n  const flags = s.loadUintBig(64);\n\n  const seqno = s.loadUintBig(64);\n\n  const subcodes = s.loadRef().beginParse();\n  const poolv3_code: Cell = subcodes.loadRef();\n  const accountv3_code: Cell = subcodes.loadRef();\n  const position_nftv3_code: Cell = subcodes.loadRef();\n\n  const timelocks = s.loadRef().beginParse();\n  const timelockDelay: bigint = timelocks.loadUintBig(64);\n\n  let nonce: bigint | undefined = undefined;\n  if (s.remainingBits != 0) {\n    nonce = s.loadUintBig(64);\n  }\n\n  return {\n    adminAddress,\n    poolAdminAddress,\n    poolFactoryAddress,\n    flags,\n    poolv3_code,\n    accountv3_code,\n    position_nftv3_code,\n    timelockDelay,\n    nonce,\n  };\n}\n\nexport class RouterV3Contract implements Contract {\n  constructor(\n    readonly address: Address,\n    readonly init?: { code: Cell; data: Cell }\n  ) {}\n\n  static createFromConfig(\n    config: RouterV3ContractConfig,\n    code: Cell,\n    workchain = 0\n  ) {\n    const data = routerv3ContractConfigToCell(config);\n    const init = { code, data };\n    const address = contractAddress(workchain, init);\n    return new RouterV3Contract(address, init);\n  }\n\n  async sendDeploy(provider: ContractProvider, via: Sender, value: bigint) {\n    await provider.internal(via, {\n      value,\n      sendMode: SendMode.PAY_GAS_SEPARATELY,\n      body: beginCell().endCell(),\n    });\n  }\n\n  static deployPoolMessage(\n    jetton0WalletAddr: Address,\n    jetton1WalletAddr: Address,\n    tickSpacing: number,\n    sqrtPriceX96: bigint,\n    activatePool: boolean,\n    opts: {\n      jetton0Minter?: Address;\n      jetton1Minter?: Address;\n      controllerAddress?: Address;\n\n      nftContentPacked?: Cell;\n      nftItemContentPacked?: Cell;\n\n      protocolFee?: number;\n      lpFee?: number;\n      currentFee?: number;\n    }\n  ): Cell {\n    const msg_body: Cell = beginCell()\n      .storeUint(ContractOpcodes.ROUTERV3_CREATE_POOL, 32) // OP code\n      .storeUint(0, 64) // query_id\n      .storeAddress(jetton0WalletAddr)\n      .storeAddress(jetton1WalletAddr)\n      .storeUint(tickSpacing, 24)\n      .storeUint(sqrtPriceX96, 160)\n      .storeUint(activatePool ? 1 : 0, 1)\n      .storeUint(opts.protocolFee ? opts.protocolFee : IMPOSSIBLE_FEE, 16)\n      .storeUint(opts.lpFee ? opts.lpFee : IMPOSSIBLE_FEE, 16)\n      .storeUint(opts.currentFee ? opts.currentFee : IMPOSSIBLE_FEE, 16)\n\n      .storeRef(opts.nftContentPacked ?? nftContentPackedDefault)\n      .storeRef(opts.nftItemContentPacked ?? nftItemContentPackedDefault)\n      .storeRef(\n        beginCell()\n          .storeAddress(opts.jetton0Minter)\n          .storeAddress(opts.jetton1Minter)\n          .storeAddress(opts.controllerAddress)\n          .endCell()\n      )\n      .endCell();\n    return msg_body;\n  }\n\n  /* We need to rework printParsedInput not to double the code */\n  static unpackDeployPoolMessage(\n    body: Cell\n  ): {\n    jetton0WalletAddr: Address;\n    jetton1WalletAddr: Address;\n    tickSpacing: number;\n    sqrtPriceX96: bigint;\n    activatePool: boolean;\n    jetton0Minter?: Address;\n    jetton1Minter?: Address;\n    controllerAddress?: Address;\n\n    nftContentPacked?: Cell;\n    nftItemContentPacked?: Cell;\n\n    protocolFee?: number;\n    lpFee?: number;\n    currentFee?: number;\n  } {\n    let s = body.beginParse();\n    const op = s.loadUint(32);\n    if (op != ContractOpcodes.ROUTERV3_CREATE_POOL) throw Error('Wrong opcode');\n\n    const query_id = s.loadUint(64);\n    const jetton0WalletAddr = s.loadAddress();\n    const jetton1WalletAddr = s.loadAddress();\n    let tickSpacing = s.loadInt(24);\n    let sqrtPriceX96 = s.loadUintBig(160);\n    let activatePool = s.loadUint(1) != 0;\n\n    const protocolFeeV = s.loadUint(16);\n    const protocolFee =\n      protocolFeeV < IMPOSSIBLE_FEE ? protocolFeeV : undefined;\n    const lpFeeV = s.loadUint(16);\n    const lpFee = lpFeeV < IMPOSSIBLE_FEE ? lpFeeV : undefined;\n    const currentFeeV = s.loadUint(16);\n    const currentFee = currentFeeV < IMPOSSIBLE_FEE ? currentFeeV : undefined;\n\n    let nftContentPacked = s.loadRef();\n    let nftItemContentPacked = s.loadRef();\n\n    let s1 = s.loadRef().beginParse();\n    let jetton0Minter = s1.loadAddress();\n    let jetton1Minter = s1.loadAddress();\n    let controllerAddress = s1.loadAddress();\n\n    return {\n      jetton0WalletAddr,\n      jetton1WalletAddr,\n      tickSpacing,\n      sqrtPriceX96,\n      activatePool,\n      jetton0Minter,\n      jetton1Minter,\n      controllerAddress,\n      nftContentPacked,\n      nftItemContentPacked,\n      protocolFee,\n      lpFee,\n      currentFee,\n    };\n  }\n\n  /* Deploy pool */\n\n  async sendDeployPool(\n    provider: ContractProvider,\n    sender: Sender,\n    value: bigint,\n    jetton0WalletAddr: Address,\n    jetton1WalletAddr: Address,\n    tickSpacing: number,\n    sqrtPriceX96: bigint,\n    activatePool: boolean,\n    opts: {\n      jetton0Minter?: Address;\n      jetton1Minter?: Address;\n      controllerAddress?: Address;\n\n      nftContentPacked?: Cell;\n      nftItemContentPacked?: Cell;\n\n      protocolFee?: number;\n      lpFee?: number;\n      currentFee?: number;\n    }\n  ) {\n    const msg_body = RouterV3Contract.deployPoolMessage(\n      jetton0WalletAddr,\n      jetton1WalletAddr,\n      tickSpacing,\n      sqrtPriceX96,\n      activatePool,\n      opts\n    );\n    await provider.internal(sender, {\n      value,\n      sendMode: SendMode.PAY_GAS_SEPARATELY,\n      body: msg_body,\n    });\n  }\n\n  async sendResetGas(\n    provider: ContractProvider,\n    sender: Sender,\n    value: bigint\n  ) {\n    const msg_body = beginCell()\n      .storeUint(ContractOpcodes.ROUTERV3_RESET_GAS, 32) // OP code\n      .storeUint(0, 64) // QueryID what for?\n      .endCell();\n\n    return await provider.internal(sender, {\n      value,\n      sendMode: SendMode.PAY_GAS_SEPARATELY,\n      body: msg_body,\n    });\n  }\n\n  /* =============  CHANGE ADMIN =============  */\n\n  static changeAdminStartMessage(opts: {\n    newCode?: Cell;\n    newAdmin?: Address;\n    newFlags?: bigint;\n  }): Cell {\n    let msg = beginCell()\n      .storeUint(ContractOpcodes.ROUTERV3_CHANGE_ADMIN_START, 32) // OP code\n      .storeUint(0, 64); // QueryID what for?\n\n    if (opts.newAdmin == undefined) {\n      msg.storeUint(0, 1);\n      msg.storeAddress(null);\n    } else {\n      msg.storeUint(1, 1);\n      msg.storeAddress(opts.newAdmin);\n    }\n\n    if (opts.newFlags == undefined) {\n      msg.storeUint(0, 1);\n      msg.storeUint(0, 64);\n    } else {\n      msg.storeUint(1, 1);\n      msg.storeUint(opts.newFlags, 64);\n    }\n\n    if (opts.newCode == undefined) {\n      msg.storeUint(0, 1);\n    } else {\n      msg.storeMaybeRef(opts.newCode);\n    }\n    return msg.endCell();\n  }\n\n  static unpackChangeAdminStartMessage(\n    body: Cell\n  ): {\n    newCode?: Cell;\n    newAdmin?: Address;\n    newFlags?: bigint;\n  } {\n    let s = body.beginParse();\n    const op = s.loadUint(32);\n    if (op != ContractOpcodes.ROUTERV3_CHANGE_ADMIN_START)\n      throw Error('Wrong opcode');\n\n    const query_id = s.loadUint(64);\n\n    const setAdmin = s.loadBoolean();\n    const newAdmin = setAdmin ? s.loadAddress() : undefined;\n    if (!setAdmin) {\n      s.loadUint(2);\n    }\n\n    const setFlags = s.loadBoolean();\n    const newFlags = setFlags ? s.loadUintBig(64) : undefined;\n    if (!setFlags) {\n      s.loadUintBig(64);\n    }\n\n    const newCodeV = s.loadMaybeRef();\n    const newCode = newCodeV != null ? newCodeV : undefined;\n\n    return { newAdmin, newFlags, newCode };\n  }\n\n  async sendChangeAdminStart(\n    provider: ContractProvider,\n    sender: Sender,\n    value: bigint,\n    opts: {\n      newCode?: Cell;\n      newAdmin?: Address;\n      newFlags?: bigint;\n    }\n  ) {\n    const msg_body = RouterV3Contract.changeAdminStartMessage(opts);\n    return await provider.internal(sender, {\n      value,\n      sendMode: SendMode.PAY_GAS_SEPARATELY,\n      body: msg_body,\n    });\n  }\n\n  static changeAdminCommitMessage(): Cell {\n    let msg = beginCell()\n      .storeUint(ContractOpcodes.ROUTERV3_CHANGE_ADMIN_COMMIT, 32) // OP code\n      .storeUint(0, 64) // QueryID what for?\n      .endCell();\n    return msg;\n  }\n\n  static unpackChangeAdminCommitMessage(body: Cell): {} {\n    let s = body.beginParse();\n    const op = s.loadUint(32);\n    if (op != ContractOpcodes.ROUTERV3_CHANGE_ADMIN_COMMIT)\n      throw Error('Wrong opcode');\n    const query_id = s.loadUint(64);\n    return {};\n  }\n\n  async sendChangeAdminCommit(\n    provider: ContractProvider,\n    sender: Sender,\n    value: bigint\n  ) {\n    const msg_body = RouterV3Contract.changeAdminCommitMessage();\n    return await provider.internal(sender, {\n      value,\n      sendMode: SendMode.PAY_GAS_SEPARATELY,\n      body: msg_body,\n    });\n  }\n\n  /* =============  CHANGE PARAMS =============  */\n\n  static changeRouterParamMessage(opts: {\n    newPoolAdmin?: Address;\n    newPoolFactory?: Address;\n    //   newFlags? : bigint\n  }): Cell {\n    return (\n      beginCell()\n        .storeUint(ContractOpcodes.ROUTERV3_CHANGE_PARAMS, 32) // OP code\n        .storeUint(0, 64) // QueryID what for?\n        //            .storeUint(opts.newFlags ? 1 : 0, 1)\n        //            .storeUint(opts.newFlags ?? 0, 64)\n        .storeUint(opts.newPoolFactory ? 1 : 0, 1)\n        .storeAddress(opts.newPoolFactory ?? BLACK_HOLE_ADDRESS)\n        .storeUint(opts.newPoolAdmin ? 1 : 0, 1)\n        .storeAddress(opts.newPoolAdmin ?? BLACK_HOLE_ADDRESS)\n        .endCell()\n    );\n  }\n\n  static unpackChangeRouterParamMessage(\n    body: Cell\n  ): {\n    newPoolAdmin?: Address;\n    newPoolFactory?: Address;\n    //        newFlags? : bigint\n  } {\n    let s = body.beginParse();\n    const op = s.loadUint(32);\n    if (op != ContractOpcodes.ROUTERV3_CHANGE_PARAMS)\n      throw Error('Wrong opcode');\n\n    const query_id = s.loadUint(64);\n    //        const hasNewFlags = s.loadBit()\n    //        const newFlags = hasNewFlags ? s.loadUintBig(64) : undefined\n\n    const hasPoolFactory = s.loadBit();\n    const newPoolFactoryV = s.loadAddress();\n    const newPoolFactory = hasPoolFactory ? newPoolFactoryV : undefined;\n\n    const hasPoolAdmin = s.loadBit();\n    const newPoolAdminV = s.loadAddress();\n    const newPoolAdmin = hasPoolAdmin ? newPoolAdminV : undefined;\n\n    return { newPoolAdmin, newPoolFactory };\n  }\n\n  async sendChangeRouterParams(\n    provider: ContractProvider,\n    sender: Sender,\n    value: bigint,\n    opts: {\n      newPoolAdmin?: Address;\n      newPoolFactory?: Address;\n    }\n  ) {\n    const msg_body = RouterV3Contract.changeRouterParamMessage(opts);\n    return await provider.internal(sender, {\n      value,\n      sendMode: SendMode.PAY_GAS_SEPARATELY,\n      body: msg_body,\n    });\n  }\n\n  /** Getters **/\n  async getState(provider: ContractProvider) {\n    const { stack } = await provider.get('getRouterState', []);\n    return {\n      admin: stack.readAddress(),\n      pool_admin: stack.readAddress(),\n      pool_factory: stack.readAddress(),\n      flags: stack.readBigNumber(),\n      pool_seqno: stack.readBigNumber(),\n    };\n  }\n\n  async getAdminAddress(provider: ContractProvider): Promise<Address> {\n    const state = await this.getState(provider);\n    return state.admin;\n  }\n\n  async getPoolFactoryAddress(provider: ContractProvider): Promise<Address> {\n    const state = await this.getState(provider);\n    return state.pool_factory;\n  }\n\n  async getPoolAddress(\n    provider: ContractProvider,\n    jetton0WalletAddr: Address,\n    jetton1WalletAddr: Address\n  ): Promise<Address> {\n    const { stack } = await provider.get('getPoolAddress', [\n      {\n        type: 'slice',\n        cell: beginCell()\n          .storeAddress(jetton0WalletAddr)\n          .endCell(),\n      },\n      {\n        type: 'slice',\n        cell: beginCell()\n          .storeAddress(jetton1WalletAddr)\n          .endCell(),\n      },\n    ]);\n    return stack.readAddress();\n  }\n\n  async getChildContracts(provider: ContractProvider) {\n    const { stack } = await provider.get('getChildContracts', []);\n    return {\n      poolCode: stack.readCell(),\n      accountCode: stack.readCell(),\n      positionNFTCode: stack.readCell(),\n    };\n  }\n\n  async getPoolInitialData(\n    provider: ContractProvider,\n    jetton0WalletAddr: Address,\n    jetton1WalletAddr: Address\n  ): Promise<Cell> {\n    const { stack } = await provider.get('getPoolInitialData', [\n      {\n        type: 'slice',\n        cell: beginCell()\n          .storeAddress(jetton0WalletAddr)\n          .endCell(),\n      },\n      {\n        type: 'slice',\n        cell: beginCell()\n          .storeAddress(jetton1WalletAddr)\n          .endCell(),\n      },\n    ]);\n    return stack.readCell();\n  }\n\n  async getPoolStateInit(\n    provider: ContractProvider,\n    jetton0WalletAddr: Address,\n    jetton1WalletAddr: Address\n  ): Promise<Cell> {\n    const { stack } = await provider.get('getPoolStateInit', [\n      {\n        type: 'slice',\n        cell: beginCell()\n          .storeAddress(jetton0WalletAddr)\n          .endCell(),\n      },\n      {\n        type: 'slice',\n        cell: beginCell()\n          .storeAddress(jetton1WalletAddr)\n          .endCell(),\n      },\n    ]);\n    return stack.readCell();\n  }\n\n  public static RESULT_SWAP_OK = ContractErrors.POOLV3_RESULT_SWAP_OK;\n  public static RESULT_BURN_OK = ContractErrors.POOLV3_RESULT_BURN_OK;\n}\n","import {\n  Address,\n  beginCell,\n  Cell,\n  Contract,\n  contractAddress,\n  ContractProvider,\n  Sender,\n  SendMode,\n} from '@ton/core';\nimport { ContractOpcodes } from './opCodes';\n\n/** Initial data structures and settings **/\nexport type AccountV3ContractConfig = {\n  user: Address;\n  pool: Address;\n  stored0: bigint;\n  stored1: bigint;\n\n  /** Well... **/\n  enough0: bigint;\n  enough1: bigint;\n};\n\nexport function accountv3ContractConfigToCell(\n  config: AccountV3ContractConfig\n): Cell {\n  return beginCell()\n    .storeAddress(config.user)\n    .storeAddress(config.pool)\n    .storeRef(\n      beginCell()\n        .storeCoins(config.stored0)\n        .storeCoins(config.stored1)\n        .storeCoins(config.enough0)\n        .storeCoins(config.enough1)\n        .endCell()\n    )\n    .endCell();\n}\n\nexport class AccountV3Contract implements Contract {\n  constructor(\n    readonly address: Address,\n    readonly init?: { code: Cell; data: Cell }\n  ) {}\n\n  static createFromConfig(\n    config: AccountV3ContractConfig,\n    code: Cell,\n    workchain = 0\n  ) {\n    const data = accountv3ContractConfigToCell(config);\n    const init = { code, data };\n    const address = contractAddress(workchain, init);\n\n    return new AccountV3Contract(address, init);\n  }\n\n  async sendDeploy(provider: ContractProvider, sender: Sender, value: bigint) {\n    await provider.internal(sender, {\n      value,\n      sendMode: SendMode.PAY_GAS_SEPARATELY,\n      body: beginCell().endCell(),\n    });\n  }\n\n  async sendResetGas(\n    provider: ContractProvider,\n    sender: Sender,\n    value: bigint\n  ) {\n    const msg_body = beginCell()\n      .storeUint(ContractOpcodes.ACCOUNTV3_RESET_GAS, 32) // OP code\n      .storeUint(0, 64) // QueryID what for?\n      .endCell();\n\n    return await provider.internal(sender, {\n      value,\n      sendMode: SendMode.PAY_GAS_SEPARATELY,\n      body: msg_body,\n    });\n  }\n\n  /* Test only : Would be accepted only from pool */\n  async sendAddLiquidity(\n    provider: ContractProvider,\n    sender: Sender,\n    value: bigint,\n\n    newAmount0: bigint,\n    newAmount1: bigint,\n    minLPOut: bigint\n  ) {\n    const msg_body = beginCell()\n      .storeUint(ContractOpcodes.ACCOUNTV3_ADD_LIQUIDITY, 32) // OP code\n      .storeCoins(newAmount0)\n      .storeCoins(newAmount1)\n      .storeCoins(minLPOut)\n      .endCell();\n\n    return await provider.internal(sender, {\n      value,\n      sendMode: SendMode.PAY_GAS_SEPARATELY,\n      body: msg_body,\n    });\n  }\n\n  async sendRefundMe(\n    provider: ContractProvider,\n    sender: Sender,\n    value: bigint\n  ) {\n    const msg_body = beginCell()\n      .storeUint(ContractOpcodes.ACCOUNTV3_REFUND_ME, 32) // OP code\n      .storeUint(0, 64) // query_id\n      .endCell();\n\n    return await provider.internal(sender, {\n      value,\n      sendMode: SendMode.PAY_GAS_SEPARATELY,\n      body: msg_body,\n    });\n  }\n\n  async refundMe(provider: ContractProvider, sender: Sender, value: bigint) {\n    const msg_body = beginCell()\n      .storeUint(ContractOpcodes.ACCOUNTV3_REFUND_ME, 32) // OP code\n      .endCell();\n\n    return await provider.internal(sender, {\n      value,\n      sendMode: SendMode.PAY_GAS_SEPARATELY,\n      body: msg_body,\n    });\n  }\n\n  /* Getters */\n\n  async getAccountData(provider: ContractProvider) {\n    const { stack } = await provider.get('get_account_data', []);\n    return {\n      user_address: stack.readAddress(),\n      pool_address: stack.readAddress(),\n      amount0: stack.readBigNumber(),\n      amount1: stack.readBigNumber(),\n\n      enought0: stack.readBigNumber(),\n      enought1: stack.readBigNumber(),\n    };\n  }\n}\n","import {\n  Address,\n  beginCell,\n  Cell,\n  Contract,\n  contractAddress,\n  ContractProvider,\n  Sender,\n  SendMode,\n} from '@ton/core';\nimport { ContractOpcodes } from './opCodes';\n\nexport type PoolFactoryContractConfig = {\n  adminAddress: Address;\n  routerAddress: Address;\n  nftv3Content: Cell;\n  nftv3itemContent: Cell;\n};\n\nexport function poolFactoryContractConfigToCell(\n  config: PoolFactoryContractConfig\n): Cell {\n  return beginCell()\n    .storeAddress(config.adminAddress)\n    .storeAddress(config.routerAddress)\n    .storeRef(config.nftv3Content)\n    .storeRef(config.nftv3itemContent)\n    .endCell();\n}\n\nexport class PoolFactoryContract implements Contract {\n  constructor(\n    readonly address: Address,\n    readonly init?: { code: Cell; data: Cell }\n  ) {}\n\n  static createFromConfig(\n    config: PoolFactoryContractConfig,\n    code: Cell,\n    workchain = 0\n  ) {\n    const data = poolFactoryContractConfigToCell(config);\n    const init = { code, data };\n    const address = contractAddress(workchain, init);\n    return new PoolFactoryContract(address, init);\n  }\n\n  async sendDeploy(provider: ContractProvider, via: Sender, value: bigint) {\n    await provider.internal(via, {\n      value,\n      sendMode: SendMode.PAY_GAS_SEPARATELY,\n      body: beginCell().endCell(),\n    });\n  }\n\n  public static deployPoolMessage(\n    jetton0Minter: Address,\n    jetton1Minter: Address,\n    sqrtPriceX96: bigint,\n    settings: bigint,\n    jetton0Wallet: Address,\n    jetton1Wallet: Address\n  ): Cell {\n    const msg_body: Cell = beginCell()\n      .storeUint(ContractOpcodes.POOL_FACTORY_CREATE_POOL, 32) // OP code\n      .storeUint(0, 64) // query_id\n      .storeAddress(jetton0Minter)\n      .storeAddress(jetton1Minter)\n      .storeUint(sqrtPriceX96, 160)\n      .storeUint(settings, 16)\n      .storeRef(\n        beginCell()\n          .storeAddress(jetton0Wallet)\n          .storeAddress(jetton1Wallet)\n          .endCell()\n      )\n      .endCell();\n    return msg_body;\n  }\n\n  /* We need to rework printParsedInput not to double the code */\n  static unpackDeployPoolMessage(\n    body: Cell\n  ): {\n    jetton0Minter: Address;\n    jetton1Minter: Address;\n    sqrtPriceX96: bigint;\n    settings: bigint;\n    jetton0Wallet: Address;\n    jetton1Wallet: Address;\n  } {\n    let s = body.beginParse();\n    const op = s.loadUint(32);\n    if (op != ContractOpcodes.ROUTERV3_CREATE_POOL) throw Error('Wrong opcode');\n\n    const query_id = s.loadUint(64);\n    const jetton0Minter = s.loadAddress();\n    const jetton1Minter = s.loadAddress();\n    const sqrtPriceX96 = s.loadUintBig(160);\n    const settings = s.loadUintBig(16);\n\n    const wallets = s.loadRef().beginParse();\n    const jetton0Wallet = wallets.loadAddress();\n    const jetton1Wallet = wallets.loadAddress();\n\n    return {\n      jetton0Minter,\n      jetton1Minter,\n      sqrtPriceX96,\n      settings,\n      jetton0Wallet,\n      jetton1Wallet,\n    };\n  }\n\n  /* Deploy pool */\n\n  async sendDeployPool(\n    provider: ContractProvider,\n    sender: Sender,\n    value: bigint,\n    jetton0Minter: Address,\n    jetton1Minter: Address,\n    sqrtPriceX96: bigint,\n    settings: bigint,\n    jetton0Wallet: Address,\n    jetton1Wallet: Address\n  ) {\n    const msg_body = PoolFactoryContract.deployPoolMessage(\n      jetton0Minter,\n      jetton1Minter,\n      sqrtPriceX96,\n      settings,\n      jetton0Wallet,\n      jetton1Wallet\n    );\n    await provider.internal(sender, {\n      value,\n      sendMode: SendMode.PAY_GAS_SEPARATELY,\n      body: msg_body,\n    });\n  }\n\n  async sendNewData(\n    provider: ContractProvider,\n    via: Sender,\n    value: bigint,\n    routerAddress: Address,\n    nftv3Content?: Cell,\n    nftv3itemContent?: Cell\n  ) {\n    await provider.internal(via, {\n      value: value,\n      body: beginCell()\n        .storeUint(ContractOpcodes.POOL_FACTORY_CHANGE_PARAMS, 32) // op\n        .storeUint(0, 64) // query id\n        .storeAddress(routerAddress)\n        .storeRef(nftv3Content ?? Cell.EMPTY)\n        .storeRef(nftv3itemContent ?? Cell.EMPTY)\n        .endCell(),\n    });\n  }\n\n  /* Getters */\n  async getPoolFactoryData(provider: ContractProvider) {\n    const { stack } = await provider.get('getPoolFactoryData', []);\n    return {\n      admin_address: stack.readAddress(),\n      router_address: stack.readAddress(),\n      nftv3_content: stack.readCell(),\n      nftv3item_content: stack.readCell(),\n    };\n  }\n}\n","// @ts-nocheck\nimport {\n  Address,\n  beginCell,\n  toNano,\n  SenderArguments,\n  Builder,\n  SendMode,\n} from '@ton/ton';\nimport invariant from 'tiny-invariant';\nimport JSBI from 'jsbi';\nimport { crc32 } from 'crc';\nimport { Api, Trace } from 'tonapi-sdk-js';\nimport { ONE, ZERO } from '../constants/internalConstants';\nimport { Jetton, JettonAmount, Percent, Position } from '../entities';\nimport { ContractOpcodes } from '../contracts/opCodes';\nimport {\n  POOL_FACTORY,\n  pTON_MINTER,\n  pTON_ROUTER_WALLET,\n  ROUTER,\n} from '../constants/addresses';\nimport { PoolV3Contract } from '../contracts/PoolV3Contract';\nimport { JettonWallet } from '../contracts/common/JettonWallet';\nimport { proxyWalletOpcodesV2 } from '../contracts/common/PTonWalletV2';\nimport { emulateMessage } from '../functions/emulateMessage';\nimport { WalletVersion } from '../types/WalletVersion';\nimport { PoolFactoryContract } from '../contracts';\n\nexport enum SwapType {\n  TON_TO_JETTON = 0,\n  JETTON_TO_TON = 1,\n  JETTON_TO_JETTON = 2,\n}\n\nenum CollectType {\n  TON = 0,\n  JETTON = 1,\n  TON_JETTON = 2,\n  JETTON_TON = 3,\n}\n\nconst getTonRefundAmount = (trace: Trace[]): bigint => {\n  const isForked = trace.length > 1;\n  const in_msg_0 = trace[0].transaction.in_msg;\n\n  if (\n    in_msg_0?.op_code === '0x0f8a7ea5' && // \"jetton_transfer\"\n    in_msg_0?.destination?.address ===\n      Address.parse(pTON_ROUTER_WALLET).toRawString()\n  ) {\n    return BigInt(in_msg_0.decoded_body.amount);\n  }\n\n  if (isForked) {\n    const in_msg_1 = trace[1].transaction.in_msg;\n\n    if (\n      in_msg_1?.op_code === '0x0f8a7ea5' && // \"jetton_transfer\"\n      in_msg_1?.destination?.address ===\n        Address.parse(pTON_ROUTER_WALLET).toRawString()\n    ) {\n      return BigInt(in_msg_1.decoded_body.amount);\n    }\n\n    if (!trace[1].children && trace[0].children) {\n      const childResult = getTonRefundAmount(trace[0].children);\n      if (childResult !== BigInt(0)) {\n        return childResult;\n      }\n    } else if (trace[1].children && !trace[0].children) {\n      const childResult = getTonRefundAmount(trace[1].children);\n      if (childResult !== BigInt(0)) {\n        return childResult;\n      }\n    }\n  } else {\n    if (trace[0].children) {\n      const childResult = getTonRefundAmount(trace[0].children);\n      if (childResult !== BigInt(0)) {\n        return childResult;\n      }\n    }\n  }\n\n  return BigInt(0);\n};\n\nfunction beginMessage(op: bigint | number | string): Builder {\n  return beginCell()\n    .storeUint(typeof op === 'string' ? crc32(op) : op, 32)\n    .storeUint(BigInt(Math.floor(Math.random() * 2 ** 31)), 64);\n}\n\nexport class PoolMessageManager {\n  /**\n   * Cannot be constructed.\n   */\n  private constructor() {}\n\n  public static gasUsage = {\n    TRANSFER_GAS: toNano(0.05),\n\n    MINT_GAS: toNano(0.4),\n\n    SWAP_GAS: toNano(0.4),\n    SWAP_GAS_SLIPPAGE: toNano(0.1),\n\n    BURN_GAS: toNano(0.3),\n    BURN_GAS_SLIPPAGE: toNano(0.1),\n\n    DEPLOY_POOL_GAS: toNano(0.2),\n  };\n\n  public static createDeployPoolMessage(\n    jetton0Minter: Address,\n    jetton1Minter: Address,\n    sqrtPriceX96: bigint,\n    settings: bigint,\n    jetton0Wallet: Address,\n    jetton1Wallet: Address\n  ): SenderArguments {\n    const payload = PoolFactoryContract.deployPoolMessage(\n      jetton0Minter,\n      jetton1Minter,\n      sqrtPriceX96,\n      settings,\n      jetton0Wallet,\n      jetton1Wallet\n    );\n\n    const message = {\n      to: Address.parse(POOL_FACTORY),\n      value: this.gasUsage.DEPLOY_POOL_GAS,\n      body: payload,\n    };\n\n    return message;\n  }\n\n  public static createMintMessage(\n    routerJetton0Wallet: Address,\n    routerJetton1Wallet: Address,\n    userJetton0Wallet: Address,\n    userJetton1Wallet: Address,\n    position: Position,\n    recipient: Address,\n    slippage: Percent = new Percent(1, 100), // 1 %\n    txFee: bigint = this.gasUsage.MINT_GAS, // 0.4\n    forwardGas: bigint = this.gasUsage.TRANSFER_GAS * BigInt(2) // 0.1 // 2 maximum transfers per 1 msg\n  ): SenderArguments[] {\n    invariant(JSBI.greaterThan(position.liquidity, ZERO), 'ZERO_LIQUIDITY');\n\n    const mintPartGas = txFee / BigInt(2);\n    const messages = [];\n\n    const { amount0, amount1 } = position.mintAmounts;\n    const isSorted = PoolV3Contract.orderJettonId(\n      routerJetton0Wallet,\n      routerJetton1Wallet\n    );\n\n    const jetton0Amount = isSorted\n      ? BigInt(amount0.toString())\n      : BigInt(amount1.toString());\n    const jetton1Amount = isSorted\n      ? BigInt(amount1.toString())\n      : BigInt(amount0.toString());\n\n    const slippageMultiplier = slippage.add(ONE);\n\n    /* to transfer with slippage */\n    const amount0WithSlippage = BigInt(\n      slippageMultiplier.multiply(jetton0Amount.toString()).quotient.toString()\n    );\n    const amount1WithSlippage = BigInt(\n      slippageMultiplier.multiply(jetton1Amount.toString()).quotient.toString()\n    );\n\n    const isJetton0TON = routerJetton0Wallet.equals(\n      Address.parse(pTON_ROUTER_WALLET)\n    );\n    const isJetton1TON = routerJetton1Wallet.equals(\n      Address.parse(pTON_ROUTER_WALLET)\n    );\n\n    let mintRequest0;\n    let mintRequest1;\n\n    mintRequest0 = beginCell()\n      .storeUint(ContractOpcodes.POOLV3_FUND_ACCOUNT, 32) // Request to minting part 0\n      .storeAddress(routerJetton1Wallet) // Jetton1 Wallet attached to Router is used to identify target token\n      .storeCoins(jetton0Amount)\n      .storeCoins(jetton1Amount)\n      .storeUint(BigInt(position.liquidity.toString()), 128) // Liquidity. First transaction don't want actully to mint anything.\n      .storeInt(BigInt(position.tickLower.toString()), 24) // Min tick.  Actually for the part 1 could be 0 it is ignored\n      .storeInt(BigInt(position.tickUpper.toString()), 24) // Max tick.  Actually for the part 1 could be 0 it is ignored\n      .endCell();\n\n    mintRequest1 = beginCell()\n      .storeUint(ContractOpcodes.POOLV3_FUND_ACCOUNT, 32) // Request to minting part 1\n      .storeAddress(routerJetton0Wallet) // Jetton0 Wallet attached to Router is used to identify target token\n      .storeCoins(jetton1Amount)\n      .storeCoins(jetton0Amount)\n      .storeUint(BigInt(position.liquidity.toString()), 128) // Liquidity to mint\n      .storeInt(BigInt(position.tickLower.toString()), 24) // Min tick.\n      .storeInt(BigInt(position.tickUpper.toString()), 24) // Max tick.\n      .endCell();\n\n    if (isJetton0TON) {\n      mintRequest0 = beginCell()\n        .storeUint(proxyWalletOpcodesV2.tonTransfer, 32)\n        .storeUint(0, 64) // query_id\n        .storeCoins(jetton0Amount) // ton To Send. It would we wrapped and then lp minted from them\n        .storeAddress(recipient) // refundAddress\n        .storeUint(1, 1) // flag that shows that paylod is a cell\n        .storeRef(mintRequest0) // Instructions for the pool\n        .endCell();\n    }\n\n    // isTON\n    if (isJetton1TON) {\n      mintRequest1 = beginCell()\n        .storeUint(proxyWalletOpcodesV2.tonTransfer, 32)\n        .storeUint(0, 64) // query_id\n        .storeCoins(jetton1Amount) // ton To Send. It would we wrapped and then lp minted from them\n        .storeAddress(recipient) // refundAddress\n        .storeUint(1, 1) // flag that shows that paylod is a cell\n        .storeRef(mintRequest1) // Instructions for the pool\n        .endCell();\n    }\n\n    const payload0 = JettonWallet.transferMessage(\n      amount0WithSlippage,\n      Address.parse(ROUTER),\n      recipient,\n      null,\n      forwardGas, // 0.1\n      mintRequest0\n    );\n\n    const payload1 = JettonWallet.transferMessage(\n      amount1WithSlippage,\n      Address.parse(ROUTER),\n      recipient,\n      null,\n      forwardGas, // 0.1\n      mintRequest1\n    );\n\n    if (isJetton1TON && amount1WithSlippage > BigInt(0)) {\n      messages.push({\n        to: Address.parse(pTON_ROUTER_WALLET),\n        value: amount1WithSlippage + mintPartGas + forwardGas, // ton with slippage + 0.2 + 0.1\n        body: mintRequest1,\n      });\n    } else if (!isJetton1TON && jetton1Amount > BigInt(0)) {\n      messages.push({\n        to: userJetton1Wallet,\n        value: mintPartGas + forwardGas, // 0.2 + 0.1\n        body: payload1,\n      });\n    }\n\n    if (isJetton0TON && amount0WithSlippage > BigInt(0)) {\n      messages.push({\n        to: Address.parse(pTON_ROUTER_WALLET),\n        value: amount0WithSlippage + mintPartGas + forwardGas, // ton with slippage + 0.2 + 0.1\n        body: mintRequest0,\n      });\n    } else if (!isJetton0TON && jetton0Amount > BigInt(0)) {\n      messages.push({\n        to: userJetton0Wallet,\n        value: mintPartGas + forwardGas, // 0.2 + 0.1\n        body: payload0,\n      });\n    }\n\n    return messages;\n  }\n\n  public static async createEmulatedMintMessage(\n    routerJetton0Wallet: Address,\n    routerJetton1Wallet: Address,\n    userJetton0Wallet: Address,\n    userJetton1Wallet: Address,\n    position: Position,\n    recipient: Address,\n    slippage: Percent = new Percent(1, 100), // 1 %\n    client?: Api<unknown>, // ton api client\n    wallet_public_key?: string,\n    walletVersion?: WalletVersion\n  ) {\n    let txFee = this.gasUsage.MINT_GAS; // 0.4\n    const forwardGas = this.gasUsage.TRANSFER_GAS * BigInt(2); // 0.1 // 2 maximum transfers per 1 msg\n\n    const messages = this.createMintMessage(\n      routerJetton0Wallet,\n      routerJetton1Wallet,\n      userJetton0Wallet,\n      userJetton1Wallet,\n      position,\n      recipient,\n      slippage\n    );\n\n    /* emulate message */\n    if (client && wallet_public_key && walletVersion) {\n      try {\n        const emulation = await emulateMessage(\n          client,\n          messages,\n          recipient.toString(),\n          wallet_public_key,\n          walletVersion\n        );\n\n        if (emulation) {\n          const tonRevertedFromPool = emulation.event.actions.find(\n            event => event.TonTransfer\n          )?.TonTransfer?.amount;\n\n          const emulatedGas = BigInt(Math.abs(emulation.event.extra));\n\n          /* tx fee calc */\n          if (tonRevertedFromPool) {\n            txFee = emulatedGas - BigInt(tonRevertedFromPool || 0);\n          } else {\n            txFee = emulatedGas;\n          }\n\n          // const emulated = this.createMintMessage(\n          //   routerJetton0Wallet,\n          //   routerJetton1Wallet,\n          //   userJetton0Wallet,\n          //   userJetton1Wallet,\n          //   position,\n          //   recipient,\n          //   slippage,\n          //   messages.length === 1 ? txFee * BigInt(2) : txFee,\n          //   forwardGas\n          // );\n        }\n      } catch (e) {\n        console.log('error emulation - ', e);\n      }\n    }\n\n    const emulatedMessages = {\n      messages,\n      txFee,\n      forwardGas: forwardGas * BigInt(messages.length),\n      gasLimit: messages.length === 1 ? toNano(0.3) : toNano(0.6),\n    };\n\n    console.log('success emulation - ', emulatedMessages);\n\n    return emulatedMessages;\n  }\n\n  public static createBurnMessage(\n    poolAddress: Address,\n    tokenId: number,\n    tickLower: number,\n    tickUpper: number,\n    liquidityToBurn: bigint,\n    txFee: bigint = this.gasUsage.BURN_GAS,\n    forwardGas: bigint = BigInt(0) // gas slippage\n  ): SenderArguments {\n    const payload = beginCell()\n      .storeUint(ContractOpcodes.POOLV3_START_BURN, 32) // op\n      .storeUint(0, 64) // query id\n      .storeUint(tokenId, 64)\n      .storeUint(liquidityToBurn, 128)\n      .storeInt(tickLower, 24)\n      .storeInt(tickUpper, 24)\n      .endCell();\n\n    const message = {\n      to: poolAddress,\n      value: txFee + forwardGas,\n      body: payload,\n    };\n\n    return message;\n  }\n\n  public static async createEmulatedBurnMessage(\n    poolAddress: Address,\n    tokenId: number,\n    tickLower: number,\n    tickUpper: number,\n    liquidityToBurn: bigint,\n    amount0: JettonAmount<Jetton> | undefined,\n    amount1: JettonAmount<Jetton> | undefined,\n    feeAmount0: JettonAmount<Jetton> | undefined,\n    feeAmount1: JettonAmount<Jetton> | undefined,\n    client?: Api<unknown>, // ton api client\n    wallet?: string,\n    wallet_public_key?: string,\n    walletVersion?: WalletVersion\n  ) {\n    let txFee = this.gasUsage.BURN_GAS; // 0.3\n    const forwardGas = BigInt(0);\n\n    const message = this.createBurnMessage(\n      poolAddress,\n      tokenId,\n      tickLower,\n      tickUpper,\n      liquidityToBurn\n    );\n\n    const isJetton0TON =\n      amount0 &&\n      Address.parse(amount0.jetton.address).equals(Address.parse(pTON_MINTER));\n\n    const isJetton1TON =\n      amount1 &&\n      Address.parse(amount1.jetton.address).equals(Address.parse(pTON_MINTER));\n\n    const tonToBurn = isJetton0TON\n      ? BigInt(amount0.quotient.toString()) +\n        BigInt(feeAmount0?.quotient.toString() || 0)\n      : isJetton1TON\n      ? BigInt(amount1.quotient.toString()) +\n        BigInt(feeAmount1?.quotient.toString() || 0)\n      : BigInt(0);\n\n    if (wallet && client && wallet_public_key && walletVersion) {\n      try {\n        const emulation = await emulateMessage(\n          client,\n          [message],\n          wallet,\n          wallet_public_key,\n          walletVersion\n        );\n\n        if (emulation) {\n          const emulatedGas = BigInt(Math.abs(emulation.event.extra));\n\n          if (tonToBurn && tonToBurn > BigInt(0)) {\n            const isOnlyTon =\n              (isJetton0TON &&\n                amount1?.quotient.toString() === '0' &&\n                feeAmount1?.quotient.toString() === '0') ||\n              (isJetton1TON &&\n                amount0?.quotient.toString() === '0' &&\n                feeAmount0?.quotient.toString() === '0');\n\n            const tonRevertedFromPool = emulation.event.actions.find(\n              event => event.TonTransfer\n            )?.TonTransfer?.amount;\n\n            txFee =\n              tonToBurn +\n              (txFee -\n                BigInt(tonRevertedFromPool || 0) -\n                (isOnlyTon ? -emulatedGas : emulatedGas));\n\n            // forwardGas = this.gasUsage.BURN_GAS_SLIPPAGE * BigInt(2); // 0.1\n          } else {\n            txFee = txFee - emulatedGas; // 0.3 - 0.25(approximately gas refund for tx)\n\n            // forwardGas = this.gasUsage.BURN_GAS_SLIPPAGE; // 0.05\n          }\n\n          // message = this.createBurnMessage(\n          //   poolAddress,\n          //   tokenId,\n          //   tickLower,\n          //   tickUpper,\n          //   liquidityToBurn,\n          //   txFee,\n          //   forwardGas\n          // );\n        }\n      } catch (e) {\n        console.log('error emulation - ', e);\n      }\n    }\n\n    const emulatedMessage = {\n      message,\n      txFee,\n      forwardGas,\n      gasLimit: message.value,\n    };\n\n    return emulatedMessage;\n  }\n\n  public static createCollectMessage(\n    poolAddress: Address,\n    tokenId: number,\n    tickLower: number,\n    tickUpper: number,\n    txFee: bigint = this.gasUsage.BURN_GAS,\n    forwardGas: bigint = BigInt(0) // gas slippage\n  ): SenderArguments {\n    const message = this.createBurnMessage(\n      poolAddress,\n      tokenId,\n      tickLower,\n      tickUpper,\n      BigInt(0),\n      txFee,\n      forwardGas\n    );\n\n    return message;\n  }\n\n  public static async createEmulatedCollectMessage(\n    poolAddress: Address,\n    tokenId: number,\n    tickLower: number,\n    tickUpper: number,\n    feeAmount0: JettonAmount<Jetton> | undefined,\n    feeAmount1: JettonAmount<Jetton> | undefined,\n    client?: Api<unknown>, // ton api client\n    wallet?: string,\n    wallet_public_key?: string,\n    walletVersion?: WalletVersion\n  ) {\n    let txFee = this.gasUsage.BURN_GAS; // 0.3\n    const forwardGas = BigInt(0);\n\n    const message = this.createCollectMessage(\n      poolAddress,\n      tokenId,\n      tickLower,\n      tickUpper\n    );\n\n    const isJetton0TON =\n      feeAmount0 &&\n      Address.parse(feeAmount0.jetton.address).equals(\n        Address.parse(pTON_MINTER)\n      );\n\n    const isJetton1TON =\n      feeAmount1 &&\n      Address.parse(feeAmount1.jetton.address).equals(\n        Address.parse(pTON_MINTER)\n      );\n\n    const collectType =\n      (isJetton0TON &&\n        feeAmount0.greaterThan('0') &&\n        feeAmount1?.equalTo('0')) ||\n      (isJetton1TON && feeAmount1.greaterThan('0') && feeAmount0?.equalTo('0'))\n        ? CollectType.TON\n        : (isJetton0TON &&\n            feeAmount0.greaterThan('0') &&\n            feeAmount1?.greaterThan('0')) ||\n          (isJetton1TON &&\n            feeAmount1.greaterThan('0') &&\n            feeAmount0?.greaterThan('0'))\n        ? CollectType.TON_JETTON\n        : CollectType.JETTON;\n\n    if (wallet && client && wallet_public_key && walletVersion) {\n      try {\n        const emulation = await emulateMessage(\n          client,\n          [message],\n          wallet,\n          wallet_public_key,\n          walletVersion\n        );\n\n        if (emulation) {\n          const emulatedGas = BigInt(Math.abs(emulation.event.extra));\n          const tonRevertedFromPool = BigInt(\n            emulation.event.actions.find(event => event.TonTransfer)\n              ?.TonTransfer?.amount || 0\n          );\n          // forwardGas = this.gasUsage.BURN_GAS_SLIPPAGE * BigInt(2); // 0.1\n\n          const calculateTxWithTonFee = (\n            amount: JettonAmount<Jetton>,\n            mult: 1 | -1\n          ) => {\n            return (\n              BigInt(amount.quotient.toString()) +\n              (txFee - tonRevertedFromPool - emulatedGas * BigInt(mult))\n            );\n          };\n\n          switch (collectType) {\n            case CollectType.TON: // ..only TON\n              if (feeAmount0?.greaterThan('0'))\n                txFee = calculateTxWithTonFee(feeAmount0, -1);\n\n              if (feeAmount1?.greaterThan('0'))\n                txFee = calculateTxWithTonFee(feeAmount1, -1);\n\n              break;\n\n            case CollectType.TON_JETTON: // ..some TON + ..some Jetton\n              if (isJetton0TON && feeAmount0?.greaterThan('0'))\n                txFee = calculateTxWithTonFee(feeAmount0, 1);\n\n              if (isJetton1TON && feeAmount1?.greaterThan('0'))\n                txFee = calculateTxWithTonFee(feeAmount1, 1);\n\n              break;\n\n            case CollectType.JETTON: // only Jetton or Jetton + Jetton\n              txFee = txFee - emulatedGas;\n              // forwardGas = this.gasUsage.BURN_GAS_SLIPPAGE; // 0.05\n              break;\n\n            default:\n              break;\n          }\n\n          // message = this.createCollectMessage(\n          //   poolAddress,\n          //   tokenId,\n          //   tickLower,\n          //   tickUpper,\n          //   txFee,\n          //   forwardGas\n          // );\n        }\n      } catch (e) {\n        console.log('error emulation - ', e);\n      }\n    }\n\n    const emulatedMessage = {\n      message,\n      txFee,\n      forwardGas,\n      gasLimit: message.value,\n    };\n\n    return emulatedMessage;\n  }\n\n  public static createSwapExactInMessage(\n    userJettonWallet: Address, // input jetton wallet attached to user\n    routerJettonWallet: Address, // output jetton wallet attached to router\n    recipient: Address,\n    amountIn: bigint,\n    minimumAmountOut: bigint,\n    priceLimitSqrt: bigint,\n    swapType: SwapType,\n    txFee: bigint = this.gasUsage.SWAP_GAS, // 0.4\n    forwardGas: bigint = this.gasUsage.TRANSFER_GAS * BigInt(4) // 4 maximum messages in tx = 0.2\n  ): SenderArguments {\n    let swapRequest;\n\n    swapRequest = beginCell()\n      .storeUint(ContractOpcodes.POOLV3_SWAP, 32) // Request to swap\n      .storeAddress(routerJettonWallet) // JettonWallet attached to Router is used to identify target token\n      .storeUint(priceLimitSqrt, 160) // Minimum/maximum price that we are ready to reach\n      .storeCoins(minimumAmountOut) // Minimum amount to get back\n      .storeAddress(recipient) // Address to receive result of the swap\n      .storeUint(0, 1) // Payload Maybe Ref // Address to recieve result of the swap\n      .endCell();\n\n    switch (swapType) {\n      case SwapType.TON_TO_JETTON:\n        swapRequest = beginMessage(proxyWalletOpcodesV2.tonTransfer)\n          .storeCoins(amountIn) // ton amount\n          .storeAddress(recipient) // refund address\n          .storeUint(1, 1)\n          .storeRef(swapRequest)\n          .endCell();\n\n        return {\n          to: Address.parse(pTON_ROUTER_WALLET),\n          value: amountIn + txFee + forwardGas, // ton amountIn + 0.4 + 0.2\n          body: swapRequest,\n        };\n\n      default:\n        const payload = JettonWallet.transferMessage(\n          amountIn,\n          Address.parse(ROUTER),\n          recipient,\n          null,\n          txFee + this.gasUsage.SWAP_GAS_SLIPPAGE,\n          swapRequest\n        );\n\n        return {\n          to: userJettonWallet,\n          value: txFee + forwardGas, // 0.4 + 0.2\n          body: payload,\n          sendMode: SendMode.PAY_GAS_SEPARATELY,\n        };\n    }\n  }\n\n  public static async createEmulatedSwapExactInMessage(\n    userJettonWallet: Address,\n    routerJettonWallet: Address,\n    recipient: Address,\n    amountIn: bigint,\n    minimumAmountOut: bigint,\n    priceLimitSqrt: bigint,\n    swapType: SwapType,\n    client?: Api<unknown>, // ton api client\n    wallet_public_key?: string,\n    walletVersion?: WalletVersion\n  ) {\n    let txFee = this.gasUsage.SWAP_GAS; // 0.4\n    const forwardGas = this.gasUsage.TRANSFER_GAS * BigInt(4); // 0.2\n\n    const message = this.createSwapExactInMessage(\n      userJettonWallet,\n      routerJettonWallet,\n      recipient,\n      amountIn,\n      minimumAmountOut,\n      priceLimitSqrt,\n      swapType\n    );\n\n    /* emulate message */\n    if (client && wallet_public_key && walletVersion) {\n      try {\n        const emulation = await emulateMessage(\n          client,\n          [message],\n          recipient.toString(),\n          wallet_public_key,\n          walletVersion\n        );\n\n        if (emulation) {\n          /* tx gas */\n          const tonRevertedFromPool = BigInt(\n            emulation.event.actions.find(event => event.TonTransfer)\n              ?.TonTransfer?.amount || 0\n          );\n\n          const emulatedGas = BigInt(Math.abs(emulation.event.extra));\n\n          // forwardGas =\n          //   BigInt(\n          //     emulation.event.actions.filter(\n          //       action =>\n          //         action.type === 'JettonTransfer' ||\n          //         action.type === 'TonTransfer'\n          //     ).length + 1 // +1 for initial jetton transfer\n          //   ) * this.gasUsage.TRANSFER_GAS;\n\n          switch (swapType) {\n            case SwapType.TON_TO_JETTON:\n              txFee = emulatedGas; // forward gas in the base created message\n\n              // message = this.createSwapExactInMessage(\n              //   userJettonWallet,\n              //   routerJettonWallet,\n              //   recipient,\n              //   amountIn,\n              //   minimumAmountOut,\n              //   priceLimitSqrt,\n              //   swapType,\n              //   txFee,\n              //   txFee + forwardGas\n              // );\n\n              /* TODO: calc correct txFee */\n\n              // if (tonRevertedFromPool) {\n              //   txFee = amountIn - tonRevertedFromPool - emulatedGas;\n\n              //   message = this.createSwapExactInMessage(\n              //     userJettonWallet,\n              //     routerJettonWallet,\n              //     recipient,\n              //     amountIn,\n              //     minimumAmountOut,\n              //     priceLimitSqrt,\n              //     swapType,\n              //     txFee,\n              //     txFee + forwardGas\n              //   );\n              // }\n              break;\n\n            case SwapType.JETTON_TO_TON:\n              const tonAmountOut = emulation.trace.children\n                ? getTonRefundAmount(emulation.trace.children)\n                : BigInt(0);\n\n              txFee = tonAmountOut\n                ? emulatedGas - (tonRevertedFromPool - tonAmountOut)\n                : emulatedGas;\n\n              // message = this.createSwapExactInMessage(\n              //   userJettonWallet,\n              //   routerJettonWallet,\n              //   recipient,\n              //   amountIn,\n              //   minimumAmountOut,\n              //   priceLimitSqrt,\n              //   swapType,\n              //   txFee,\n              //   forwardGas\n              // );\n              break;\n\n            case SwapType.JETTON_TO_JETTON:\n              txFee = BigInt(Math.abs(emulation.event.extra));\n\n              // message = this.createSwapExactInMessage(\n              //   userJettonWallet,\n              //   routerJettonWallet,\n              //   recipient,\n              //   amountIn,\n              //   minimumAmountOut,\n              //   priceLimitSqrt,\n              //   swapType,\n              //   txFee,\n              //   forwardGas\n              // );\n              break;\n          }\n          console.log('success emulation - ', emulation);\n        }\n      } catch (e) {\n        console.log('error emulation - ', e);\n      }\n    }\n\n    // const emulatedMessage = {\n    //   message,\n    //   txFee: txFee,\n    //   forwardGas,\n    //   gasLimit: txFee + forwardGas,\n    // };\n\n    const emulatedMessage = {\n      message,\n      txFee,\n      forwardGas,\n      gasLimit:\n        swapType === SwapType.TON_TO_JETTON\n          ? message.value - amountIn\n          : message.value,\n    };\n\n    return emulatedMessage;\n  }\n}\n","import { Address } from '@ton/core';\nimport { PoolV3Contract } from '../contracts';\nimport { TickMath } from '../utils';\nimport { TonClient } from '@ton/ton';\n\nexport async function getSwapEstimate(\n  // inputJetton: Jetton,\n  amountIn: bigint,\n  poolAddress: string,\n  zeroToOne: boolean,\n  client: TonClient\n) {\n  const poolV3Contract = client.open(\n    new PoolV3Contract(Address.parse(poolAddress))\n  );\n\n  // /* pool.jetton0 and pool.jetton1 are always sorted, so jetton0 is always first */\n  // const zeroToOne = amountIn.jetton.equals(pool.jetton0);\n  // or\n  // const zeroToOne = PoolV3Contract.orderJettonId(jetton0RouterWallet, jetton1RouterWallet);\n  // or\n  // const { jetton0_minter } = await poolV3Contract.getPoolStateAndConfiguration();\n  // const zeroToOne = Address.parse(inputJetton.address).equals(Address.parse(jetton0_minter));\n\n  if (zeroToOne) {\n    const res = await poolV3Contract.getSwapEstimate(\n      zeroToOne,\n      amountIn,\n      BigInt(TickMath.MIN_SQRT_RATIO.toString()) + BigInt(1)\n    );\n    return -res.amount1;\n  } else {\n    const res = await poolV3Contract.getSwapEstimate(\n      zeroToOne,\n      amountIn,\n      BigInt(TickMath.MAX_SQRT_RATIO.toString()) - BigInt(1)\n    );\n    return -res.amount0;\n  }\n}\n","import { Jetton } from '../entities/Jetton';\nimport { Price } from '../entities/Price';\nimport { tickToPrice } from './priceTickConversions';\n\nexport function getTickToPrice(\n  baseToken?: Jetton,\n  quoteToken?: Jetton,\n  tick?: number,\n  isSorted: boolean = true\n): Price<Jetton, Jetton> | undefined {\n  if (!baseToken || !quoteToken || typeof tick !== 'number') {\n    return undefined;\n  }\n  return tickToPrice(baseToken, quoteToken, tick, isSorted);\n}\n","import JSBI from 'jsbi';\nimport { JettonAmount } from '../entities/JettonAmount';\nimport { Jetton } from '../entities/Jetton';\nimport { parseUnits } from '../utils/parseUnits';\n\nexport const parseBalance = (value: string, decimals = 18) =>\n  parseUnits(value || '0', decimals);\n\n// try to parse a user entered amount for a given token\nexport function tryParseAmount<T extends Jetton>(\n  value?: string,\n  currency?: T\n): JettonAmount<T> | undefined {\n  if (!value || !currency) {\n    return undefined;\n  }\n  try {\n    const typedValueParsed = parseUnits(value, currency.decimals).toString();\n    if (typedValueParsed !== '0') {\n      return JettonAmount.fromRawAmount(\n        currency,\n        JSBI.BigInt(typedValueParsed)\n      );\n    }\n  } catch (error) {\n    // should fail if the user specifies too many decimal places of precision (or maybe exceed max uint?)\n    console.debug(`Failed to parse input amount: \"${value}\"`, error);\n  }\n  // necessary for all paths to return a value\n  return undefined;\n}\n","import { WalletVersion } from '../types/WalletVersion';\n\nexport function parseWalletVersion(walletVersion: string) {\n  switch (walletVersion) {\n    case 'wallet_v5r1':\n      return WalletVersion.V5R1;\n\n    case 'wallet_v5':\n      return WalletVersion.V5_BETA;\n\n    case 'wallet_v4r2':\n      return WalletVersion.V4R2;\n\n    case 'wallet_v4r1':\n      return WalletVersion.V4R1;\n\n    case 'wallet_v3r2':\n      return WalletVersion.V3R2;\n\n    case 'wallet_v3r1':\n      return WalletVersion.V3R1;\n\n    default:\n      console.error(`Unsupported wallet version: ${walletVersion}`);\n      return;\n  }\n}\n"],"names":["NoTickDataProvider","_proto","prototype","getTick","_getTick","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_tick","wrap","_context","prev","next","Error","ERROR_MESSAGE","stop","_x","apply","arguments","nextInitializedTickWithinOneWord","_nextInitializedTickWithinOneWord","_callee2","_lte","_tickSpacing","_context2","_x2","_x3","_x4","ADDRESS_ZERO","BLACK_HOLE_ADDRESS","Address","parse","NEGATIVE_ONE","JSBI","BigInt","ZERO","ONE","Q96","exponentiate","Q192","MaxUint256","ROUTER","POOL_FACTORY","pTON_MINTER","pTON_ROUTER_WALLET","ROUTERV3_CODE","Cell","fromBase64","ACCOUNTV3_CODE","POSITIONV3_CODE","POOLV3_CODE","TWO","POWERS_OF_2","map","pow","mostSignificantBit","x","greaterThan","invariant","lessThanOrEqual","_step","msb","_iterator","_createForOfIteratorHelperLoose","done","_step$value","value","power","greaterThanOrEqual","signedRightShift","mulShift","val","mulBy","multiply","Q32","TickMath","getSqrtRatioAtTick","tick","MIN_TICK","MAX_TICK","Number","isInteger","absTick","ratio","divide","remainder","add","getTickAtSqrtRatio","sqrtRatioX96","MIN_SQRT_RATIO","lessThan","MAX_SQRT_RATIO","r","sqrtRatioX128","leftShift","log_2","subtract","i","f","bitwiseOr","log_sqrt10001","tickLow","toNumber","tickHigh","isSorted","list","comparator","length","tickComparator","a","b","index","Rounding","Bound","Field","TradeType","TickList","validateList","ticks","tickSpacing","every","_ref","equal","reduce","accumulator","_ref2","liquidityNet","isBelowSmallest","isAtOrAboveLargest","this","binarySearch","nextInitializedTick","lte","compressed","Math","floor","minimum","max","maximum","min","l","Tick","liquidityGross","TickListDataProvider","ticksMapped","t","abrupt","Decimal","toFormat","_Decimal","Big","_Big","toSignificantRounding","_toSignificantRoundin","ROUND_DOWN","ROUND_HALF_UP","ROUND_UP","toFixedRounding","_toFixedRounding","Fraction","numerator","denominator","tryParseFraction","fractionish","invert","other","otherParsed","equalTo","toSignificant","significantDigits","format","rounding","groupSeparator","set","precision","quotient","toString","div","toSignificantDigits","decimalPlaces","toFixed","DP","RM","_createClass","key","get","JettonAmount","_Fraction","jetton","_this","call","decimalScale","decimals","_inheritsLoose","fromRawAmount","currency","rawAmount","fromFractionalAmount","equals","added","subtracted","multiplied","divided","toExact","FullMath","mulDivRoundingUp","product","result","notEqual","MaxUint160","multiplyIn256","y","bitwiseAnd","SqrtPriceMath","getAmount0Delta","sqrtRatioAX96","sqrtRatioBX96","liquidity","roundUp","numerator1","numerator2","getAmount1Delta","getNextSqrtPriceFromInput","sqrtPX96","amountIn","zeroForOne","getNextSqrtPriceFromAmount0RoundingUp","getNextSqrtPriceFromAmount1RoundingDown","getNextSqrtPriceFromOutput","amountOut","amount","sum","MAX_FEE","SwapMath","computeSwapStep","sqrtRatioCurrentX96","sqrtRatioTargetX96","amountRemaining","feePips","returnValues","exactIn","amountRemainingLessFee","sqrtRatioNextX96","feeAmount","LiquidityMath","addDelta","Price","baseCurrency","quoteCurrency","_len","args","Array","_key","quoteAmount","baseAmount","scalar","fraction","quote","currencyAmount","adjustedForDecimals","ContractOpcodes","ContractErrors","defaultJettonKeys","defaultNftKeys","keyTypes","name","description","image","symbol","image_data","undefined","uri","content_url","cover_image","attributes","getKeyType","contentValue","serialize","src","builder","storeRef","beginCell","storeUint","storeStringTail","endCell","sc","loadRef","beginParse","prefix","loadUint","loadStringTail","Dictionary","loadDirect","Keys","Uint","Values","values","join","packJettonOnchainMetadata","data","records","empty","BigUint","k","v","bufferToStore","Buffer","from","hashStr","sha256_sync","storeInt","storeDict","TickInfoWrapper","outerFeeGrowth0Token","outerFeeGrowth1Token","DictionaryTickInfo","tickInfo","loadUintBig","loadIntBig","nftContentToPack","nftContentPackedDefault","nftItemContentToPack","nftItemContentPackedDefault","poolv3ContractConfigToCell","config","Int","storeAddress","router_address","_config$lp_fee_base","lp_fee_base","_config$protocol_fee","protocol_fee","_config$lp_fee_curren","lp_fee_current","jetton0_wallet","jetton1_wallet","_config$tick_spacing","tick_spacing","storeCoins","_config$tick","_config$price_sqrt","price_sqrt","_config$liquidity","_config$admin_address","admin_address","accountv3_code","position_nftv3_code","_config$nftContent","nftContent","_config$nftItemConten","nftItemContent","PoolV3Contract","address","init","orderJettonId","jetton0Wallet","jetton1Wallet","strHex0","hash","strHex1","createFromConfig","code","workchain","contractAddress","sendDeploy","_sendDeploy","provider","via","sqrtPriceX96","opts","_opts$nftContentPacke","_opts$nftItemContentP","minterCell","body","activate_pool","jetton0Minter","jetton1Minter","is_from_admin","POOLV3_INIT","admin","controller","protocolFee","FEE_DENOMINATOR","lpFee","currentFee","nftContentPacked","nftItemContentPacked","storeMaybeRef","internal","sendMode","SendMode","PAY_GAS_SEPARATELY","_x5","_x6","reinitMessage","_opts$tickSpacing","_opts$sqrtPriceX","_opts$nftContentPacke2","_opts$nftItemContentP2","unpackReinitMessage","s","setAdmin","loadAddress","setControl","setTickSpacing","tickSpacingV","setPrice","sqrtPriceX96V","setActive","activate_poolV","protocolFeeV","lpFeeV","currentFeeV","sendReinit","_sendReinit","_x7","_x8","_x9","_x10","messageSetFees","POOLV3_SET_FEE","unpackSetFeesMessage","sendSetFees","_sendSetFees","_callee3","sender","msg_body","_context3","_x11","_x12","_x13","_x14","_x15","_x16","sendLockPool","_sendLockPool","_callee4","_context4","POOLV3_LOCK","_x17","_x18","_x19","sendUnlockPool","_sendUnlockPool","_callee5","_context5","POOLV3_UNLOCK","_x20","_x21","_x22","messageCollectProtocol","POOLV3_COLLECT_PROTOCOL","unpackCollectProtocolMessage","sendCollectProtocol","_sendCollectProtocol","_callee6","_context6","_x23","_x24","_x25","sendBurn","_sendBurn","_callee7","nftIndex","tickLower","tickUpper","liquidity2Burn","_context7","POOLV3_START_BURN","_x26","_x27","_x28","_x29","_x30","_x31","_x32","getIsActive","_getIsActive","_callee8","_context8","sent","stack","readBoolean","_x33","getIsDebug","_getIsDebug","_callee9","_context9","t0","_x34","getPoolStateAndConfiguration","_getPoolStateAndConfiguration","_callee10","_context10","readAddress","controller_address","jetton0_minter","jetton1_minter","pool_active","readNumber","readBigNumber","feeGrowthGlobal0X128","feeGrowthGlobal1X128","collectedProtocolFee0","collectedProtocolFee1","nftv3item_counter","reserve0","reserve1","nftv3items_active","ticks_occupied","seqno","_x35","getTickInfo","_getTickInfo","_callee11","tickNumber","_result$0$outerFeeGro","_result$0$outerFeeGro2","_context11","getTickInfosFromArr","tickNum","_x36","_x37","getTickInfosAll","_getTickInfosAll","_callee12","valueReader","dict","tickKeys","info","_context12","peek","type","readCell","keys","sort","push","_x38","_getTickInfosFromArr","_callee13","back","full","_context13","readTuple","remaining","internalReader","infoTuple","_x39","_x40","_x41","_x42","_x43","getMintEstimate","_getMintEstimate","_callee14","_context14","amount0","amount1","mintErrors","_x44","_x45","_x46","_x47","getSwapEstimate","_getSwapEstimate","_callee15","sqrtPriceLimitX96","minOutAmount","gasLimit","_context15","_x48","_x49","_x50","_x51","_x52","_x53","getCollectedFees","_getCollectedFees","_callee16","posLiquidityDelta","posFeeGrowthInside0X128","posFeeGrowthInside1X128","_context16","_x54","_x55","_x56","_x57","_x58","_x59","getFeeGrowthInside","_getFeeGrowthInside","_callee17","tickCurrent","_context17","feeGrowthInside0X128","feeGrowthInside1X128","_x60","_x61","_x62","_x63","_x64","_x65","getUserAccountAddress","_getUserAccountAddress","_callee18","owner","_context18","cell","_x66","_x67","getNFTAddressByIndex","_getNFTAddressByIndex","_callee19","_context19","_x68","_x69","getNFTCollectionContent","_getNFTCollectionContent","_callee20","res","_context20","nftv3_content","_x70","getNFTContent","_getNFTContent","_callee21","_context21","_x71","_x72","_x73","getChildContracts","_getChildContracts","_callee22","_context22","accountCode","positionNFTCode","nftCollectionContent","_x74","packPoolData","accountV3Code","positionNftV3Code","routerAddress","calculatePoolStateInit","jetton0Address","jetton1Address","poolCode","poolData","computePoolAddress","jettonWallet0","jettonWallet1","stateInit","workChain","NO_TICK_DATA_PROVIDER_DEFAULT","Pool","jettonA","jettonB","fee","tickCurrentSqrtRatioX96","nextTickSqrtRatioX96","jetton0","jetton1","tickDataProvider","isArray","getAddress","token0_wallet","token1_wallet","involvesToken","priceOf","jetton0Price","jetton1Price","getOutputAmount","_getOutputAmount","inputAmount","_yield$this$swap","swap","amountCalculated","getInputAmount","_getInputAmount","outputAmount","_yield$this$swap2","_swap","amountSpecified","exactInput","state","step","_yield$this$tickDataP","_SwapMath$computeSwap","amountSpecifiedRemaining","sqrtPriceStartX96","tickNext","initialized","sqrtPriceNextX96","t1","_this$_jetton0Price","_jetton0Price","_this$_jetton1Price","_jetton1Price","MAX_SAFE_INTEGER","encodeSqrtRatioX96","sqrt","z","tickToPrice","baseToken","quoteToken","ratioX192","priceToClosestTick","price","nextTickPrice","maxLiquidityForAmount0Imprecise","intermediate","maxLiquidityForAmount0Precise","maxLiquidityForAmount1","_ref3","maxLiquidityForAmounts","useFullPrecision","_ref4","maxLiquidityForAmount0","liquidity0","liquidity1","ONE_HUNDRED","toPercent","Percent","Position","pool","fromAmounts","fromAmount0","fromAmount1","mintAmountsWithSlippage","slippageTolerance","_this$ratiosAfterSlip","ratiosAfterSlippage","sqrtRatioX96Upper","sqrtRatioX96Lower","poolLower","poolUpper","positionThatWillBeCreated","_extends","mintAmounts","burnAmountsWithSlippage","_this$ratiosAfterSlip2","priceLower","asFraction","priceUpper","_mintAmounts","_token0Amount","_token1Amount","Route","pools","input","output","wrappedInput","tokenPath","entries","currentInputToken","nextToken","_midPrice","slice","nextInput","sortedInsert","items","maxSize","isFull","lo","hi","mid","splice","pop","tradeComparator","swaps","total","cur","route","Trade","routes","tradeType","inputCurrency","outputCurrency","numPools","poolAddressSet","Set","_step2","_iterator2","size","_exactIn","fromRoute","EXACT_INPUT","exactOut","_exactOut","EXACT_OUTPUT","_fromRoute","amounts","_i","_pool","wrapped","fromRoutes","_fromRoutes","populatedRoutes","_iterator3","_step3","_step3$value","_i2","_pool2","createUncheckedTrade","constructorArguments","createUncheckedTradeWithMultipleRoutes","bestTradeExactIn","_bestTradeExactIn","currencyAmountIn","currencyOut","_temp","currentPools","nextAmountIn","bestTrades","maxNumResults","_ref5$maxNumResults","maxHops","_ref5$maxHops","_ref5","tokenOut","error","isInsufficientInputAmountError","isToken","t2","concat","t3","t4","t5","poolsExcludingThisPool","bestTradeExactOut","_bestTradeExactOut","currencyIn","currencyAmountOut","_temp2","nextAmountOut","_ref6$maxNumResults","_ref6$maxHops","_ref6","tokenIn","isInsufficientReservesError","minimumAmountOut","slippageAdjustedAmountOut","maximumAmountIn","slippageAdjustedAmountIn","worstExecutionPrice","_inputAmount","totalInputFromRoutes","_ref7","_outputAmount","totalOutputFromRoutes","_ref8","_this$_executionPrice","_executionPrice","_priceImpact","_step4","spotOutputAmount","_iterator4","_step4$value","midPrice","priceImpact","validateAndParseAddress","Jetton","_AbstractJetton","nearestUsableTick","rounded","round","Q256","subIn256","difference","WalletVersion","TickLibrary","feeGrowthOutsideLower","feeGrowthOutsideUpper","feeGrowthBelow0X128","feeGrowthBelow1X128","feeGrowthAbove0X128","feeGrowthAbove1X128","feeGrowthOutside0X128","feeGrowthOutside1X128","Q128","PositionLibrary","getTokensOwed","feeGrowthInside0LastX128","feeGrowthInside1LastX128","MIN_NATIVE_CURRENCY_FOR_GAS","parseUnits","amountNum","isNaN","tryParsePrice","match","_value$split","split","whole","_fraction$length","withoutDecimals","emojiBigArray","toncoCells","WalletContract","publicKey","version","V3R1","WalletContractV3R1","create","V3R2","WalletContractV3R2","V4R1","V4R2","WalletContractV4","V5R1","WalletContractV5R1","signer","message","sign","alloc","externalMessage","contract","storeWritable","storeMessage","external","to","emulateMessage","_emulateMessage","client","messages","wallet","walletPubKey","walletVersion","walletContract","secretKey","msgCell","getAccountSeqno","createTransfer","timeout","IGNORE_ERRORS","_message$init$code","_message$init","_message$init$data","_message$init2","bounce","toBoc","idx","emulateMessageToWallet","boc","Op","Errors","jettonMinterConfigToCell","content","wallet_code","JettonMinter","createFromAddress","jettonInternalTransfer","jetton_amount","forward_ton_amount","response_addr","query_id","internal_transfer","storeBit","mintMessage","total_ton_amount","mintMsg","mint","sendMint","_sendMint","discoveryMessage","include_address","sendDiscovery","_sendDiscovery","toNano","changeAdminMessage","newOwner","change_admin","sendChangeAdmin","_sendChangeAdmin","changeContentMessage","change_content","sendChangeContent","_sendChangeContent","getWalletAddress","_getWalletAddress","getJettonData","_getJettonData","totalSupply","mintable","adminAddress","walletCode","readAddressOpt","getTotalSupply","_getTotalSupply","getAdminAddress","_getAdminAddress","getContent","_getContent","jettonWalletConfigToCell","console","log","JettonWallet","getJettonBalance","_getJettonBalance","getState","getJettonMinterAddress","_getJettonMinterAddress","jettonMinterAddress","skip","transferMessage","responseAddress","customPayload","forwardPayload","sendTransfer","_sendTransfer","burnMessage","withdrawTonsMessage","sendWithdrawTons","_sendWithdrawTons","withdrawJettonsMessage","sendWithdrawJettons","_sendWithdrawJettons","getWalletData","_getWalletData","balance","ownerAddress","jettonMasterAddress","jettonWalletCode","jWalletOpcodes","transfer","internalTransfer","burn","proxyWalletOpcodesV2","resetGas","tonTransfer","positionNFTv3ContractConfigToCell","poolAddress","userAddress","PositionNFTV3Contract","params","_params$value","_params$forwardAmount","POSITIONNFTV3_NFT_TRANSFER","responseTo","forwardAmount","forwardBody","getBalance","_getBalance","number","getUserAddress","_getUserAddress","getPoolAddress","_getPoolAddress","getPositionInfo","_getPositionInfo","getData","_getData","inited","collection","readCellOpt","TIMELOCK_DELAY_DEFAULT","routerv3ContractConfigToCell","_config$poolAdminAddr","poolAdminAddress","poolFactoryAddress","_config$flags","flags","poolv3_code","_config$timelockDelay","timelockDelay","_config$nonce","nonce","RouterV3Contract","deployPoolMessage","jetton0WalletAddr","jetton1WalletAddr","activatePool","ROUTERV3_CREATE_POOL","controllerAddress","unpackDeployPoolMessage","loadInt","s1","sendDeployPool","_sendDeployPool","sendResetGas","_sendResetGas","ROUTERV3_RESET_GAS","changeAdminStartMessage","msg","ROUTERV3_CHANGE_ADMIN_START","newAdmin","newFlags","newCode","unpackChangeAdminStartMessage","loadBoolean","setFlags","newCodeV","loadMaybeRef","sendChangeAdminStart","_sendChangeAdminStart","changeAdminCommitMessage","ROUTERV3_CHANGE_ADMIN_COMMIT","unpackChangeAdminCommitMessage","sendChangeAdminCommit","_sendChangeAdminCommit","changeRouterParamMessage","ROUTERV3_CHANGE_PARAMS","newPoolFactory","_opts$newPoolFactory","newPoolAdmin","_opts$newPoolAdmin","unpackChangeRouterParamMessage","hasPoolFactory","loadBit","newPoolFactoryV","hasPoolAdmin","newPoolAdminV","sendChangeRouterParams","_sendChangeRouterParams","_getState","pool_admin","pool_factory","pool_seqno","getPoolFactoryAddress","_getPoolFactoryAddress","getPoolInitialData","_getPoolInitialData","getPoolStateInit","_getPoolStateInit","accountv3ContractConfigToCell","user","stored0","stored1","enough0","enough1","POOLV3_RESULT_SWAP_OK","POOLV3_RESULT_BURN_OK","AccountV3Contract","ACCOUNTV3_RESET_GAS","sendAddLiquidity","_sendAddLiquidity","newAmount0","newAmount1","minLPOut","ACCOUNTV3_ADD_LIQUIDITY","sendRefundMe","_sendRefundMe","ACCOUNTV3_REFUND_ME","refundMe","_refundMe","getAccountData","_getAccountData","user_address","pool_address","enought0","enought1","poolFactoryContractConfigToCell","nftv3Content","nftv3itemContent","SwapType","CollectType","PoolFactoryContract","settings","POOL_FACTORY_CREATE_POOL","wallets","sendNewData","_sendNewData","POOL_FACTORY_CHANGE_PARAMS","EMPTY","getPoolFactoryData","_getPoolFactoryData","nftv3item_content","zeroToOne","poolV3Contract","open","getTonRefundAmount","trace","isForked","in_msg_0","transaction","in_msg","op_code","_in_msg_0$destination","destination","toRawString","decoded_body","_in_msg_1$destination","in_msg_1","children","childResult","PoolMessageManager","createDeployPoolMessage","payload","gasUsage","DEPLOY_POOL_GAS","createMintMessage","routerJetton0Wallet","routerJetton1Wallet","userJetton0Wallet","userJetton1Wallet","position","recipient","slippage","txFee","forwardGas","MINT_GAS","TRANSFER_GAS","mintRequest0","mintRequest1","mintPartGas","_position$mintAmounts","jetton0Amount","jetton1Amount","slippageMultiplier","amount0WithSlippage","amount1WithSlippage","isJetton0TON","isJetton1TON","POOLV3_FUND_ACCOUNT","payload0","payload1","createEmulatedMintMessage","_createEmulatedMintMessage","wallet_public_key","emulation","_emulation$event$acti","tonRevertedFromPool","emulatedGas","emulatedMessages","event","actions","find","TonTransfer","abs","extra","createBurnMessage","tokenId","liquidityToBurn","BURN_GAS","createEmulatedBurnMessage","_createEmulatedBurnMessage","feeAmount0","feeAmount1","tonToBurn","_emulation$event$acti2","isOnlyTon","createCollectMessage","createEmulatedCollectMessage","_createEmulatedCollectMessage","collectType","_emulation$event$acti3","calculateTxWithTonFee","TON","TON_JETTON","JETTON","mult","createSwapExactInMessage","userJettonWallet","routerJettonWallet","priceLimitSqrt","swapType","swapRequest","op","SWAP_GAS","POOLV3_SWAP","TON_TO_JETTON","crc32","random","SWAP_GAS_SLIPPAGE","createEmulatedSwapExactInMessage","_createEmulatedSwapExactInMessage","_emulation$event$acti4","_tonRevertedFromPool","_emulatedGas","tonAmountOut","emulatedMessage","JETTON_TO_TON","JETTON_TO_JETTON","BURN_GAS_SLIPPAGE","73","74","75","80","81","82","83","86","87","90","91","92","93","94","95","96","100","101","102","103","104","105","106","107","110","111","112","113","114","200","201","202","203","220","221","222","223","224","225","226","230","333","401","405","408","409","705","706","707","708","709","65535","21","32736093","85167505","99042967","120815319","188465300","200537159","260734629","395134233","436968785","470040874","490969824","701638965","745978227","774911215","801842850","839232957","1052660785","1117846339","1142700525","1147723383","1187656538","1291331587","1360675939","1393254188","1457515402","1499400124","1540053636","1592132511","1607220500","1698746245","1765620048","1809628856","1935855772","2078119902","2148768470","2171612920","2281694051","2302962242","2339837749","2340806243","2562376709","2660929407","2715461997","2818267384","2831876269","2853024727","2921715614","3479126803","3513996288","3556287800","3568515850","3571363899","3576854235","3589065258","3610951837","3683725347","3686251349","3860080092","3862520940","4119290095","4246369255","4294967022","additional","cs","contentType","noData","remainingBits","remainingRefs","contentUrl","loadStringRefTail","hasAdditional","contentDict","load","contentMap","dictKey","dictValue","JSON","stringify","jetton0Name","decimals0","jetton1Name","decimals1","p","storeBuffer","toncoHashes","mainHash","buffers","j","xorBuffers","Object","shortHash","base","exponent","bigIntPow","V5_BETA","order","c","subcodes","typedValueParsed","debug","minterAddress"],"mappings":"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IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAC5J,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAC5J,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAC5J,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KACrK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KACnM,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KACnM,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KACnM,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KACnM,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KACnM,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KACnM,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KACnM,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KACnM,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KACnM,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KACnM,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KACnM,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KACnM,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KACnM,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KACnM,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KACnM,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KACnM,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KACnM,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KACnM,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KACnM,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KACnM,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KACnM,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KACnM,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KACnM,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KACnM,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KACnM,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KACnM,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,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"}