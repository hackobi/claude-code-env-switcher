"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.StonfiSwapServiceV2 = void 0;
const sdk_1 = require("@ston-fi/sdk");
const ton_client_1 = require("../../../../../../../core/blockchain/web3-private-service/web3-private/ton-web3-private/ton-client/ton-client");
const addresses_1 = require("../constants/addresses");
const convert_params_to_ton_config_1 = require("../utils/convert-params-to-ton-config");
class StonfiSwapServiceV2 {
    get tonClient() {
        return ton_client_1.TonClientInstance.getInstance();
    }
    async getTxParams(from, to, walletAddress, minAmountOutWei) {
        const stonfiRouter = this.tonClient.open(sdk_1.DEX.v2_2.Router.create('kQALh-JBBIKK7gr0o4AVf9JZnEsFndqO0qTCyT-D-yBsWk0v'));
        const proxyTon = sdk_1.pTON.v2_1.create('kQACS30DNoUQ7NfApPvzh7eBmSZ9L4ygJ-lkNWtba8TQT-Px');
        try {
            if (from.isNative) {
                const txParams = await stonfiRouter.getSwapTonToJettonTxParams({
                    userWalletAddress: walletAddress,
                    proxyTon,
                    offerAmount: from.stringWeiAmount,
                    askJettonAddress: to.address,
                    minAskAmount: minAmountOutWei,
                    referralValue: 100,
                    referralAddress: addresses_1.STONFI_REFERRAL_ADDRESS
                });
                return (0, convert_params_to_ton_config_1.convertTxParamsToTonConfig)(txParams);
            }
            if (to.isNative) {
                const txParams = await stonfiRouter.getSwapJettonToTonTxParams({
                    userWalletAddress: walletAddress,
                    offerJettonAddress: from.address,
                    offerAmount: from.stringWeiAmount,
                    proxyTon,
                    minAskAmount: minAmountOutWei,
                    referralValue: 100,
                    referralAddress: addresses_1.STONFI_REFERRAL_ADDRESS
                });
                return (0, convert_params_to_ton_config_1.convertTxParamsToTonConfig)(txParams);
            }
            const txParams = await stonfiRouter.getSwapJettonToJettonTxParams({
                userWalletAddress: walletAddress,
                offerJettonAddress: from.address,
                offerAmount: from.stringWeiAmount,
                askJettonAddress: to.address,
                minAskAmount: minAmountOutWei,
                referralValue: 100,
                referralAddress: addresses_1.STONFI_REFERRAL_ADDRESS
            });
            return (0, convert_params_to_ton_config_1.convertTxParamsToTonConfig)(txParams);
        }
        catch (err) {
            console.log('getTxParams_ERROR ==> ', err);
            throw err;
        }
    }
}
exports.StonfiSwapServiceV2 = StonfiSwapServiceV2;
//# sourceMappingURL=stonfi-swap-service-v2.js.map