"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.EddyBridgeApiService = void 0;
const errors_1 = require("../../../../../../common/errors");
const blockchain_1 = require("../../../../../../common/utils/blockchain");
const injector_1 = require("../../../../../../core/injector/injector");
const find_transit_token_address_1 = require("../utils/find-transit-token-address");
class EddyBridgeApiService {
    static async getWeiTokenLimitInForeignChain(fromWithoutFee) {
        const { foreignCoins } = await injector_1.Injector.httpClient.get(`https://zetachain.blockpi.network/lcd/v1/public/zeta-chain/fungible/foreign_coins`);
        const zrc20TokenAddress = (0, find_transit_token_address_1.findCompatibleZrc20TokenAddress)(fromWithoutFee);
        const tokenInfo = foreignCoins.find(token => (0, blockchain_1.compareAddresses)(token.zrc20_contract_address, zrc20TokenAddress));
        if (!tokenInfo) {
            throw new errors_1.NotSupportedTokensError();
        }
        return tokenInfo.liquidity_cap;
    }
    static async fetchRates(params) {
        const api = 'https://api.eddy.finance/api/v1/swap/get-quote-bridge';
        return injector_1.Injector.httpClient.post(api, params);
    }
}
exports.EddyBridgeApiService = EddyBridgeApiService;
//# sourceMappingURL=eddy-bridge-api-service.js.map