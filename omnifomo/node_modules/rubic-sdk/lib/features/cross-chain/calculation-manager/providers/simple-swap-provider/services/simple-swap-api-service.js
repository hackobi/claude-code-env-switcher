"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.SimpleSwapApiService = void 0;
const injector_1 = require("../../../../../../core/injector/injector");
const cross_chain_deposit_statuses_1 = require("../../common/cross-chain-transfer-trade/models/cross-chain-deposit-statuses");
class SimpleSwapApiService {
    static getAllCurrencies() {
        return injector_1.Injector.httpClient.get(`${SimpleSwapApiService.apiEndpoint}/currencies`, {
            headers: { apikey: SimpleSwapApiService.xApiKey }
        });
    }
    static async getRanges(params) {
        const res = await injector_1.Injector.httpClient.get(`${SimpleSwapApiService.apiEndpoint}/ranges`, {
            params: {
                ...params
            },
            headers: { apikey: SimpleSwapApiService.xApiKey }
        });
        return res.result;
    }
    static async getEstimation(params) {
        const res = await injector_1.Injector.httpClient.get(`${SimpleSwapApiService.apiEndpoint}/estimates`, {
            params: {
                ...params
            },
            headers: { apikey: SimpleSwapApiService.xApiKey }
        });
        return res.result.estimatedAmount;
    }
    static createExchange(params) {
        return injector_1.Injector.httpClient.post(`${SimpleSwapApiService.apiEndpoint}/exchanges`, params, {
            headers: {
                apikey: SimpleSwapApiService.xApiKey
            }
        });
    }
    static async getTxStatus(id) {
        const res = await injector_1.Injector.httpClient.get(`${SimpleSwapApiService.apiEndpoint}/exchanges/${id}`, {
            headers: {
                apikey: SimpleSwapApiService.xApiKey
            }
        });
        const txData = res.result;
        if (txData.status === 'refunded' || txData.status === 'finished') {
            return {
                status: cross_chain_deposit_statuses_1.CROSS_CHAIN_DEPOSIT_STATUS.FINISHED,
                dstHash: txData.txTo
            };
        }
        const depositData = {
            status: txData.status,
            dstHash: null
        };
        return depositData;
    }
}
exports.SimpleSwapApiService = SimpleSwapApiService;
SimpleSwapApiService.xApiKey = 'sndfje3u4b3fnNSDNFUSDNVSunw345842hrnfd3b4nt4';
SimpleSwapApiService.apiEndpoint = 'https://x-api.rubic.exchange/simpleswap/v3';
//# sourceMappingURL=simple-swap-api-service.js.map