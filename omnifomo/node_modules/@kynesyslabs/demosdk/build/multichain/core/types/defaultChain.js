"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.DefaultChain = void 0;
class DefaultChain {
    // NOTE We init chain with await CHAIN.create(rpc_url)
    // This is necessary to ensure that the provider is connected
    // if the user specifies the rpc_url in the constructor,
    // as we cannot use await in the constructor
    constructor(rpc_url) {
        this.provider = null;
        this.name = "";
        this.signer = null;
        this.wallet = null;
        this.rpc_url = "";
        this.connected = false;
        if (rpc_url) {
            this.setRpc(rpc_url);
        }
    }
    // SECTION: Global methods
    /**
     * Sets the RPC URL only. Use `await instance.connect()` to connect to the rpc provider
     * @param rpc_url
     */
    setRpc(rpc_url) {
        this.rpc_url = rpc_url;
    }
    /**
     * Creates a new instance of this sdk
     * @param rpc_url The RPC URL
     * @returns The sdk instance connected to the RPC provider
     */
    static async create(rpc_url = "") {
        const instance = new this(rpc_url);
        if (rpc_url) {
            console.log("setting rpc url", rpc_url);
            instance.setRpc(rpc_url);
            await instance.connect();
        }
        return instance;
    }
    /**
     * Resets the instance provider, wallet and rpc_url
     */
    resetInstance() {
        this.provider = null;
        this.wallet = null;
        this.signer = null;
        this.connected = false;
    }
    /**
     * Creates a signed transaction to transfer default chain currency
     * @param receiver The receiver's address
     * @param amount The amount to transfer
     * @param options Options
     * @returns The signed transaction
     */
    prepareTransfer(receiver, amount, options) {
        return this.preparePay(receiver, amount, options);
    }
    /**
     * Creatthis.provider = new JsonRpcProvider(this.rpc_url)es a list of signed transactions to transfer default chain currency
     * @param payments A list of transfers to prepare
     * @param options Options
     * @returns An ordered list of signed transactions
     */
    prepareTransfers(payments, options) {
        // @ts-expect-error
        // INFO: Will throw error here because method is not implemented in this abstract class
        return this.preparePays(payments, options);
    }
    /**
     * Disconnects from the RPC provider and the wallet
     * @returns A boolean indicating if the disconnection was successful
     */
    async disconnect() {
        // INFO: Override when using a web sockets provider
        this.resetInstance();
        return !this.connected;
    }
    /**
     * Returns the public key of the connected wallet (if available).
     * @returns The public key as a hex string, or undefined if not available
     */
    getPublicKey() {
        return undefined;
    }
}
exports.DefaultChain = DefaultChain;
//# sourceMappingURL=defaultChain.js.map